{"ast":null,"code":"import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */function () {\n  /**\n   * Constructor for header renderer module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function HeaderRender(parent, serviceLocator) {\n    var _this = this;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    this.isFirstCol = false;\n    this.isReplaceDragEle = true;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    this.helper = function (e) {\n      var gObj = _this.parent;\n      var target = _this.draggable.currentStateTarget;\n      var parentEle = parentsUntil(target, 'e-headercell');\n      if (!(gObj.allowReordering || gObj.allowGrouping) || !isNullOrUndefined(parentEle) && parentEle.getElementsByClassName('e-checkselectall').length > 0) {\n        return false;\n      }\n      var visualElement = _this.parent.createElement('div', {\n        className: 'e-cloneproperties e-dragclone e-headerclone'\n      });\n      var element = target.classList.contains('e-headercell') ? target : parentEle;\n      if (!element || !gObj.allowReordering && element.classList.contains('e-stackedheadercell')) {\n        return false;\n      }\n      var height = element.offsetHeight;\n      var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n      var col;\n      if (headercelldiv) {\n        if (element.querySelector('.e-stackedheadercelldiv')) {\n          col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n        } else {\n          col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n        }\n        _this.column = col;\n        if (_this.column.lockColumn) {\n          return false;\n        }\n        visualElement.setAttribute('e-mappinguid', _this.column.uid);\n      }\n      if (col && !isNullOrUndefined(col.headerTemplate)) {\n        if (!isNullOrUndefined(col.headerTemplate)) {\n          var colIndex = gObj.getColumnIndexByField(col.field);\n          var result = col.getHeaderTemplate()(extend({\n            'index': colIndex\n          }, col), gObj, 'headerTemplate');\n          appendChildren(visualElement, result);\n        } else {\n          visualElement.innerHTML = col.headerTemplate;\n        }\n      } else {\n        visualElement.innerHTML = headercelldiv ? col.headerText : element.firstElementChild.innerHTML;\n      }\n      visualElement.style.width = element.offsetWidth + 'px';\n      visualElement.style.height = element.offsetHeight + 'px';\n      visualElement.style.lineHeight = (height - 6).toString() + 'px';\n      gObj.element.appendChild(visualElement);\n      return visualElement;\n    };\n    this.dragStart = function (e) {\n      var gObj = _this.parent;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      gObj.notify(events.columnDragStart, {\n        target: _this.draggable.currentStateTarget,\n        column: _this.column,\n        event: e.event\n      });\n    };\n    this.drag = function (e) {\n      var gObj = _this.parent;\n      var target = e.target;\n      if (target) {\n        var closest = getClosest(target, '.e-grid');\n        var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n        if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n          classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n          if (gObj.allowReordering) {\n            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n          }\n          if (!gObj.groupSettings.allowReordering) {\n            return;\n          }\n        }\n        gObj.notify(events.columnDrag, {\n          target: e.target,\n          column: _this.column,\n          event: e.event\n        });\n      }\n    };\n    this.dragStop = function (e) {\n      var gObj = _this.parent;\n      var cancel;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      if (!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea') || !gObj.allowReordering && parentsUntil(e.target, 'e-headercell') || !e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea')) {\n        remove(e.helper);\n        cancel = true;\n      }\n      gObj.notify(events.columnDragStop, {\n        target: e.target,\n        event: e.event,\n        column: _this.column,\n        cancel: cancel\n      });\n    };\n    this.drop = function (e) {\n      var gObj = _this.parent;\n      var uid = e.droppedElement.getAttribute('e-mappinguid');\n      var closest = getClosest(e.target, '.e-grid');\n      remove(e.droppedElement);\n      if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') || !(gObj.allowReordering || gObj.allowGrouping)) {\n        return;\n      }\n      gObj.notify(events.headerDrop, {\n        target: e.target,\n        uid: uid,\n        droppedElement: e.droppedElement\n      });\n    };\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.ariaService = this.serviceLocator.getService('ariaService');\n    this.widthService = this.serviceLocator.getService('widthService');\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    if (!this.parent.enableColumnVirtualization && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n      this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    }\n    this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n    }\n  }\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.renderPanel = function () {\n    var div = this.parent.element.querySelector('.' + literals.gridHeader);\n    var isRendered = div != null;\n    div = isRendered ? div : this.parent.createElement('div', {\n      className: 'e-gridheader'\n    });\n    var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) : this.parent.createElement('div', {\n      className: literals.headerContent\n    });\n    this.toggleStackClass(div);\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n    if (!isRendered) {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.renderTable = function () {\n    var headerDiv = this.getPanel();\n    headerDiv.appendChild(this.createHeaderTable());\n    this.setTable(headerDiv.querySelector('.' + literals.table));\n    if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n      this.initializeHeaderDrag();\n      this.initializeHeaderDrop();\n    }\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: this.parent.isFrozenGrid()\n      }\n    });\n  };\n  /**\n   * Get the header content div element of grid\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getPanel = function () {\n    return this.headerPanel;\n  };\n  /**\n   * Set the header content div element of grid\n   *\n   * @param  {Element} panel - specifies the panel element\n   * @returns {void}\n   */\n  HeaderRender.prototype.setPanel = function (panel) {\n    this.headerPanel = panel;\n  };\n  /**\n   * Get the header table element of grid\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getTable = function () {\n    return this.headerTable;\n  };\n  /**\n   * Set the header table element of grid\n   *\n   * @param  {Element} table - specifies the table element\n   * @returns {void}\n   */\n  HeaderRender.prototype.setTable = function (table) {\n    this.headerTable = table;\n  };\n  /**\n   * Get the header colgroup element\n   *\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.getColGroup = function () {\n    return this.colgroup;\n  };\n  /**\n   * Set the header colgroup element\n   *\n   * @param {Element} colGroup - specifies the colgroup\n   * @returns {Element} returns the element\n   */\n  HeaderRender.prototype.setColGroup = function (colGroup) {\n    return this.colgroup = colGroup;\n  };\n  /**\n   * Get the header row element collection.\n   *\n   * @returns {Element[]} returns the element\n   */\n  HeaderRender.prototype.getRows = function () {\n    var table = this.getTable();\n    return table.tHead.rows;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  HeaderRender.prototype.createHeaderTable = function () {\n    var table = this.createTable();\n    var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n    innerDiv.appendChild(table);\n    return innerDiv;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @param {Element} tableEle - specifies the table Element\n   * @param {freezeTable} tableName - specifies the table name\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n    var gObj = this.parent;\n    var isFrozen = gObj.isFrozenGrid();\n    if (this.getTable() && !isFrozen) {\n      remove(this.getTable());\n    }\n    var table = this.parent.createElement('table', {\n      className: literals.table,\n      attrs: {\n        cellspacing: '0.25px',\n        role: 'grid'\n      }\n    });\n    var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n    var findHeaderRow = this.createHeaderContent(tblName);\n    var thead = findHeaderRow.thead;\n    var tbody = this.parent.createElement(literals.tbody, {\n      className: this.parent.frozenRows ? '' : 'e-hide'\n    });\n    this.caption = this.parent.createElement('caption', {\n      innerHTML: this.parent.element.id + '_header_table',\n      className: 'e-hide'\n    });\n    var colGroup = this.parent.createElement(literals.colGroup);\n    var rowBody = this.parent.createElement('tr');\n    var bodyCell;\n    var rows = this.rows = findHeaderRow.rows;\n    for (var i = 0, len = rows.length; i < len; i++) {\n      for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n        bodyCell = this.parent.createElement('td');\n        rowBody.appendChild(bodyCell);\n      }\n    }\n    if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n      table.classList.add('e-sortfilter');\n    }\n    this.updateColGroup(colGroup);\n    tbody.appendChild(rowBody);\n    table.appendChild(this.setColGroup(colGroup));\n    table.appendChild(thead);\n    table.appendChild(tbody);\n    table.appendChild(this.caption);\n    this.ariaService.setOptions(table, {\n      colcount: gObj.getColumns().length.toString()\n    });\n    return table;\n  };\n  /**\n   * @param {Element} tableEle - specifies the column\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  HeaderRender.prototype.createTable = function (tableEle) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n    return this.createHeader(tableEle);\n  };\n  HeaderRender.prototype.createHeaderContent = function (tableName) {\n    var gObj = this.parent;\n    var index = 1;\n    var frozenMode = gObj.getFrozenMode();\n    var columns = gObj.getColumns();\n    var thead = this.parent.createElement('thead');\n    var colHeader = this.parent.createElement('tr', {\n      className: 'e-columnheader'\n    });\n    var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n    rowRenderer.element = colHeader;\n    var rows = [];\n    var headerRow;\n    this.colDepth = measureColumnDepth(gObj.columns);\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      rows[i] = this.generateRow(i);\n      rows[i].cells = [];\n    }\n    if (frozenMode !== 'Right') {\n      rows = this.ensureColumns(rows);\n    }\n    rows = this.getHeaderCells(rows, tableName);\n    if (frozenMode === 'Right') {\n      index = 0;\n      rows = this.ensureColumns(rows);\n    }\n    var frzCols = this.parent.getFrozenColumns();\n    if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n      var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n      if (colFreezeMode === 'movable' || frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight) {\n        if (frozenMode === 'Right') {\n          rows[0].cells.pop();\n        } else {\n          rows[0].cells.shift();\n        }\n      } else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n        rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n      } else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n        rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n      }\n    }\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      headerRow = rowRenderer.render(rows[i], columns);\n      if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n        headerRow.style.height = this.parent.rowHeight + 'px';\n      }\n      thead.appendChild(headerRow);\n    }\n    var findHeaderRow = {\n      thead: thead,\n      rows: rows\n    };\n    return findHeaderRow;\n  };\n  HeaderRender.prototype.updateColGroup = function (colGroup) {\n    var cols = this.parent.getColumns();\n    var col;\n    var indexes = this.parent.getColumnIndexesInView();\n    if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis()) {\n      cols = extend([], this.parent.getColumns());\n      cols.splice(0, this.parent.getFrozenColumns());\n    }\n    colGroup.id = this.parent.element.id + literals.colGroup;\n    if (this.parent.allowGrouping) {\n      for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n          continue;\n        }\n        col = this.parent.createElement('col', {\n          className: 'e-group-intent'\n        });\n        colGroup.appendChild(col);\n      }\n    }\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      col = this.parent.createElement('col', {\n        className: 'e-detail-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    for (var i = 0, len = cols.length; i < len; i++) {\n      col = this.parent.createElement('col');\n      if (cols[i].visible === false) {\n        setStyleAttribute(col, {\n          'display': 'none'\n        });\n      }\n      colGroup.appendChild(col);\n    }\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n    return colGroup;\n  };\n  HeaderRender.prototype.ensureColumns = function (rows) {\n    //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n    var gObj = this.parent;\n    var indexes = this.parent.getColumnIndexesInView();\n    for (var i = 0, len = rows.length; i < len; i++) {\n      if (gObj.allowGrouping) {\n        for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n          if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n            continue;\n          }\n          rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n        }\n      }\n      if (gObj.detailTemplate || gObj.childGrid) {\n        var args = {};\n        this.parent.notify(events.detailIndentCellInfo, args);\n        rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n      }\n      if (gObj.isRowDragable()) {\n        rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n      }\n    }\n    return rows;\n  };\n  HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n    var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n    var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    if (this.parent.lockcolPositionCount) {\n      for (var i = 0; i < cols.length; i++) {\n        this.lockColsRendered = false;\n        rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === cols.length - 1, thead, tableName, false);\n      }\n    }\n    for (var i = 0, len = cols.length; i < len; i++) {\n      this.notfrzIdx = 0;\n      this.lockColsRendered = true;\n      rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === len - 1, thead, tableName, false);\n    }\n    return rows;\n  };\n  HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n    var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n    var isFrozen = this.parent.isFrozenGrid();\n    var isLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var isFrozenLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n    var left;\n    if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n      left = scrollbar.scrollLeft;\n    }\n    if (!cols.columns) {\n      if (left && left > 0 && this.parent.contentModule.isXaxis() && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n        rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n      } else {\n        if (!isFrozen && isLockColumn || isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn) {\n          rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n      }\n      if (this.parent.lockcolPositionCount) {\n        if (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered)) {\n          this.frzIdx++;\n        } else {\n          this.notfrzIdx++;\n        }\n      } else {\n        this.frzIdx++;\n      }\n    } else {\n      this.isFirstCol = false;\n      var colSpan = this.getCellCnt(cols, 0);\n      if (colSpan) {\n        var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n        var isStackedLockColumn = this.parent.lockcolPositionCount === 0 || !this.lockColsRendered && stackedLockColsCount !== 0 || this.lockColsRendered && colSpan - stackedLockColsCount !== 0;\n        var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n        if (!isFrozen && isStackedLockColumn || isFrozenStack) {\n          rows[index].cells.push(new Cell({\n            cellType: CellType.StackedHeader,\n            column: cols,\n            colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen),\n            className: isFirstObj ? '' : isFirstCol ? 'e-firstcell' : ''\n          }));\n        }\n      }\n      if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n        for (var i = 0; i < cols.columns.length; i++) {\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === cols.columns.length - 1 && isLastCol, isMovable, tableName, false);\n        }\n      }\n      if (this.lockColsRendered) {\n        for (var i = 0, len = cols.columns.length; i < len; i++) {\n          isFirstObj = isFirstObj && i === 0;\n          var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !isFirstObj;\n          var isLaststackedCol = i === len - 1 && isLastCol;\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n        }\n      }\n    }\n    return rows;\n  };\n  HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n    var length = columns.length;\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n      } else if (columns[i].getFreezeTableName() === tableName) {\n        isTrue = true;\n        break;\n      }\n    }\n    return isTrue;\n  };\n  HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n    if (col.columns) {\n      for (var i = 0; i < col.columns.length; i++) {\n        lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n      }\n    } else if (col.lockColumn) {\n      lockColsCount++;\n    }\n    return lockColsCount;\n  };\n  HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n    if (isFrozen) {\n      colSpan = this.getFrozenColSpan(columns, tableName, 0);\n    } else if (this.parent.lockcolPositionCount) {\n      colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n    }\n    return colSpan;\n  };\n  HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n    var length = columns.length;\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n      } else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n        count++;\n      }\n    }\n    return count;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  HeaderRender.prototype.generateRow = function (index) {\n    return new Row({});\n  };\n  HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': false,\n      'isTemplate': !isNullOrUndefined(column.headerTemplate),\n      'rowID': '',\n      'column': column,\n      'cellType': cellType,\n      'rowSpan': rowSpan,\n      'className': className,\n      'index': rowIndex,\n      'colIndex': colIndex\n    };\n    if (!opt.rowSpan || opt.rowSpan < 2) {\n      delete opt.rowSpan;\n    }\n    return new Cell(opt);\n  };\n  /**\n   * Function to hide header table column based on visible property\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   */\n  HeaderRender.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    var frzCols = gObj.getFrozenColumns();\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n      if (frzCols) {\n        var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        if (idx < normalizedfrzCols) {\n          setStyleAttribute(this.getColGroup().children[idx], {\n            'display': displayVal\n          });\n        } else {\n          var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n          setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], {\n            'display': displayVal\n          });\n        }\n      } else {\n        setStyleAttribute(this.getColGroup().children[idx], {\n          'display': displayVal\n        });\n      }\n    }\n    this.refreshUI();\n  };\n  HeaderRender.prototype.colPosRefresh = function () {\n    this.refreshUI();\n  };\n  /**\n   * Refresh the header of the Grid.\n   *\n   * @returns {void}\n   */\n  HeaderRender.prototype.refreshUI = function () {\n    var frzCols = this.parent.isFrozenGrid();\n    var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n    var headerDiv = this.getPanel();\n    this.toggleStackClass(headerDiv);\n    var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table) : this.getTable();\n    var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right' : undefined;\n    if (isVFTable) {\n      table = this.parent.contentModule.getVirtualFreezeHeader();\n      tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n    }\n    if (table) {\n      remove(table);\n      table.removeChild(table.firstChild);\n      table.removeChild(table.childNodes[0]);\n      var colGroup = this.parent.createElement(literals.colGroup);\n      var findHeaderRow = this.createHeaderContent(tableName);\n      this.rows = findHeaderRow.rows;\n      table.insertBefore(findHeaderRow.thead, table.firstChild);\n      this.updateColGroup(colGroup);\n      table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n      if (!isVFTable) {\n        this.setTable(table);\n      }\n      this.appendContent(table);\n      this.parent.notify(events.colGroupRefresh, {});\n      this.widthService.setWidthToColumns();\n      this.parent.updateDefaultCursor();\n      if (!frzCols || this.parent.enableColumnVirtualization && frzCols) {\n        this.initializeHeaderDrag();\n      }\n      var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n        if (gCells.length) {\n          gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n        }\n      }\n      if (!frzCols) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: frzCols\n          }\n        });\n      }\n      if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: false,\n            isXaxis: true\n          }\n        });\n      }\n      if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n        wrap(rows, true);\n      }\n    }\n  };\n  HeaderRender.prototype.toggleStackClass = function (div) {\n    var column = this.parent.columns;\n    var stackedHdr = column.some(function (column) {\n      return !isNullOrUndefined(column.columns);\n    });\n    if (stackedHdr) {\n      div.classList.add('e-stackedheader');\n    } else {\n      div.classList.remove('e-stackedheader');\n    }\n  };\n  HeaderRender.prototype.appendContent = function (table) {\n    this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n  };\n  HeaderRender.prototype.getCellCnt = function (col, cnt) {\n    if (col.columns) {\n      for (var i = 0, len = col.columns.length; i < len; i++) {\n        cnt = this.getCellCnt(col.columns[i], cnt);\n      }\n    } else {\n      if (col.visible) {\n        cnt++;\n      }\n    }\n    return cnt;\n  };\n  HeaderRender.prototype.initializeHeaderDrag = function () {\n    var gObj = this.parent;\n    if (!(this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea)) {\n      return;\n    }\n    this.draggable = new Draggable(gObj.getHeaderContent(), {\n      dragTarget: '.e-headercell',\n      distance: 5,\n      helper: this.helper,\n      dragStart: this.dragStart,\n      drag: this.drag,\n      dragStop: this.dragStop,\n      abort: '.e-rhandler',\n      isReplaceDragEle: this.isReplaceDragEle\n    });\n  };\n  HeaderRender.prototype.initializeHeaderDrop = function () {\n    var gObj = this.parent;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var drop = new Droppable(gObj.getHeaderContent(), {\n      accept: '.e-dragclone',\n      drop: this.drop\n    });\n  };\n  HeaderRender.prototype.renderCustomToolbar = function () {\n    var _this = this;\n    var gObj = this.parent;\n    if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar && (gObj.allowSorting || gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar')) {\n      var div = gObj.createElement('div', {\n        className: 'e-res-toolbar e-toolbar'\n      });\n      var toolbarItems = gObj.createElement('div', {\n        className: 'e-toolbar-items'\n      });\n      var toolbarLeft = gObj.createElement('div', {\n        className: 'e-toolbar-left'\n      });\n      var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n      for (var i = 0; i < count; i++) {\n        var toolbarItem = gObj.createElement('div', {\n          className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align'\n        });\n        var cls = count === 1 ? this.parent.allowSorting ? 'sort' : 'filter' : i === 1 ? 'sort' : 'filter';\n        var button = gObj.createElement('button', {\n          className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn'\n        });\n        var span = gObj.createElement('span', {\n          className: 'e-btn-icon e-res' + cls + '-icon e-icons'\n        });\n        button.appendChild(span);\n        var btnObj = new Button({});\n        btnObj.appendTo(button);\n        button.onclick = function (e) {\n          if (e.target.classList.contains('e-ressort-btn') || e.target.classList.contains('e-ressort-icon')) {\n            _this.parent.showResponsiveCustomSort();\n          } else {\n            _this.parent.showResponsiveCustomFilter();\n          }\n        };\n        toolbarItem.appendChild(button);\n        toolbarLeft.appendChild(toolbarItem);\n      }\n      toolbarItems.appendChild(toolbarLeft);\n      div.appendChild(toolbarItems);\n      gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n    } else {\n      if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n        gObj.getContent().classList.add('e-responsive-header');\n      }\n    }\n  };\n  HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n    var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n    if (args.module === 'toolbar') {\n      if (resToolbar) {\n        remove(resToolbar);\n      } else {\n        this.renderCustomToolbar();\n      }\n    }\n  };\n  return HeaderRender;\n}();\nexport { HeaderRender };","map":{"version":3,"names":["isNullOrUndefined","extend","setStyleAttribute","closest","getClosest","remove","classList","CellType","RowRenderer","Cell","Row","events","Draggable","Droppable","Button","parentsUntil","wrap","measureColumnDepth","appendChildren","literals","HeaderRender","parent","serviceLocator","_this","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","helper","e","gObj","target","draggable","currentStateTarget","parentEle","allowReordering","allowGrouping","getElementsByClassName","length","visualElement","createElement","className","element","contains","height","offsetHeight","headercelldiv","querySelector","col","getStackedHeaderColumnByHeaderText","innerText","trim","columns","getColumnByUid","getAttribute","column","lockColumn","setAttribute","uid","headerTemplate","colIndex","getColumnIndexByField","field","result","getHeaderTemplate","innerHTML","headerText","firstElementChild","style","width","offsetWidth","lineHeight","toString","appendChild","dragStart","display","notify","columnDragStart","event","drag","cloneElement","groupSettings","columnDrag","dragStop","cancel","columnDragStop","drop","droppedElement","headerDrop","ariaService","getService","widthService","isDestroyed","enableColumnVirtualization","getFrozenLeftColumnsCount","getFrozenRightColumnsCount","on","columnVisibilityChanged","setVisible","columnPositionChanged","colPosRefresh","initialEnd","renderCustomToolbar","rowRenderingMode","uiUpdate","updateCustomResponsiveToolbar","prototype","renderPanel","div","gridHeader","isRendered","innerDiv","headerContent","toggleStackClass","setPanel","renderTable","headerDiv","getPanel","createHeaderTable","setTable","table","getFrozenColumns","initializeHeaderDrag","initializeHeaderDrop","headerRefreshed","rows","args","isFrozen","isFrozenGrid","headerPanel","panel","getTable","headerTable","getColGroup","colgroup","setColGroup","colGroup","getRows","tHead","createTable","createHeader","tableEle","tableName","attrs","cellspacing","role","tblName","getFrozenLeftCount","findHeaderRow","createHeaderContent","thead","tbody","frozenRows","caption","id","rowBody","bodyCell","i","len","j","len_1","cells","allowFiltering","allowSorting","add","updateColGroup","setOptions","colcount","getColumns","index","frozenMode","getFrozenMode","colHeader","rowRenderer","Header","headerRow","colDepth","generateRow","ensureColumns","getHeaderCells","frzCols","isRowDragable","colFreezeMode","getFreezeTableName","leftRight","frozenRight","pop","shift","frozenLeft","freeze","render","rowHeight","cols","indexes","getColumnIndexesInView","contentModule","isXaxis","splice","indexOf","detailTemplate","childGrid","visible","c","len_2","push","generateCell","HeaderIndent","detailIndentCellInfo","DetailHeader","RowDragHIcon","getHeaderTable","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","isStackLastCol","lastCol","isLockColumn","isFrozenLockColumn","scrollbar","getContent","left","scrollLeft","inViewIndexes","getColumnIndexByUid","frozenColumns","colSpan","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","isFrozenStack","ensureStackedFrozen","cellType","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","isTrue","lockColsCount","getFrozenColSpan","count","rowSpan","rowIndex","opt","displayVal","idx","clen","getNormalizedColumnIndex","normalizedfrzCols","children","mTblColGrp","getHeaderContent","movableHeader","refreshUI","isVFTable","freezeReorder","undefined","getVirtualFreezeHeader","removeChild","firstChild","childNodes","insertBefore","appendContent","colGroupRefresh","setWidthToColumns","updateDefaultCursor","slice","call","querySelectorAll","_i","rows_1","row","gCells","allowTextWrap","textWrapSettings","wrapMode","stackedHdr","some","cnt","showDropArea","dragTarget","distance","abort","accept","toolbar","filterSettings","type","toolbarItems","toolbarLeft","toolbarItem","cls","button","span","btnObj","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","enableAdaptiveUI","resToolbar","module"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/renderer/header-renderer.js"],"sourcesContent":["import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.getElementsByClassName('e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    var result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization\n            && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.' + literals.gridHeader);\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) :\n            this.parent.createElement('div', { className: literals.headerContent });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.' + literals.table));\n        if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.isFrozenGrid() } });\n    };\n    /**\n     * Get the header content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     *\n     * @param  {Element} table - specifies the table element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     *\n     * @returns {Element[]} returns the element\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @param {Element} tableEle - specifies the table Element\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var gObj = this.parent;\n        var isFrozen = gObj.isFrozenGrid();\n        if (this.getTable() && !isFrozen) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        var findHeaderRow = this.createHeaderContent(tblName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement(literals.tbody, { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement(literals.colGroup);\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    /**\n     * @param {Element} tableEle - specifies the column\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var index = 1;\n        var frozenMode = gObj.getFrozenMode();\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        if (frozenMode !== 'Right') {\n            rows = this.ensureColumns(rows);\n        }\n        rows = this.getHeaderCells(rows, tableName);\n        if (frozenMode === 'Right') {\n            index = 0;\n            rows = this.ensureColumns(rows);\n        }\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n            var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n            if (colFreezeMode === 'movable' || (frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight)) {\n                if (frozenMode === 'Right') {\n                    rows[0].cells.pop();\n                }\n                else {\n                    rows[0].cells.shift();\n                }\n            }\n            else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n                rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n            }\n            else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n                rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + literals.colGroup;\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName, false);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead, tableName, false);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {\n        var lastCol = isLastCol ? isStackLastCol ? 'e-laststackcell' : 'e-lastcell' : '';\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        var isFrozenLockColumn = !this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered)\n            || (!cols.lockColumn && this.lockColsRendered);\n        var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var left;\n        if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n            left = scrollbar.scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if ((!isFrozen && isLockColumn) || (isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn)) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n                if ((!isFrozen && isStackedLockColumn) || isFrozenStack) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen),\n                        className: isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName, false);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    isFirstObj = isFirstObj && i === 0;\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !isFirstObj;\n                    var isLaststackedCol = i === (len - 1) && isLastCol;\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                isTrue = true;\n                break;\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n        if (isFrozen) {\n            colSpan = this.getFrozenColSpan(columns, tableName, 0);\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n            }\n            else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n                count++;\n            }\n        }\n        return count;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.isFrozenGrid();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table)\n            : this.getTable();\n        var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left'\n            : 'frozen-right' : undefined;\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n            tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n        }\n        if (table) {\n            remove(table);\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement(literals.colGroup);\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable) {\n                this.setTable(table);\n            }\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: frzCols } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({});\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n        }\n        else {\n            if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}