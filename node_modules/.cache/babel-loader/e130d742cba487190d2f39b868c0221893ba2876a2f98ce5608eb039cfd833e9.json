{"ast":null,"code":"import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */function () {\n  /**\n   * Constructor for the Grid ColumnChooser module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   * @hidden\n   */\n  function ColumnChooser(parent, serviceLocator) {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.changedColumns = [];\n    this.unchangedColumns = [];\n    this.isDlgOpen = false;\n    this.initialOpenDlg = true;\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.isInitialOpen = false;\n    this.isCustomizeOpenCC = false;\n    this.searchOperator = 'startswith';\n    this.prevShowedCols = [];\n    this.hideDialogFunction = this.hideDialog.bind(this);\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n    this.cBoxTrue = createCheckBox(this.parent.createElement, true, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, true, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden e-cc e-cc-chbox',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n  }\n  ColumnChooser.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    this.removeEventListener();\n    this.unWireEvents();\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n      this.dlgObj.destroy();\n    }\n  };\n  ColumnChooser.prototype.rtlUpdate = function () {\n    if (this.parent.enableRtl) {\n      addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n    } else {\n      removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.add(document, 'click', this.clickHandler, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n    this.parent.on(events.initialEnd, this.render, this);\n    this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    this.parent.on(events.keyPressed, this.keyUpHandler, this);\n    this.parent.on(events.resetColumns, this.onResetColumns, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    EventHandler.remove(document, 'click', this.clickHandler);\n    this.parent.off(events.initialEnd, this.render);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n    this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    this.parent.on(events.keyPressed, this.keyUpHandler, this);\n    this.parent.off(events.resetColumns, this.onResetColumns);\n    this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n  };\n  ColumnChooser.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    this.renderDlgContent();\n    this.getShowHideService = this.serviceLocator.getService('showHideService');\n  };\n  ColumnChooser.prototype.clickHandler = function (e) {\n    var targetElement = e.target;\n    if (!this.isCustomizeOpenCC) {\n      if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n        if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n          if (this.initialOpenDlg && this.dlgObj.visible || !this.isDlgOpen) {\n            this.isDlgOpen = true;\n            return;\n          }\n        } else if (targetElement.classList.contains('e-cc-cancel')) {\n          targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n          this.columnChooserSearch('');\n          this.removeCancelIcon();\n          this.refreshCheckboxButton();\n        }\n      } else {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n          this.dlgObj.hide();\n          this.clearActions();\n          this.refreshCheckboxState();\n          // this.unWireEvents();\n          this.isDlgOpen = false;\n        }\n      }\n      if (this.parent.detailTemplate || this.parent.childGrid) {\n        this.targetdlg = e.target;\n      }\n    }\n    if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n      this.refreshCheckboxState();\n    }\n    this.rtlUpdate();\n  };\n  ColumnChooser.prototype.hideDialog = function () {\n    if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n      this.dlgObj.hide();\n      // this.unWireEvents();\n      this.isDlgOpen = false;\n    }\n  };\n  /**\n   * To render columnChooser when showColumnChooser enabled.\n   *\n   * @param {number} x - specifies the position x\n   * @param {number} y - specifies the position y\n   * @param {Element} target - specifies the target\n   * @returns {void}\n   * @hidden\n   */\n  ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n    if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n      this.hideOpenedDialog();\n    }\n    if (!this.dlgObj.visible) {\n      var args = this.beforeOpenColumnChooserEvent();\n      if (args.cancel) {\n        return;\n      }\n      if (target) {\n        this.targetdlg = target;\n      }\n      this.refreshCheckboxState();\n      this.dlgObj.dataBind();\n      this.dlgObj.element.style.maxHeight = '430px';\n      var elementVisible = this.dlgObj.element.style.display;\n      this.dlgObj.element.style.display = 'block';\n      var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n      var toolbarItem = closest(target, '.e-toolbar-item');\n      var newpos = void 0;\n      if (isSticky) {\n        newpos = toolbarItem.getBoundingClientRect();\n        this.dlgObj.element.classList.add('e-sticky');\n      } else {\n        this.dlgObj.element.classList.remove('e-sticky');\n        newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n      }\n      this.dlgObj.element.style.display = elementVisible;\n      this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n      var dlgWidth = 250;\n      if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n        this.dlgObj.width = 258;\n      }\n      if (Browser.isDevice) {\n        this.dlgObj.target = document.body;\n        this.dlgObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n        this.dlgObj.refreshPosition();\n        this.dlgObj.open = this.mOpenDlg.bind(this);\n      } else {\n        if (this.parent.enableRtl) {\n          this.dlgObj.element.style.left = target.offsetLeft + 'px';\n        } else {\n          this.dlgObj.element.style.left = newpos.left - dlgWidth + closest(target, '.e-cc-toolbar').clientWidth + 2 + 'px';\n        }\n      }\n      this.removeCancelIcon();\n      this.dlgObj.show();\n      this.parent.notify(events.columnChooserOpened, {\n        dialog: this.dlgObj\n      });\n    } else {\n      // this.unWireEvents();\n      this.hideDialog();\n      this.addcancelIcon();\n      this.clearActions();\n      this.refreshCheckboxState();\n    }\n    this.rtlUpdate();\n  };\n  /**\n   * Column chooser can be displayed on screen by given position(X and Y axis).\n   *\n   * @param  {number} X - Defines the X axis.\n   * @param  {number} Y - Defines the Y axis.\n   * @return {void}\n   */\n  ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n    this.isCustomizeOpenCC = true;\n    if (this.dlgObj.visible) {\n      this.hideDialog();\n      return;\n    }\n    var args = this.beforeOpenColumnChooserEvent();\n    if (args.cancel) {\n      return;\n    }\n    if (!this.isInitialOpen) {\n      this.dlgObj.content = this.renderChooserList();\n      this.updateIntermediateBtn();\n    } else {\n      this.refreshCheckboxState();\n    }\n    this.dlgObj.dataBind();\n    this.dlgObj.position = {\n      X: 'center',\n      Y: 'center'\n    };\n    if (isNullOrUndefined(X)) {\n      this.dlgObj.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      this.dlgObj.refreshPosition();\n    } else {\n      this.dlgObj.element.style.top = '';\n      this.dlgObj.element.style.left = '';\n      this.dlgObj.element.style.top = Y + 'px';\n      this.dlgObj.element.style.left = X + 'px';\n    }\n    this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n    this.dlgObj.show();\n    this.isInitialOpen = true;\n    this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n  };\n  ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      this.render();\n    }\n  };\n  ColumnChooser.prototype.keyUpHandler = function (e) {\n    if (e.action === 'escape') {\n      this.hideDialog();\n    }\n  };\n  ColumnChooser.prototype.customDialogOpen = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n  };\n  ColumnChooser.prototype.customDialogClose = function () {\n    var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n    EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n  };\n  ColumnChooser.prototype.getColumns = function () {\n    var columns = this.parent.getColumns().filter(function (column) {\n      return column.type !== 'checkbox' && column.showInColumnChooser === true || column.type === 'checkbox' && column.field !== undefined;\n    });\n    return columns;\n  };\n  ColumnChooser.prototype.renderDlgContent = function () {\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-ccdlg e-cc',\n      id: this.parent.element.id + '_ccdlg'\n    });\n    this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n    this.parent.element.appendChild(this.dlgDiv);\n    this.dlgObj = new Dialog({\n      header: this.l10n.getConstant('ChooseColumns'),\n      showCloseIcon: false,\n      closeOnEscape: false,\n      locale: this.parent.locale,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      target: document.getElementById(this.parent.element.id),\n      buttons: [{\n        click: this.confirmDlgBtnClick.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('OKButton'),\n          isPrimary: true,\n          cssClass: 'e-cc e-cc_okbtn'\n        }\n      }, {\n        click: this.clearBtnClick.bind(this),\n        buttonModel: {\n          cssClass: 'e-flat e-cc e-cc-cnbtn',\n          content: this.l10n.getConstant('CancelButton')\n        }\n      }],\n      content: this.renderChooserList(),\n      width: 250,\n      cssClass: 'e-cc',\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[isStringTemplate] = true;\n    this.dlgObj.appendTo(this.dlgDiv);\n    this.wireEvents();\n  };\n  ColumnChooser.prototype.renderChooserList = function () {\n    this.mainDiv = this.parent.createElement('div', {\n      className: 'e-main-div e-cc'\n    });\n    var searchDiv = this.parent.createElement('div', {\n      className: 'e-cc-searchdiv e-cc e-input-group'\n    });\n    var ccsearchele = this.parent.createElement('input', {\n      className: 'e-ccsearch e-cc e-input',\n      attrs: {\n        placeholder: this.l10n.getConstant('Search')\n      }\n    });\n    var ccsearchicon = this.parent.createElement('span', {\n      className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n      attrs: {\n        title: this.l10n.getConstant('Search')\n      }\n    });\n    var conDiv = this.parent.createElement('div', {\n      className: 'e-cc-contentdiv'\n    });\n    this.innerDiv = this.parent.createElement('div', {\n      className: 'e-innerdiv e-cc'\n    });\n    searchDiv.appendChild(ccsearchele);\n    searchDiv.appendChild(ccsearchicon);\n    this.searchBoxObj = new SearchBox(ccsearchele);\n    var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n    this.innerDiv.appendChild(innerDivContent);\n    conDiv.appendChild(this.innerDiv);\n    this.mainDiv.appendChild(searchDiv);\n    this.mainDiv.appendChild(conDiv);\n    return this.mainDiv;\n  };\n  ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n    this.stateChangeColumns = [];\n    this.changedStateColumns = [];\n    this.changedColumns = this.changedColumns.length > 0 ? this.changedColumns : this.unchangedColumns;\n    this.changedColumnState(this.changedColumns);\n    var uncheckedLength = this.ulElement.querySelector('.e-uncheck') && this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n    if (!isNullOrUndefined(args)) {\n      if (uncheckedLength < this.parent.getColumns().length) {\n        if (this.hideColumn.length) {\n          this.columnStateChange(this.hideColumn, false);\n        }\n        if (this.showColumn.length) {\n          this.columnStateChange(this.showColumn, true);\n        }\n        this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n        this.clearActions();\n        this.parent.notify(events.tooltipDestroy, {\n          module: 'edit'\n        });\n        if (this.parent.getCurrentViewRecords().length === 0) {\n          var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n          emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n        }\n      }\n    }\n  };\n  ColumnChooser.prototype.onResetColumns = function (e) {\n    if (e.requestType === 'columnstate') {\n      this.resetColumnState();\n      return;\n    }\n  };\n  ColumnChooser.prototype.resetColumnState = function () {\n    this.showColumn = [];\n    this.hideColumn = [];\n    this.hideDialog();\n  };\n  ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n    for (var index = 0; index < changedColumns.length; index++) {\n      var colUid = changedColumns[index];\n      var currentCol = this.parent.getColumnByUid(colUid);\n      this.changedStateColumns.push(currentCol);\n    }\n  };\n  ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n    for (var index = 0; index < stateColumns.length; index++) {\n      var colUid = stateColumns[index];\n      var currentCol = this.parent.getColumnByUid(colUid);\n      if (currentCol.type !== 'checkbox') {\n        currentCol.visible = state;\n      }\n      this.stateChangeColumns.push(currentCol);\n    }\n  };\n  ColumnChooser.prototype.clearActions = function () {\n    this.resetColumnState();\n    this.addcancelIcon();\n  };\n  ColumnChooser.prototype.clearBtnClick = function () {\n    this.clearActions();\n    this.parent.notify(events.columnChooserCancelBtnClick, {\n      dialog: this.dlgObj\n    });\n  };\n  ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n    if (selectAll === void 0) {\n      selectAll = false;\n    }\n    if (isChecked) {\n      if (this.hideColumn.indexOf(coluid) !== -1) {\n        this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n      }\n      if (this.showColumn.indexOf(coluid) === -1) {\n        this.showColumn.push(coluid);\n      }\n    } else {\n      if (this.showColumn.indexOf(coluid) !== -1) {\n        this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n      }\n      if (this.hideColumn.indexOf(coluid) === -1) {\n        this.hideColumn.push(coluid);\n      }\n    }\n    if (selectAll) {\n      if (!isChecked) {\n        this.changedColumns.push(coluid);\n      } else {\n        this.unchangedColumns.push(coluid);\n      }\n    } else if (this.changedColumns.indexOf(coluid) !== -1) {\n      this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n    } else {\n      this.changedColumns.push(coluid);\n    }\n  };\n  ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n    var clearSearch = false;\n    var fltrCol;\n    var okButton;\n    var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n    var selectedCbox = this.ulElement.querySelector('.e-check') && this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    this.isInitialOpen = true;\n    if (buttonEle) {\n      okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n    }\n    if (searchVal === '') {\n      this.removeCancelIcon();\n      fltrCol = this.getColumns();\n      clearSearch = true;\n    } else {\n      fltrCol = new DataManager(this.getColumns()).executeLocal(new Query().where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n    }\n    if (fltrCol.length) {\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.classList.remove('e-ccnmdiv');\n      this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol));\n      if (!clearSearch) {\n        this.addcancelIcon();\n        this.refreshCheckboxButton();\n      } else {\n        if (okButton && selectedCbox) {\n          okButton.disabled = false;\n        }\n      }\n    } else {\n      var nMatchele = this.parent.createElement('span', {\n        className: 'e-cc e-nmatch'\n      });\n      nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n      this.innerDiv.innerHTML = ' ';\n      this.innerDiv.appendChild(nMatchele);\n      this.innerDiv.classList.add('e-ccnmdiv');\n      if (okButton) {\n        okButton.disabled = true;\n      }\n    }\n    this.flag = true;\n    this.stopTimer();\n  };\n  ColumnChooser.prototype.wireEvents = function () {\n    EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n    EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n    this.searchBoxObj.wireEvent();\n  };\n  ColumnChooser.prototype.unWireEvents = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    if (this.dlgObj.element) {\n      EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n    }\n    EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n    this.searchBoxObj.unWireEvent();\n  };\n  ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n    var checkstate;\n    var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n    if (elem) {\n      var selectAll = elem.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateSelectAll(!elem.querySelector('.e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n      }\n      elem.querySelector('.e-chk-hidden').focus();\n      if (elem.querySelector('.e-check')) {\n        checkstate = true;\n      } else if (elem.querySelector('.e-uncheck')) {\n        checkstate = false;\n      } else {\n        return;\n      }\n      this.updateIntermediateBtn();\n      var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n      var column = this.parent.getColumns();\n      if (columnUid === 'grid-selectAll') {\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        for (var i = 0; i < column.length; i++) {\n          if (column[i].showInColumnChooser) {\n            this.checkstatecolumn(checkstate, column[i].uid, true);\n          }\n        }\n      } else {\n        this.checkstatecolumn(checkstate, columnUid);\n      }\n      this.refreshCheckboxButton();\n    }\n  };\n  ColumnChooser.prototype.updateIntermediateBtn = function () {\n    var cnt = this.ulElement.children.length - 1;\n    var className = [];\n    var elem = this.ulElement.children[0].querySelector('.e-frame');\n    var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n    var btn = this.dlgObj.btnObj[0];\n    btn.disabled = false;\n    if (cnt === selected) {\n      className = ['e-check'];\n    } else if (selected) {\n      className = ['e-stop'];\n    } else {\n      className = ['e-uncheck'];\n      btn.disabled = true;\n    }\n    btn.dataBind();\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n  };\n  ColumnChooser.prototype.updateSelectAll = function (checked) {\n    var cBoxes = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n    }\n  };\n  ColumnChooser.prototype.refreshCheckboxButton = function () {\n    var visibleCols = this.parent.getVisibleColumns();\n    for (var i = 0; i < visibleCols.length; i++) {\n      var columnUID = visibleCols[i].uid;\n      if (this.prevShowedCols.indexOf(columnUID) === -1) {\n        this.prevShowedCols.push(columnUID);\n      }\n    }\n    for (var i = 0; i < this.hideColumn.length; i++) {\n      var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n      if (index !== -1) {\n        this.prevShowedCols.splice(index, 1);\n      }\n    }\n    var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n    var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n    btn.disabled = false;\n    var srchShowCols = [];\n    var searchData = [].slice.call(this.parent.element.getElementsByClassName('e-cc-chbox'));\n    for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n      var element = searchData[i];\n      var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      srchShowCols.push(columnUID);\n    }\n    var hideCols = this.showColumn.filter(function (column) {\n      return srchShowCols.indexOf(column) !== -1;\n    });\n    if (selected === 0 && hideCols.length === 0) {\n      btn.disabled = true;\n    }\n    btn.dataBind();\n  };\n  ColumnChooser.prototype.refreshCheckboxList = function (gdCol) {\n    this.ulElement = this.parent.createElement('ul', {\n      className: 'e-ccul-ele e-cc'\n    });\n    var selectAllValue = this.l10n.getConstant('SelectAll');\n    var cclist = this.parent.createElement('li', {\n      className: 'e-cclist e-cc e-cc-selectall'\n    });\n    var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n    if (gdCol.length) {\n      selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n      selectAll.querySelector('.e-frame').classList.add('e-selectall');\n      this.checkState(selectAll.querySelector('.e-icons'), true);\n      cclist.appendChild(selectAll);\n      this.ulElement.appendChild(cclist);\n    }\n    for (var i = 0; i < gdCol.length; i++) {\n      var columns = gdCol[i];\n      this.renderCheckbox(columns);\n    }\n    return this.ulElement;\n  };\n  ColumnChooser.prototype.refreshCheckboxState = function () {\n    this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n    this.columnChooserSearch('');\n    var gridObject = this.parent;\n    var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n    for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n      var element = currentCheckBoxColls[i];\n      var columnUID = void 0;\n      if (this.parent.childGrid || this.parent.detailTemplate) {\n        columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n      } else {\n        columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n      }\n      var column = gridObject.getColumnByUid(columnUID);\n      var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n      if (column.visible && !uncheck.length) {\n        element.checked = true;\n        this.checkState(element.parentElement.querySelector('.e-icons'), true);\n      } else {\n        element.checked = false;\n        this.checkState(element.parentElement.querySelector('.e-icons'), false);\n      }\n    }\n  };\n  ColumnChooser.prototype.checkState = function (element, state) {\n    if (state) {\n      classList(element, ['e-check'], ['e-uncheck']);\n    } else {\n      classList(element, ['e-uncheck'], ['e-check']);\n    }\n  };\n  ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n    var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    cbox.querySelector('.e-label').innerHTML = label;\n    return createCboxWithWrap(uid, cbox, 'e-ccheck');\n  };\n  ColumnChooser.prototype.renderCheckbox = function (column) {\n    var cclist;\n    var hideColState;\n    var showColState;\n    if (column.showInColumnChooser) {\n      cclist = this.parent.createElement('li', {\n        className: 'e-cclist e-cc',\n        styles: 'list-style:None',\n        id: 'e-ccli_' + column.uid\n      });\n      hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n      showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n      var cccheckboxlist = this.createCheckBox(column.headerText, column.visible && !hideColState || showColState, column.uid);\n      cclist.appendChild(cccheckboxlist);\n      this.ulElement.appendChild(cclist);\n    }\n    if (this.isInitialOpen) {\n      this.updateIntermediateBtn();\n    }\n  };\n  ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n    this.addcancelIcon();\n    this.searchValue = e.target.value;\n    this.stopTimer();\n    this.startTimer(e);\n  };\n  ColumnChooser.prototype.startTimer = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n    this.timer = window.setInterval(function () {\n      proxy.columnChooserSearch(proxy.searchValue);\n    }, interval);\n  };\n  ColumnChooser.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n  ColumnChooser.prototype.addcancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n  };\n  ColumnChooser.prototype.removeCancelIcon = function () {\n    this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n  };\n  ColumnChooser.prototype.mOpenDlg = function () {\n    if (Browser.isDevice) {\n      this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n      this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n    }\n  };\n  // internally use\n  ColumnChooser.prototype.getModuleName = function () {\n    return 'columnChooser';\n  };\n  ColumnChooser.prototype.hideOpenedDialog = function () {\n    var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n      return dlgEle.classList.contains('e-popup-open');\n    });\n    for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n      if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n        openCC[i].ej2_instances[0].hide();\n      }\n    }\n  };\n  ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n    var args1 = {\n      requestType: 'beforeOpenColumnChooser',\n      element: this.parent.element,\n      columns: this.getColumns(),\n      cancel: false,\n      searchOperator: this.parent.columnChooserSettings.operator\n    };\n    this.parent.trigger(events.beforeOpenColumnChooser, args1);\n    this.searchOperator = args1.searchOperator;\n    return args1;\n  };\n  return ColumnChooser;\n}();\nexport { ColumnChooser };","map":{"version":3,"names":["classList","addClass","removeClass","isNullOrUndefined","Browser","Query","DataManager","EventHandler","closest","events","Dialog","calculateRelativeBasedPosition","createCboxWithWrap","toogleCheckbox","parentsUntil","removeAddCboxClasses","createCheckBox","SearchBox","literals","ColumnChooser","parent","serviceLocator","showColumn","hideColumn","changedColumns","unchangedColumns","isDlgOpen","initialOpenDlg","stateChangeColumns","changedStateColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","hideDialogFunction","hideDialog","bind","addEventListener","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","prototype","destroy","gridElement","element","gridHeader","gridContent","removeEventListener","unWireEvents","dlgObj","isDestroyed","rtlUpdate","slice","call","innerDiv","getElementsByClassName","document","clickHandler","on","uiUpdate","enableAfterRenderEle","initialEnd","render","dataBound","rtlUpdated","keyPressed","keyUpHandler","resetColumns","onResetColumns","remove","off","l10n","getService","renderDlgContent","getShowHideService","e","targetElement","target","contains","visible","parentElement","value","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","hide","clearActions","refreshCheckboxState","detailTemplate","childGrid","targetdlg","renderColumnChooser","x","y","hideOpenedDialog","args","beforeOpenColumnChooserEvent","cancel","dataBind","style","maxHeight","elementVisible","display","isSticky","getHeaderContent","toolbarItem","newpos","getBoundingClientRect","top","height","dlgWidth","width","isDevice","body","position","X","Y","refreshPosition","open","mOpenDlg","left","offsetLeft","clientWidth","show","notify","columnChooserOpened","dialog","addcancelIcon","openColumnChooser","content","renderChooserList","updateIntermediateBtn","beforeOpen","customDialogOpen","beforeClose","customDialogClose","module","getModuleName","enable","action","searchElement","columnChooserManualSearch","getColumns","columns","filter","column","showInColumnChooser","field","undefined","dlgDiv","id","setAttribute","getConstant","appendChild","header","showCloseIcon","closeOnEscape","locale","getElementById","buttons","click","confirmDlgBtnClick","buttonModel","isPrimary","cssClass","clearBtnClick","animationSettings","effect","isStringTemplate","appendTo","wireEvents","mainDiv","searchDiv","ccsearchele","placeholder","ccsearchicon","title","conDiv","searchBoxObj","innerDivContent","refreshCheckboxList","length","changedColumnState","uncheckedLength","ulElement","querySelectorAll","columnStateChange","setVisible","tooltipDestroy","getCurrentViewRecords","emptyRowCell","getVisibleColumns","toString","requestType","resetColumnState","index","colUid","currentCol","getColumnByUid","push","stateColumns","state","columnChooserCancelBtnClick","checkstatecolumn","isChecked","coluid","selectAll","indexOf","splice","searchVal","clearSearch","fltrCol","okButton","buttonEle","selectedCbox","ej2_instances","executeLocal","where","columnChooserSettings","ignoreAccent","innerHTML","disabled","nMatchele","flag","stopTimer","checkBoxClickHandler","searchBox","wireEvent","unWireEvent","checkstate","elem","updateSelectAll","focus","columnUid","getAttribute","i","uid","cnt","children","selected","btn","btnObj","cBoxes","_i","cBoxes_1","cBox","visibleCols","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","selectAllValue","cclist","firstElementChild","checkState","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","cloneNode","hideColState","showColState","styles","cccheckboxlist","headerText","searchValue","startTimer","proxy","interval","keyCode","timer","window","setInterval","clearInterval","openCC","dlgEle","dlgLen","args1","operator","trigger","beforeOpenColumnChooser"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-chooser.js"],"sourcesContent":["import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\nimport * as literals from '../base/string-literals';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.isDlgOpen = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.hideDialogFunction = this.hideDialog.bind(this);\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n        else {\n            removeClass([].slice.call(this.innerDiv.getElementsByClassName('e-checkbox-wrapper')), ['e-rtl']);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialogFunction);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n        this.parent.removeEventListener(events.dataBound, this.hideDialogFunction);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     *\n     * @param {number} x - specifies the position x\n     * @param {number} y - specifies the position y\n     * @param {Element} target - specifies the target\n     * @returns {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var isSticky = this.parent.getHeaderContent().classList.contains('e-sticky');\n            var toolbarItem = closest(target, '.e-toolbar-item');\n            var newpos = void 0;\n            if (isSticky) {\n                newpos = toolbarItem.getBoundingClientRect();\n                this.dlgObj.element.classList.add('e-sticky');\n            }\n            else {\n                this.dlgObj.element.classList.remove('e-sticky');\n                newpos = calculateRelativeBasedPosition(toolbarItem, this.dlgObj.element);\n            }\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     *\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.action === 'escape') {\n            this.hideDialog();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.resetColumnState();\n            return;\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            this.changedStateColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.resetColumnState();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[i].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[i].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.getElementsByClassName('e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        var selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = [].slice.call(this.parent.element.getElementsByClassName('e-cc-chbox'));\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            var uncheck = [].slice.call(element.parentElement.getElementsByClassName('e-uncheck'));\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        if (state) {\n            classList(element, ['e-check'], ['e-uncheck']);\n        }\n        else {\n            classList(element, ['e-uncheck'], ['e-check']);\n        }\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}