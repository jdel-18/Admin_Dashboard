{"ast":null,"code":"import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, select } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren, parentsUntil, addRemoveEventListener } from '../base/util';\nimport { ResponsiveToolbarAction } from '../base/enum';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n *\n * @hidden\n */\nvar Toolbar = /** @class */function () {\n  function Toolbar(parent, serviceLocator) {\n    this.predefinedItems = {};\n    this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search', 'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n  Toolbar.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n    var isAdaptive = this.parent.enableAdaptiveUI;\n    var excludingItems = ['Edit', 'Delete', 'Update', 'Cancel'];\n    for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n      var item = preItems_1[_i];\n      var itemStr = item.toLowerCase();\n      var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n      this.predefinedItems[item] = {\n        id: this.gridID + '_' + itemStr,\n        prefixIcon: 'e-' + itemStr,\n        text: this.l10n.getConstant(localeName),\n        tooltipText: this.l10n.getConstant(localeName)\n      };\n      if (isAdaptive) {\n        this.predefinedItems[item].text = '';\n        this.predefinedItems[item].visible = excludingItems.indexOf(item) === -1;\n      }\n    }\n    this.predefinedItems.Search = {\n      id: this.gridID + '_search',\n      tooltipText: this.l10n.getConstant('Search'),\n      align: 'Right',\n      cssClass: 'e-search-wrapper',\n      type: 'Input'\n    };\n    this.predefinedItems.ColumnChooser = {\n      id: this.gridID + '_' + 'columnchooser',\n      cssClass: 'e-cc e-ccdiv e-cc-toolbar',\n      suffixIcon: 'e-' + 'columnchooser-btn',\n      text: isAdaptive ? '' : this.l10n.getConstant('Columnchooser'),\n      tooltipText: this.l10n.getConstant('Columnchooser'),\n      align: 'Right'\n    };\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n        this.predefinedItems.responsiveFilter = {\n          id: this.gridID + '_' + 'responsivefilter',\n          cssClass: 'e-gridresponsiveicons e-icons',\n          suffixIcon: 'e-' + 'resfilter-icon',\n          tooltipText: this.l10n.getConstant('FilterButton')\n        };\n      }\n      if (this.parent.allowSorting) {\n        this.predefinedItems.responsiveSort = {\n          id: this.gridID + '_' + 'responsivesort',\n          cssClass: 'e-gridresponsiveicons e-icons',\n          suffixIcon: 'e-' + 'ressort-icon',\n          tooltipText: this.l10n.getConstant('Sort')\n        };\n      }\n    }\n    if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n      this.predefinedItems.responsiveBack = {\n        id: this.gridID + '_' + 'responsiveback',\n        cssClass: 'e-gridresponsiveicons e-icons',\n        suffixIcon: 'e-' + 'resback-icon',\n        visible: false\n      };\n    }\n    this.createToolbar();\n  };\n  /**\n   * Gets the toolbar of the Grid.\n   *\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  Toolbar.prototype.getToolbar = function () {\n    return this.toolbar.element;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   */\n  Toolbar.prototype.destroy = function () {\n    if (this.toolbar && !this.toolbar.isDestroyed) {\n      if (!this.toolbar.element) {\n        this.parent.destroyTemplate(['toolbarTemplate']);\n        if (this.parent.isReact) {\n          this.parent.renderTemplates();\n        }\n      } else {\n        this.toolbar.off('render-react-toolbar-template', this.addReactToolbarPortals);\n        this.toolbar.destroy();\n      }\n      this.unWireEvent();\n      this.removeEventListener();\n      if (this.element.parentNode) {\n        remove(this.element);\n      }\n    }\n  };\n  Toolbar.prototype.bindSearchEvents = function () {\n    this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n    this.wireEvent();\n    this.refreshToolbarItems();\n    if (this.parent.searchSettings) {\n      this.updateSearchBox();\n    }\n  };\n  Toolbar.prototype.toolbarCreated = function (isNormal) {\n    if (this.element.querySelector('.e-search-wrapper')) {\n      if (!this.parent.enableAdaptiveUI || isNormal) {\n        this.element.querySelector('.e-search-wrapper').innerHTML = '<div class=\"e-input-group e-search\" role=\"search\">\\\n                    <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n                    placeholder= \"' + this.l10n.getConstant('Search') + '\"/>\\\n                    <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n      } else {\n        this.element.querySelector('.e-search-wrapper').innerHTML = '<span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n      }\n    }\n    this.bindSearchEvents();\n  };\n  Toolbar.prototype.createToolbar = function () {\n    var items = this.getItems();\n    this.toolbar = new tool({\n      items: items,\n      clicked: this.toolbarClickHandler.bind(this),\n      enablePersistence: this.parent.enablePersistence,\n      enableRtl: this.parent.enableRtl,\n      created: this.toolbarCreated.bind(this)\n    });\n    this.toolbar.isReact = this.parent.isReact;\n    this.toolbar.on('render-react-toolbar-template', this.addReactToolbarPortals, this);\n    var isStringTemplate = 'isStringTemplate';\n    this.toolbar[isStringTemplate] = true;\n    var viewStr = 'viewContainerRef';\n    var registerTemp = 'registeredTemplate';\n    if (this.parent[viewStr]) {\n      this.toolbar[registerTemp] = {};\n      this.toolbar[viewStr] = this.parent[viewStr];\n    }\n    this.element = this.parent.createElement('div', {\n      id: this.gridID + '_toolbarItems'\n    });\n    if (this.parent.enableAdaptiveUI) {\n      this.element.classList.add('e-res-toolbar');\n    }\n    if (this.parent.toolbarTemplate) {\n      if (typeof this.parent.toolbarTemplate === 'string') {\n        this.toolbar.appendTo(this.parent.toolbarTemplate);\n        this.element = this.toolbar.element;\n      } else {\n        var isReactCompiler = this.parent.isReact && typeof this.parent.toolbarTemplate !== 'string';\n        var ID = this.parent.element.id + 'toolbarTemplate';\n        if (isReactCompiler) {\n          templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', ID, null, null, this.element);\n          this.parent.renderTemplates();\n        } else {\n          appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n        }\n      }\n    } else {\n      this.toolbar.appendTo(this.element);\n    }\n    this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n  };\n  Toolbar.prototype.addReactToolbarPortals = function (args) {\n    if (this.parent.isReact && args) {\n      this.parent.portals = this.parent.portals.concat(args);\n      this.parent.renderTemplates();\n    }\n  };\n  Toolbar.prototype.renderResponsiveSearch = function (isRender) {\n    if (isRender) {\n      this.toolbarCreated(true);\n      this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isSearch);\n      this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n      var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n      right.classList.add('e-responsive-right');\n      if (this.parent.searchSettings) {\n        this.updateSearchBox();\n      }\n      this.searchBoxObj.searchFocus({\n        target: this.searchElement\n      });\n      this.searchElement.focus();\n    } else {\n      this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n    }\n  };\n  Toolbar.prototype.refreshResponsiveToolbarItems = function (action) {\n    if (action === ResponsiveToolbarAction.isInitial) {\n      var id = this.parent.element.id;\n      var items = [id + '_edit', id + '_delete'];\n      var selectedRecords = this.parent.getSelectedRowIndexes();\n      var excludingItems = [id + '_responsiveback', id + '_update', id + '_cancel'];\n      for (var _i = 0, _a = this.toolbar.items; _i < _a.length; _i++) {\n        var item = _a[_i];\n        var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n        if (toolbarEle) {\n          if (items.indexOf(item.id) > -1) {\n            if (selectedRecords.length) {\n              toolbarEle.parentElement.classList.remove('e-hidden');\n            } else {\n              toolbarEle.parentElement.classList.add('e-hidden');\n            }\n          } else {\n            if (excludingItems.indexOf(item.id) === -1) {\n              toolbarEle.parentElement.classList.remove('e-hidden');\n            } else {\n              toolbarEle.parentElement.classList.add('e-hidden');\n            }\n          }\n        }\n      }\n      if (this.searchElement) {\n        var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n        right.classList.remove('e-responsive-right');\n        this.toolbarCreated(false);\n        this.unWireEvent();\n        this.searchElement = undefined;\n      }\n    }\n    if (action === ResponsiveToolbarAction.isSearch) {\n      var items = [this.parent.element.id + '_responsiveback', this.parent.element.id + '_search'];\n      for (var _b = 0, _c = this.toolbar.items; _b < _c.length; _b++) {\n        var item = _c[_b];\n        var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n        if (toolbarEle) {\n          if (items.indexOf(item.id) > -1) {\n            toolbarEle.parentElement.classList.remove('e-hidden');\n          } else {\n            toolbarEle.parentElement.classList.add('e-hidden');\n          }\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Toolbar.prototype.refreshToolbarItems = function (args) {\n    var gObj = this.parent;\n    var enableItems = [];\n    var disableItems = [];\n    var edit = gObj.editSettings;\n    var hasData = gObj.currentViewData && gObj.currentViewData.length;\n    if (edit.allowAdding) {\n      enableItems.push(this.gridID + '_add');\n    } else {\n      disableItems.push(this.gridID + '_add');\n    }\n    if (edit.allowEditing && hasData) {\n      enableItems.push(this.gridID + '_edit');\n    } else {\n      disableItems.push(this.gridID + '_edit');\n    }\n    if (edit.allowDeleting && hasData) {\n      enableItems.push(this.gridID + '_delete');\n    } else {\n      disableItems.push(this.gridID + '_delete');\n    }\n    if (gObj.editSettings.mode === 'Batch') {\n      if (gObj.element.getElementsByClassName('e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n        enableItems.push(this.gridID + '_update');\n        enableItems.push(this.gridID + '_cancel');\n      } else {\n        disableItems.push(this.gridID + '_update');\n        disableItems.push(this.gridID + '_cancel');\n      }\n    } else {\n      if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n        enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n        disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n      } else {\n        disableItems.push(this.gridID + '_update');\n        disableItems.push(this.gridID + '_cancel');\n      }\n    }\n    this.enableItems(enableItems, true);\n    this.enableItems(disableItems, false);\n  };\n  Toolbar.prototype.getItems = function () {\n    var items = [];\n    var toolbarItems = this.parent.toolbar || [];\n    if (typeof this.parent.toolbar === 'string') {\n      return [];\n    }\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n        items.push(this.getItemObject('responsiveFilter'));\n      }\n      if (this.parent.allowSorting) {\n        items.push(this.getItemObject('responsiveSort'));\n      }\n    }\n    for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n      var item = toolbarItems_1[_i];\n      switch (typeof item) {\n        case 'number':\n          items.push(this.getItemObject(this.items[item]));\n          break;\n        case 'string':\n          items.push(this.getItemObject(item));\n          break;\n        default:\n          items.push(this.getItem(item));\n      }\n    }\n    if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n      items.push(this.getItemObject('responsiveBack'));\n    }\n    return items;\n  };\n  Toolbar.prototype.getItem = function (itemObject) {\n    var item = this.predefinedItems[itemObject.text];\n    return item ? extend(item, item, itemObject) : itemObject;\n  };\n  Toolbar.prototype.getItemObject = function (itemName) {\n    return this.predefinedItems[itemName] || {\n      text: itemName,\n      id: this.gridID + '_' + itemName\n    };\n  };\n  /**\n   * Enables or disables ToolBar items.\n   *\n   * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n   * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n   * @returns {void}\n   * @hidden\n   */\n  Toolbar.prototype.enableItems = function (items, isEnable) {\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var item = items_1[_i];\n      var element = select('#' + item, this.element);\n      if (element) {\n        this.toolbar.enableItems(element.parentElement, isEnable);\n      }\n    }\n  };\n  Toolbar.prototype.toolbarClickHandler = function (args) {\n    var _this = this;\n    var gObj = this.parent;\n    var gID = this.gridID;\n    extend(args, {\n      cancel: false\n    });\n    var newArgs = args;\n    var originalEvent = args.originalEvent;\n    gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n      toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n      if (!toolbarargs.cancel) {\n        switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n          case gID + '_print':\n            gObj.print();\n            break;\n          case gID + '_edit':\n            gObj.startEdit();\n            break;\n          case gID + '_update':\n            gObj.endEdit();\n            break;\n          case gID + '_cancel':\n            gObj.closeEdit();\n            break;\n          case gID + '_add':\n            gObj.addRecord();\n            break;\n          case gID + '_delete':\n            gObj.deleteRecord();\n            break;\n          case gID + '_search':\n            if (toolbarargs.originalEvent.target.id === gID + '_searchbutton' && _this.searchElement) {\n              _this.search();\n            } else if (gObj.enableAdaptiveUI && !_this.searchElement && (toolbarargs.originalEvent.target.classList.contains('e-search-wrapper') || toolbarargs.originalEvent.target.id === gID + '_searchbutton')) {\n              _this.renderResponsiveSearch(true);\n            }\n            break;\n          case gID + '_columnchooser':\n            /* eslint-disable */\n            var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n            var y = tarElement.getBoundingClientRect().top;\n            var x = tarElement.getBoundingClientRect().left;\n            var targetEle = toolbarargs.originalEvent.target;\n            /* eslint-enable */\n            y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n            gObj.createColumnchooser(x, y, targetEle);\n            break;\n          case gID + '_responsivefilter':\n            gObj.showResponsiveCustomFilter();\n            break;\n          case gID + '_responsivesort':\n            gObj.showResponsiveCustomSort();\n            break;\n          case gID + '_responsiveback':\n            _this.renderResponsiveSearch(false);\n            break;\n        }\n      }\n    });\n  };\n  Toolbar.prototype.modelChanged = function (e) {\n    if (e.module === 'edit') {\n      this.refreshToolbarItems();\n    }\n  };\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n      return;\n    }\n    if (this.element) {\n      remove(this.element);\n    }\n    this.render();\n  };\n  Toolbar.prototype.keyUpHandler = function (e) {\n    if (e.keyCode === 13) {\n      this.search();\n    }\n  };\n  Toolbar.prototype.search = function () {\n    this.parent.search(this.searchElement.value);\n  };\n  Toolbar.prototype.updateSearchBox = function () {\n    if (this.searchElement) {\n      this.searchElement.value = this.parent.searchSettings.key;\n    }\n  };\n  Toolbar.prototype.wireEvent = function () {\n    if (this.searchElement) {\n      this.searchBoxObj = new SearchBox(this.searchElement);\n      EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n      this.searchBoxObj.wireEvent();\n    }\n  };\n  Toolbar.prototype.unWireEvent = function () {\n    if (this.searchElement) {\n      EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n      this.searchBoxObj.unWireEvent();\n    }\n  };\n  Toolbar.prototype.reRenderToolbar = function () {\n    if (this.element) {\n      remove(this.element);\n    }\n    this.render();\n  };\n  Toolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.evtHandlers = [{\n      event: events.setFullScreenDialog,\n      handler: this.reRenderToolbar\n    }, {\n      event: events.initialEnd,\n      handler: this.render\n    }, {\n      event: events.uiUpdate,\n      handler: this.onPropertyChanged\n    }, {\n      event: events.inBoundModelChanged,\n      handler: this.updateSearchBox.bind(this)\n    }, {\n      event: events.modelChanged,\n      handler: this.refreshToolbarItems\n    }, {\n      event: events.toolbarRefresh,\n      handler: this.refreshToolbarItems\n    }, {\n      event: events.inBoundModelChanged,\n      handler: this.modelChanged\n    }, {\n      event: events.dataBound,\n      handler: this.refreshToolbarItems\n    }, {\n      event: events.click,\n      handler: this.removeResponsiveSearch\n    }, {\n      event: events.rowModeChange,\n      handler: this.reRenderToolbar\n    }, {\n      event: events.destroy,\n      handler: this.destroy\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    this.rowSelectedFunction = this.rowSelected.bind(this);\n    this.rowDeSelectedFunction = this.rowSelected.bind(this);\n    this.parent.addEventListener(events.rowSelected, this.rowSelectedFunction);\n    this.parent.addEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n  };\n  Toolbar.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n    this.parent.removeEventListener(events.rowSelected, this.rowSelectedFunction);\n    this.parent.removeEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n  };\n  Toolbar.prototype.removeResponsiveSearch = function (e) {\n    var target = e.target;\n    var isSearch = target.classList.contains('e-search-icon') || target.classList.contains('e-search-wrapper');\n    if (this.parent.enableAdaptiveUI && !isSearch && this.searchElement && !parentsUntil(e.target, 'e-res-toolbar')) {\n      this.renderResponsiveSearch(false);\n    }\n  };\n  Toolbar.prototype.rowSelected = function () {\n    if (this.parent.enableAdaptiveUI) {\n      this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   */\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n  return Toolbar;\n}();\nexport { Toolbar };","map":{"version":3,"names":["EventHandler","extend","isNullOrUndefined","remove","select","Toolbar","tool","events","templateCompiler","appendChildren","parentsUntil","addRemoveEventListener","ResponsiveToolbarAction","SearchBox","parent","serviceLocator","predefinedItems","items","gridID","element","id","addEventListener","prototype","render","l10n","getService","preItems","isAdaptive","enableAdaptiveUI","excludingItems","_i","preItems_1","length","item","itemStr","toLowerCase","localeName","toUpperCase","slice","prefixIcon","text","getConstant","tooltipText","visible","indexOf","Search","align","cssClass","type","ColumnChooser","suffixIcon","rowRenderingMode","allowFiltering","filterSettings","responsiveFilter","allowSorting","responsiveSort","toolbar","responsiveBack","createToolbar","getToolbar","destroy","isDestroyed","destroyTemplate","isReact","renderTemplates","off","addReactToolbarPortals","unWireEvent","removeEventListener","parentNode","bindSearchEvents","searchElement","wireEvent","refreshToolbarItems","searchSettings","updateSearchBox","toolbarCreated","isNormal","querySelector","innerHTML","getItems","clicked","toolbarClickHandler","bind","enablePersistence","enableRtl","created","on","isStringTemplate","viewStr","registerTemp","createElement","classList","add","toolbarTemplate","appendTo","isReactCompiler","ID","insertBefore","getHeaderContent","args","portals","concat","renderResponsiveSearch","isRender","refreshResponsiveToolbarItems","isSearch","right","searchBoxObj","searchFocus","target","focus","isInitial","action","selectedRecords","getSelectedRowIndexes","_a","toolbarEle","parentElement","undefined","_b","_c","gObj","enableItems","disableItems","edit","editSettings","hasData","currentViewData","allowAdding","push","allowEditing","allowDeleting","mode","getElementsByClassName","isEdit","toolbarItems","getItemObject","toolbarItems_1","getItem","itemObject","itemName","isEnable","items_1","_this","gID","cancel","newArgs","originalEvent","trigger","toolbarClick","toolbarargs","print","startEdit","endEdit","closeEdit","addRecord","deleteRecord","search","contains","tarElement","y","getBoundingClientRect","top","x","left","targetEle","offsetTop","createColumnchooser","showResponsiveCustomFilter","showResponsiveCustomSort","modelChanged","e","module","onPropertyChanged","getModuleName","keyUpHandler","keyCode","value","key","reRenderToolbar","evtHandlers","event","setFullScreenDialog","handler","initialEnd","uiUpdate","inBoundModelChanged","toolbarRefresh","dataBound","click","removeResponsiveSearch","rowModeChange","rowSelectedFunction","rowSelected","rowDeSelectedFunction","rowDeselected"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/actions/toolbar.js"],"sourcesContent":["import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, select } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren, parentsUntil, addRemoveEventListener } from '../base/util';\nimport { ResponsiveToolbarAction } from '../base/enum';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n *\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        var isAdaptive = this.parent.enableAdaptiveUI;\n        var excludingItems = ['Edit', 'Delete', 'Update', 'Cancel'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n            if (isAdaptive) {\n                this.predefinedItems[item].text = '';\n                this.predefinedItems[item].visible = excludingItems.indexOf(item) === -1;\n            }\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper',\n            type: 'Input'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: isAdaptive ? '' : this.l10n.getConstant('Columnchooser'),\n            tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right'\n        };\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                this.predefinedItems.responsiveFilter = {\n                    id: this.gridID + '_' + 'responsivefilter', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'resfilter-icon', tooltipText: this.l10n.getConstant('FilterButton')\n                };\n            }\n            if (this.parent.allowSorting) {\n                this.predefinedItems.responsiveSort = {\n                    id: this.gridID + '_' + 'responsivesort', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'ressort-icon', tooltipText: this.l10n.getConstant('Sort')\n                };\n            }\n        }\n        if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n            this.predefinedItems.responsiveBack = {\n                id: this.gridID + '_' + 'responsiveback', cssClass: 'e-gridresponsiveicons e-icons',\n                suffixIcon: 'e-' + 'resback-icon', visible: false\n            };\n        }\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n                if (this.parent.isReact) {\n                    this.parent.renderTemplates();\n                }\n            }\n            else {\n                this.toolbar.off('render-react-toolbar-template', this.addReactToolbarPortals);\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            if (this.element.parentNode) {\n                remove(this.element);\n            }\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.toolbarCreated = function (isNormal) {\n        if (this.element.querySelector('.e-search-wrapper')) {\n            if (!this.parent.enableAdaptiveUI || isNormal) {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<div class=\"e-input-group e-search\" role=\"search\">\\\n                    <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n                    placeholder= \"' + this.l10n.getConstant('Search') + '\"/>\\\n                    <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n            else {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<span id=\"' + this.gridID\n                    + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n        }\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.toolbarCreated.bind(this)\n        });\n        this.toolbar.isReact = this.parent.isReact;\n        this.toolbar.on('render-react-toolbar-template', this.addReactToolbarPortals, this);\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.enableAdaptiveUI) {\n            this.element.classList.add('e-res-toolbar');\n        }\n        if (this.parent.toolbarTemplate) {\n            if (typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                var isReactCompiler = this.parent.isReact && typeof (this.parent.toolbarTemplate) !== 'string';\n                var ID = this.parent.element.id + 'toolbarTemplate';\n                if (isReactCompiler) {\n                    templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', ID, null, null, this.element);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n    };\n    Toolbar.prototype.addReactToolbarPortals = function (args) {\n        if (this.parent.isReact && args) {\n            this.parent.portals = this.parent.portals.concat(args);\n            this.parent.renderTemplates();\n        }\n    };\n    Toolbar.prototype.renderResponsiveSearch = function (isRender) {\n        if (isRender) {\n            this.toolbarCreated(true);\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isSearch);\n            this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n            var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n            right.classList.add('e-responsive-right');\n            if (this.parent.searchSettings) {\n                this.updateSearchBox();\n            }\n            this.searchBoxObj.searchFocus({ target: this.searchElement });\n            this.searchElement.focus();\n        }\n        else {\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n        }\n    };\n    Toolbar.prototype.refreshResponsiveToolbarItems = function (action) {\n        if (action === ResponsiveToolbarAction.isInitial) {\n            var id = this.parent.element.id;\n            var items = [id + '_edit', id + '_delete'];\n            var selectedRecords = this.parent.getSelectedRowIndexes();\n            var excludingItems = [id + '_responsiveback', id + '_update', id + '_cancel'];\n            for (var _i = 0, _a = this.toolbar.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n                if (toolbarEle) {\n                    if (items.indexOf(item.id) > -1) {\n                        if (selectedRecords.length) {\n                            toolbarEle.parentElement.classList.remove('e-hidden');\n                        }\n                        else {\n                            toolbarEle.parentElement.classList.add('e-hidden');\n                        }\n                    }\n                    else {\n                        if (excludingItems.indexOf(item.id) === -1) {\n                            toolbarEle.parentElement.classList.remove('e-hidden');\n                        }\n                        else {\n                            toolbarEle.parentElement.classList.add('e-hidden');\n                        }\n                    }\n                }\n            }\n            if (this.searchElement) {\n                var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n                right.classList.remove('e-responsive-right');\n                this.toolbarCreated(false);\n                this.unWireEvent();\n                this.searchElement = undefined;\n            }\n        }\n        if (action === ResponsiveToolbarAction.isSearch) {\n            var items = [this.parent.element.id + '_responsiveback', this.parent.element.id + '_search'];\n            for (var _b = 0, _c = this.toolbar.items; _b < _c.length; _b++) {\n                var item = _c[_b];\n                var toolbarEle = this.toolbar.element.querySelector('#' + item.id);\n                if (toolbarEle) {\n                    if (items.indexOf(item.id) > -1) {\n                        toolbarEle.parentElement.classList.remove('e-hidden');\n                    }\n                    else {\n                        toolbarEle.parentElement.classList.add('e-hidden');\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        if (edit.allowAdding) {\n            enableItems.push(this.gridID + '_add');\n        }\n        else {\n            disableItems.push(this.gridID + '_add');\n        }\n        if (edit.allowEditing && hasData) {\n            enableItems.push(this.gridID + '_edit');\n        }\n        else {\n            disableItems.push(this.gridID + '_edit');\n        }\n        if (edit.allowDeleting && hasData) {\n            enableItems.push(this.gridID + '_delete');\n        }\n        else {\n            disableItems.push(this.gridID + '_delete');\n        }\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.getElementsByClassName('e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                items.push(this.getItemObject('responsiveFilter'));\n            }\n            if (this.parent.allowSorting) {\n                items.push(this.getItemObject('responsiveSort'));\n            }\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n            items.push(this.getItemObject('responsiveBack'));\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     *\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = select('#' + item, this.element);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = args;\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton' && _this.searchElement) {\n                            _this.search();\n                        }\n                        else if (gObj.enableAdaptiveUI && !_this.searchElement\n                            && (toolbarargs.originalEvent.target.classList.contains('e-search-wrapper')\n                                || toolbarargs.originalEvent.target.id === gID + '_searchbutton')) {\n                            _this.renderResponsiveSearch(true);\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        /* eslint-disable */\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        /* eslint-enable */\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                    case gID + '_responsivefilter':\n                        gObj.showResponsiveCustomFilter();\n                        break;\n                    case gID + '_responsivesort':\n                        gObj.showResponsiveCustomSort();\n                        break;\n                    case gID + '_responsiveback':\n                        _this.renderResponsiveSearch(false);\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.reRenderToolbar = function () {\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.setFullScreenDialog, handler: this.reRenderToolbar },\n            { event: events.initialEnd, handler: this.render },\n            { event: events.uiUpdate, handler: this.onPropertyChanged },\n            { event: events.inBoundModelChanged, handler: this.updateSearchBox.bind(this) },\n            { event: events.modelChanged, handler: this.refreshToolbarItems },\n            { event: events.toolbarRefresh, handler: this.refreshToolbarItems },\n            { event: events.inBoundModelChanged, handler: this.modelChanged },\n            { event: events.dataBound, handler: this.refreshToolbarItems },\n            { event: events.click, handler: this.removeResponsiveSearch },\n            { event: events.rowModeChange, handler: this.reRenderToolbar },\n            { event: events.destroy, handler: this.destroy }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.rowSelectedFunction = this.rowSelected.bind(this);\n        this.rowDeSelectedFunction = this.rowSelected.bind(this);\n        this.parent.addEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.addEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n        this.parent.removeEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.removeEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeResponsiveSearch = function (e) {\n        var target = e.target;\n        var isSearch = target.classList.contains('e-search-icon') || target.classList.contains('e-search-wrapper');\n        if (this.parent.enableAdaptiveUI && !isSearch && this.searchElement\n            && !parentsUntil(e.target, 'e-res-toolbar')) {\n            this.renderResponsiveSearch(false);\n        }\n    };\n    Toolbar.prototype.rowSelected = function () {\n        if (this.parent.enableAdaptiveUI) {\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}