{"ast":null,"code":"/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates } from '../base/util';\nimport { remove, debounce, Internationalization } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */function () {\n  /**\n   * Constructor for checkbox filtering module\n   *\n   * @param {IXLFilter} parent - specifies the IXLFilter\n   * @hidden\n   */\n  function CheckBoxFilterBase(parent) {\n    this.existingPredicate = {};\n    this.foreignKeyQuery = new Query();\n    /** @hidden */\n    this.filterState = true;\n    this.values = {};\n    this.renderEmpty = false;\n    this.parent = parent;\n    this.id = this.parent.element.id;\n    this.valueFormatter = new ValueFormatter(this.parent.locale);\n    this.cBoxTrue = createCheckBox(this.parent.createElement, false, {\n      checked: true,\n      label: ' '\n    });\n    this.cBoxFalse = createCheckBox(this.parent.createElement, false, {\n      checked: false,\n      label: ' '\n    });\n    this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        type: 'checkbox'\n      }\n    }), this.cBoxTrue.firstChild);\n    this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n      className: 'e-chk-hidden',\n      attrs: {\n        'type': 'checkbox'\n      }\n    }), this.cBoxFalse.firstChild);\n    this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n    if (this.parent.enableRtl) {\n      addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n    }\n  }\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.destroy = function () {\n    this.closeDialog();\n  };\n  CheckBoxFilterBase.prototype.wireEvents = function () {\n    EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n    EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n    this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.add(elem, 'keyup', this.searchHandler, this);\n    }\n  };\n  CheckBoxFilterBase.prototype.unWireEvents = function () {\n    EventHandler.remove(this.dlg, 'click', this.clickHandler);\n    EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n    var elem = this.dialogObj.element.querySelector('.e-searchinput');\n    if (elem) {\n      EventHandler.remove(elem, 'keyup', this.searchHandler);\n    }\n  };\n  CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n    var _this = this;\n    var fPredicate = {};\n    var filterCollection = [];\n    var query = this.foreignKeyQuery.clone();\n    this.options.column.dataSource.executeQuery(query.where(mPredicate)).then(function (e) {\n      _this.options.column.columnData = e.result;\n      _this.parent.notify(events.generateQuery, {\n        predicate: fPredicate,\n        column: _this.options.column\n      });\n      args.ejpredicate = fPredicate.predicate.predicates;\n      var fpred = fPredicate.predicate.predicates;\n      for (var i = 0; i < fpred.length; i++) {\n        filterCollection.push({\n          field: fpred[i].field,\n          predicate: 'or',\n          matchCase: fpred[i].ignoreCase,\n          ignoreAccent: fpred[i].ignoreAccent,\n          operator: fpred[i].operator,\n          value: fpred[i].value,\n          type: _this.options.type\n        });\n      }\n      args.filterCollection = filterCollection.length ? filterCollection : fColl.filter(function (col) {\n        return col.field = _this.options.field;\n      });\n      _this.options.handler(args);\n    });\n  };\n  CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n    var operator = this.options.isRemote ? this.options.column.type === 'string' ? 'contains' : 'equal' : this.options.column.type ? 'contains' : 'equal';\n    var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n    this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n  };\n  CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n    var target = e.target;\n    if (target.classList.contains('e-searchclear')) {\n      this.sInput.value = '';\n      this.refreshCheckboxes();\n      this.updateSearchIcon();\n      this.sInput.focus();\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n    this.refreshCheckboxes();\n    this.updateSearchIcon();\n  };\n  CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n    if (this.sInput.value.length) {\n      classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n    } else {\n      classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n    }\n  };\n  /**\n   * Gets the localized label by locale keyword.\n   *\n   * @param {string} key - Defines localization key\n   * @returns {string} - returns localization label\n   */\n  CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n    return this.localeObj.getConstant(key);\n  };\n  CheckBoxFilterBase.prototype.updateDataSource = function () {\n    var dataSource = this.options.dataSource;\n    var str = 'object';\n    if (!(dataSource instanceof DataManager)) {\n      for (var i = 0; i < dataSource.length; i++) {\n        // eslint-disable-next-line valid-typeof\n        if (typeof dataSource !== str) {\n          var obj = {};\n          obj[this.options.field] = dataSource[i];\n          dataSource[i] = obj;\n        }\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.updateModel = function (options) {\n    this.options = options;\n    this.existingPredicate = options.actualPredicate || {};\n    this.options.dataSource = options.dataSource;\n    this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n    this.updateDataSource();\n    this.options.type = options.type;\n    this.options.format = options.format || '';\n    this.options.ignoreAccent = options.ignoreAccent || false;\n    this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n    this.options.query = options.query || new Query();\n    this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n    this.options.uid = options.column.uid;\n    this.values = {};\n    this.localeObj = options.localeObj;\n    this.isFiltered = options.filteredColumns.length;\n  };\n  CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n    this.dlg = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_excelDlg',\n      attrs: {\n        uid: this.options.column.uid\n      },\n      className: 'e-checkboxfilter e-filter-popup'\n    });\n    this.sBox = this.parent.createElement('div', {\n      className: 'e-searchcontainer'\n    });\n    if (!options.hideSearchbox) {\n      this.sInput = this.parent.createElement('input', {\n        id: this.id + '_SearchBox',\n        className: 'e-searchinput'\n      });\n      this.sIcon = this.parent.createElement('span', {\n        className: 'e-searchclear e-search-icon e-icons e-input-group-icon',\n        attrs: {\n          type: 'text',\n          title: this.getLocalizedLabel('Search')\n        }\n      });\n      this.searchBox = this.parent.createElement('span', {\n        className: 'e-searchbox e-fields'\n      });\n      this.searchBox.appendChild(this.sInput);\n      this.sBox.appendChild(this.searchBox);\n      var inputargs = {\n        element: this.sInput,\n        floatLabelType: 'Never',\n        properties: {\n          placeholder: this.getLocalizedLabel('Search')\n        }\n      };\n      Input.createInput(inputargs, this.parent.createElement);\n      this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n    }\n    this.spinner = this.parent.createElement('div', {\n      className: 'e-spinner'\n    }); //for spinner\n    this.cBox = this.parent.createElement('div', {\n      id: this.id + this.options.type + '_CheckBoxList',\n      className: 'e-checkboxlist e-fields'\n    });\n    this.spinner.appendChild(this.cBox);\n    this.sBox.appendChild(this.spinner);\n    return this.sBox;\n  };\n  CheckBoxFilterBase.prototype.showDialog = function (options) {\n    var args = {\n      requestType: events.filterBeforeOpen,\n      columnName: this.options.field,\n      columnType: this.options.type,\n      cancel: false\n    };\n    var filterModel = 'filterModel';\n    args[filterModel] = this;\n    this.parent.notify(events.cBoxFltrBegin, args);\n    if (args.cancel) {\n      options.cancel = args.cancel;\n      return;\n    }\n    this.dialogObj = new Dialog({\n      visible: false,\n      content: this.sBox,\n      close: this.closeDialog.bind(this),\n      enableRtl: this.parent.enableRtl,\n      width: !isNullOrUndefined(parentsUntil(options.target, 'e-bigger')) || this.parent.element.classList.contains('e-device') ? 260 : 255,\n      target: this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      buttons: [{\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n          cssClass: 'e-primary',\n          isPrimary: true\n        }\n      }, {\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          cssClass: 'e-flat',\n          content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton')\n        }\n      }],\n      created: this.dialogCreated.bind(this),\n      open: this.dialogOpen.bind(this)\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dialogObj[isStringTemplate] = true;\n    this.renderResponsiveFilter(options);\n    this.dlg.setAttribute('aria-label', this.getLocalizedLabel('ExcelFilterDialogARIA'));\n    if (options.isResponsiveFilter) {\n      var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n      responsiveCnt.appendChild(this.dlg);\n    } else {\n      this.parent.element.appendChild(this.dlg);\n    }\n    this.dialogObj.appendTo(this.dlg);\n    this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n    this.dialogObj.show();\n    var content = this.dialogObj.element.querySelector('.e-dlg-content');\n    content.appendChild(this.sBox);\n    this.wireEvents();\n    createSpinner({\n      target: this.spinner\n    }, this.parent.createElement);\n    showSpinner(this.spinner);\n    this.getAllData();\n  };\n  CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n    if (options.isResponsiveFilter) {\n      this.dialogObj.buttons = [{}];\n      this.dialogObj.position = {\n        X: '',\n        Y: ''\n      };\n      this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n      this.dialogObj.width = '100%';\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n    if (this.options.isResponsiveFilter) {\n      this.dialogObj.element.style.left = '0px';\n    } else {\n      if (!Browser.isDevice) {\n        getFilterMenuPostion(this.options.target, this.dialogObj);\n      } else {\n        this.dialogObj.position = {\n          X: 'center',\n          Y: 'center'\n        };\n      }\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.filterDialogCreated, e);\n    }\n  };\n  CheckBoxFilterBase.prototype.openDialog = function (options) {\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n  };\n  CheckBoxFilterBase.prototype.closeDialog = function () {\n    if (this.dialogObj && !this.dialogObj.isDestroyed) {\n      this.isBlanks = false;\n      var filterTemplateCol = this.options.columns.filter(function (col) {\n        return col.getFilterItemTemplate();\n      });\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var registeredTemplate = this.parent.registeredTemplate;\n      if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n        this.parent.destroyTemplate(['filterItemTemplate']);\n      }\n      if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n        clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n      }\n      this.parent.notify(events.filterMenuClose, {\n        field: this.options.field\n      });\n      this.dialogObj.destroy();\n      this.unWireEvents();\n      remove(this.dlg);\n      this.dlg = null;\n      this.parent.notify(events.filterDialogClose, {});\n    }\n  };\n  /**\n   * @param {Column} col - Defines column details\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.clearFilter = function (col) {\n    // eslint-disable-next-line max-len\n    var args = {\n      instance: this,\n      handler: this.clearFilter,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, args);\n    if (args.cancel) {\n      return;\n    }\n    this.options.handler({\n      action: 'clear-filter',\n      field: col ? col.field : this.options.field\n    });\n  };\n  CheckBoxFilterBase.prototype.btnClick = function (e) {\n    if (this.filterState) {\n      if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput') || e.keyCode === 13) {\n        this.fltrBtnHandler();\n      } else {\n        var text = e.target.firstChild.textContent.toLowerCase();\n        if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n          this.fltrBtnHandler();\n        } else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n          this.clearFilter();\n        }\n      }\n      this.closeDialog();\n    } else if (!(e.target.tagName.toLowerCase() === 'input')) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n    if (this.options.column.showColumnMenu) {\n      this.parent.notify(events.afterFilterColumnMenuClose, {});\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n    var _this = this;\n    var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n    var check = checked;\n    var optr = 'equal';\n    var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n    if (ddlValue) {\n      this.options.operator = optr = ddlValue.ej2_instances[0].value;\n    }\n    this.isMenuNotEqual = this.options.operator === 'notequal';\n    var searchInput;\n    if (!this.options.hideSearchbox) {\n      searchInput = this.searchBox.querySelector('.e-searchinput');\n    }\n    var caseSen = this.options.allowCaseSensitive;\n    var defaults = {\n      field: this.options.field,\n      predicate: this.isMenuNotEqual ? 'and' : 'or',\n      uid: this.options.uid,\n      operator: optr,\n      type: this.options.type,\n      matchCase: caseSen,\n      ignoreAccent: this.options.ignoreAccent\n    };\n    var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n    if (isNotEqual && searchInput && searchInput.value === '') {\n      optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n      checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n      defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n      defaults.operator = optr;\n    }\n    var value;\n    var val;\n    var length;\n    var fObj;\n    var coll = [];\n    if (checked.length !== this.itemsCnt || searchInput && searchInput.value && searchInput.value !== '') {\n      for (var i = 0; i < checked.length; i++) {\n        value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n        fObj = extend({}, {\n          value: value\n        }, defaults);\n        if (value && !value.toString().length) {\n          fObj.operator = isNotEqual ? 'notequal' : 'equal';\n        }\n        if (value === '' || isNullOrUndefined(value)) {\n          coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n        } else {\n          coll.push(fObj);\n        }\n        var args = {\n          instance: this,\n          handler: this.fltrBtnHandler,\n          arg1: fObj.field,\n          arg2: fObj.predicate,\n          arg3: fObj.operator,\n          arg4: fObj.matchCase,\n          arg5: fObj.ignoreAccent,\n          arg6: fObj.value,\n          cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n          return;\n        }\n      }\n      if (this.options.type === 'date' || this.options.type === 'datetime') {\n        length = check.length - 1;\n        val = this.values[parentsUntil(check[length], 'e-ftrchk').getAttribute('uid')];\n        if (isNullOrUndefined(val) && isNotEqual) {\n          coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase,\n            operator: 'equal',\n            predicate: 'and',\n            value: null\n          });\n        }\n      }\n      this.initiateFilter(coll);\n    } else {\n      var isClearFilter = this.options.filteredColumns.some(function (value) {\n        return _this.options.field === value.field;\n      });\n      if (isClearFilter) {\n        this.clearFilter();\n      }\n    }\n  };\n  // eslint-disable-next-line\n  /** @hidden */\n  CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n    var coll = [];\n    if (defaults.type === 'string') {\n      coll.push({\n        field: defaults.field,\n        ignoreAccent: defaults.ignoreAccent,\n        matchCase: defaults.matchCase,\n        operator: defaults.operator,\n        predicate: defaults.predicate,\n        value: ''\n      });\n    }\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: null\n    });\n    coll.push({\n      field: defaults.field,\n      matchCase: defaults.matchCase,\n      operator: defaults.operator,\n      predicate: defaults.predicate,\n      value: undefined\n    });\n    return coll;\n  };\n  CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n    var firstVal = fColl[0];\n    var predicate;\n    if (!isNullOrUndefined(firstVal)) {\n      predicate = firstVal.ejpredicate ? firstVal.ejpredicate : new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n      for (var j = 1; j < fColl.length; j++) {\n        predicate = fColl[j].ejpredicate !== undefined ? predicate[fColl[j].predicate](fColl[j].ejpredicate) : predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n      }\n      var args = {\n        action: 'filtering',\n        filterCollection: fColl,\n        field: this.options.field,\n        ejpredicate: Predicate.or(predicate)\n      };\n      this.options.handler(args);\n    }\n  };\n  CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n    return col.isForeignColumn ? col.isForeignColumn() : false;\n  };\n  CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n    var _this = this;\n    var val = this.sInput.value;\n    var column = this.options.column;\n    var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n    var foreignQuery = this.options.query.clone();\n    var pred = query.queries.filter(function (e) {\n      return e && e.fn === 'onWhere';\n    })[0];\n    query.queries = [];\n    foreignQuery.queries = [];\n    var parsed = this.options.type !== 'string' && parseFloat(val) ? parseFloat(val) : val;\n    var operator = this.options.isRemote ? this.options.type === 'string' ? 'contains' : 'equal' : this.options.type ? 'contains' : 'equal';\n    var matchCase = true;\n    var ignoreAccent = this.options.ignoreAccent;\n    var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n    parsed = parsed === '' || parsed === undefined ? undefined : parsed;\n    var coll = [];\n    var defaults = {\n      field: field,\n      predicate: 'or',\n      uid: this.options.uid,\n      operator: 'equal',\n      type: this.options.type,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent\n    };\n    var predicte;\n    var moduleName = this.options.dataManager.adaptor.getModuleName;\n    if (this.options.type === 'boolean') {\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n        parsed = 'false';\n      }\n      if (parsed !== undefined && this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? true : 'true';\n      } else if (parsed !== undefined && this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n        // eslint-disable-next-line no-constant-condition\n        parsed = moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor' ? false : 'false';\n      }\n      operator = 'equal';\n    }\n    if ((this.options.type === 'date' || this.options.type === 'datetime') && this.options.format) {\n      var intl = new Internationalization();\n      var format = typeof this.options.format === 'string' ? this.options.format : this.options.format.format;\n      if (format) {\n        parsed = intl.parseDate(val, {\n          format: format\n        }) || new Date(val);\n      } else {\n        parsed = new Date(val);\n      }\n    }\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterSearchBegin,\n      filterModel: this,\n      columnName: field,\n      column: column,\n      operator: operator,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      filterChoiceCount: null,\n      query: query,\n      value: parsed\n    };\n    this.parent.trigger(events.actionBegin, args, function (filterargs) {\n      // eslint-disable-next-line no-self-assign\n      filterargs.operator = filterargs.operator;\n      predicte = new Predicate(field, filterargs.operator, parsed, filterargs.matchCase, filterargs.ignoreAccent);\n      if (_this.options.type === 'date' || _this.options.type === 'datetime') {\n        operator = 'equal';\n        var filterObj = {\n          field: field,\n          operator: operator,\n          value: parsed,\n          matchCase: matchCase,\n          ignoreAccent: ignoreAccent\n        };\n        if (!isNullOrUndefined(parsed)) {\n          predicte = getDatePredicate(filterObj, _this.options.type);\n        }\n      }\n      if (val && typeof val === 'string' && _this.isBlanks && _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n        coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n        var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n        emptyValPredicte.predicates.push(predicte);\n        query.where(emptyValPredicte);\n      } else if (val.length) {\n        predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n        query.where(predicte);\n      } else if (!isNullOrUndefined(pred)) {\n        query.where(pred.e);\n      }\n      filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n      var fPredicate = {};\n      showSpinner(_this.spinner);\n      _this.renderEmpty = false;\n      if (_this.isForeignColumn(column) && val.length) {\n        var colData = 'result' in column.dataSource ? new DataManager(column.dataSource.result) : column.dataSource;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        colData.executeQuery(query).then(function (e) {\n          var columnData = _this.options.column.columnData;\n          _this.options.column.columnData = e.result;\n          _this.parent.notify(events.generateQuery, {\n            predicate: fPredicate,\n            column: column\n          });\n          if (fPredicate.predicate.predicates.length) {\n            foreignQuery.where(fPredicate.predicate);\n          } else {\n            _this.renderEmpty = true;\n          }\n          _this.options.column.columnData = columnData;\n          foreignQuery.take(filterargs.filterChoiceCount);\n          _this.search(filterargs, foreignQuery);\n        });\n      } else {\n        query.take(filterargs.filterChoiceCount);\n        _this.search(filterargs, query);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.search = function (args, query) {\n    if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n      this.filterEvent(args, query);\n    } else {\n      this.processSearch(query);\n    }\n  };\n  CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns) {\n    var predicates = CheckBoxFilterBase.getPredicate(columns);\n    var predicateList = [];\n    var fPredicate = {};\n    var isGrid = this.parent.getForeignKeyColumns !== undefined;\n    var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n    for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      var col = void 0;\n      if (isGrid && this.parent.getColumnByField(prop).isForeignColumn()) {\n        col = getColumnByForeignKeyValue(prop, foreignColumn);\n      }\n      if (col) {\n        this.parent.notify(events.generateQuery, {\n          predicate: fPredicate,\n          column: col\n        });\n        if (fPredicate.predicate.predicates.length) {\n          predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n        }\n      } else {\n        predicateList.push(predicates[prop]);\n      }\n    }\n    return predicateList.length && Predicate.and(predicateList);\n  };\n  CheckBoxFilterBase.prototype.getQuery = function () {\n    return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n  };\n  CheckBoxFilterBase.prototype.getAllData = function () {\n    var _this = this;\n    var query = this.getQuery();\n    query.requiresCount(); //consider take query\n    this.addDistinct(query);\n    var args = {\n      requestType: events.filterChoiceRequest,\n      query: query,\n      filterChoiceCount: null\n    };\n    var filterModel = 'filterModel';\n    args[filterModel] = this;\n    this.parent.trigger(events.actionBegin, args, function (args) {\n      args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n      query.take(args.filterChoiceCount);\n      if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n        _this.filterEvent(args, query);\n      } else {\n        _this.processDataOperation(query, true);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.addDistinct = function (query) {\n    var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n    if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n      filteredColumn = filteredColumn.concat(this.options.column.field);\n    }\n    query.distinct(filteredColumn);\n    return query;\n  };\n  CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n    var _this = this;\n    var defObj = eventPromise(args, query);\n    this.parent.trigger(events.dataStateChange, defObj.state);\n    var def = defObj.deffered;\n    def.promise.then(function (e) {\n      _this.dataSuccess(e);\n    });\n  };\n  CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n    var _this = this;\n    this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);\n    var allPromise = [];\n    var runArray = [];\n    if (this.isForeignColumn(this.options.column) && isInitial) {\n      var colData = 'result' in this.options.column.dataSource ? new DataManager(this.options.column.dataSource.result) : this.options.column.dataSource;\n      this.foreignKeyQuery.params = query.params;\n      allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n      runArray.push(function (data) {\n        return _this.foreignKeyData = data;\n      });\n    }\n    allPromise.push(this.options.dataSource.executeQuery(query));\n    runArray.push(this.dataSuccess.bind(this));\n    var i = 0;\n    Promise.all(allPromise).then(function (e) {\n      for (var j = 0; j < e.length; j++) {\n        runArray[i++](e[j].result);\n      }\n    });\n  };\n  CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n    this.fullData = e;\n    var args1 = {\n      dataSource: this.fullData,\n      executeQuery: true,\n      field: this.options.field\n    };\n    this.parent.notify(events.beforeCheckboxRenderer, args1);\n    if (args1.executeQuery) {\n      var query = new Query();\n      if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) {\n          return f.field;\n        });\n        query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n      }\n      if (this.options.filteredColumns.length) {\n        var cols = [];\n        for (var i = 0; i < this.options.filteredColumns.length; i++) {\n          var filterColumn = this.options.filteredColumns[i];\n          if (this.options.uid) {\n            filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n            if (filterColumn.uid !== this.options.uid) {\n              cols.push(this.options.filteredColumns[i]);\n            }\n          } else {\n            if (filterColumn.field !== this.options.field) {\n              cols.push(this.options.filteredColumns[i]);\n            }\n          }\n        }\n        var predicate = this.getPredicateFromCols(cols);\n        if (predicate) {\n          query.where(predicate);\n        }\n      }\n      // query.select(this.options.field);\n      var result = new DataManager(args1.dataSource).executeLocal(query);\n      var col = this.options.column;\n      this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n    }\n    var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n    this.processDataSource(null, true, data, args1);\n    if (this.sInput) {\n      this.sInput.focus();\n    }\n    var args = {\n      requestType: events.filterAfterOpen,\n      columnName: this.options.field,\n      columnType: this.options.type\n    };\n    var filterModel = 'filterModel';\n    args[filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n  };\n  CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n    showSpinner(this.spinner);\n    // query = query ? query : this.options.query.clone();\n    // query.requiresCount();\n    // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n    // let res: { result: Object[] } = result as { result: Object[] };\n    this.updateResult();\n    this.createFilterItems(dataSource, isInitial, args);\n  };\n  CheckBoxFilterBase.prototype.processSearch = function (query) {\n    this.processDataOperation(query);\n  };\n  CheckBoxFilterBase.prototype.updateResult = function () {\n    this.result = {};\n    var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n    var query = new Query();\n    if (predicate) {\n      query.where(predicate);\n    }\n    this.parent.notify(events.beforeCheckboxRendererQuery, {\n      query: query\n    });\n    var result = new DataManager(this.fullData).executeLocal(query);\n    for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n      var res = result_1[_i];\n      this.result[getObject(this.options.field, res)] = true;\n    }\n  };\n  CheckBoxFilterBase.prototype.clickHandler = function (e) {\n    var target = e.target;\n    var elem = parentsUntil(target, 'e-checkbox-wrapper');\n    if (parentsUntil(target, 'e-searchbox')) {\n      this.searchBoxClick(e);\n    }\n    if (elem) {\n      var selectAll = elem.querySelector('.e-selectall');\n      if (selectAll) {\n        this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n      } else {\n        toogleCheckbox(elem.parentElement);\n      }\n      this.updateIndeterminatenBtn();\n      elem.querySelector('.e-chk-hidden').focus();\n    }\n    this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n  };\n  CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n    this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n  };\n  CheckBoxFilterBase.prototype.setFocus = function (elem) {\n    var prevElem = this.dlg.querySelector('.e-chkfocus');\n    if (prevElem) {\n      prevElem.classList.remove('e-chkfocus');\n    }\n    if (elem) {\n      elem.classList.add('e-chkfocus');\n    }\n  };\n  CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n    var cBoxes = [].slice.call(this.cBox.getElementsByClassName('e-frame'));\n    for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n      var cBox = cBoxes_1[_i];\n      removeAddCboxClasses(cBox, checked);\n      setChecked(cBox.previousSibling, checked);\n    }\n  };\n  CheckBoxFilterBase.prototype.dialogOpen = function () {\n    if (this.parent.element.classList.contains('e-device')) {\n      this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n      if (!this.options.isResponsiveFilter) {\n        this.dialogObj.element.querySelector('.e-btn').focus();\n      }\n    }\n  };\n  CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n    var elem = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n    setChecked(elem.querySelector('input'), checked);\n    var label = elem.querySelector('.e-label');\n    var dummyData = extendObjWithFn({}, data, {\n      column: this.options.column,\n      parent: this.parent\n    });\n    label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value : this.getLocalizedLabel('Blanks');\n    if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n      this.isBlanks = true;\n    }\n    if (typeof value === 'boolean') {\n      label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n    }\n    addClass([label], ['e-checkboxfiltertext']);\n    if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')) {\n      label.innerHTML = '';\n      var isReactCompiler = this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== 'string';\n      if (isReactCompiler) {\n        this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n        this.parent.renderTemplates();\n      } else {\n        appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n      }\n    }\n    return elem;\n  };\n  CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n    var cnt = this.cBox.children.length - 1;\n    var className = [];\n    var disabled = false;\n    var elem = this.cBox.querySelector('.e-selectall');\n    var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n    var btn;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n      btn.disabled = false;\n    }\n    var input = elem.previousSibling;\n    setChecked(input, false);\n    input.indeterminate = false;\n    if (cnt === selected) {\n      className = ['e-check'];\n      setChecked(input, true);\n    } else if (selected) {\n      className = ['e-stop'];\n      input.indeterminate = true;\n    } else {\n      className = ['e-uncheck'];\n      disabled = true;\n      if (btn) {\n        btn.disabled = true;\n      }\n    }\n    if (btn) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    addClass([elem], className);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n  };\n  CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n    var _a;\n    var cBoxes = this.parent.createElement('div');\n    var btn;\n    var disabled = false;\n    if (!this.options.isResponsiveFilter) {\n      btn = this.dialogObj.btnObj[0];\n    }\n    var nullCounter = -1;\n    var key = 'ejValue';\n    if (!args1.executeQuery) {\n      key = args1.field;\n    }\n    for (var i = 0; i < data.length; i++) {\n      var val = getValue(key, data[i]);\n      if (val === '' || isNullOrUndefined(val)) {\n        nullCounter = nullCounter + 1;\n      }\n    }\n    this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n    if (data.length && !this.renderEmpty) {\n      var selectAllValue = this.getLocalizedLabel('SelectAll');\n      var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n      if (innerDiv) {\n        innerDiv.classList.remove('e-checkfltrnmdiv');\n      }\n      var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n      var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n      selectAll.querySelector('.e-frame').classList.add('e-selectall');\n      cBoxes.appendChild(selectAll);\n      var predicate = new Predicate('field', 'equal', this.options.field);\n      if (this.options.foreignKeyValue) {\n        predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n      }\n      var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n      var isRndere = void 0;\n      for (var i = 0; i < data.length; i++) {\n        var uid = getUid('cbox');\n        this.values[uid] = getValue(key, data[i]);\n        var value = getValue(this.options.field, data[i]);\n        if (this.options.formatFn) {\n          value = this.valueFormatter.toView(value, this.options.formatFn);\n        }\n        var args_1 = {\n          value: value,\n          column: this.options.column,\n          data: data[i]\n        };\n        this.parent.notify(events.filterCboxValue, args_1);\n        value = args_1.value;\n        if (value === '' || isNullOrUndefined(value)) {\n          if (isRndere) {\n            continue;\n          }\n          isRndere = true;\n        }\n        var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n        cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n      }\n      this.cBox.innerHTML = '';\n      appendChildren(this.cBox, [].slice.call(cBoxes.children));\n      this.updateIndeterminatenBtn();\n      if (btn) {\n        btn.disabled = false;\n      }\n      disabled = false;\n    } else {\n      cBoxes.appendChild(this.parent.createElement('span', {\n        innerHTML: this.getLocalizedLabel('NoResult')\n      }));\n      this.cBox.innerHTML = '';\n      this.cBox.appendChild(this.parent.createElement('div', {\n        className: 'e-checkfltrnmdiv'\n      }));\n      appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n      if (btn) {\n        btn.disabled = true;\n      }\n      disabled = true;\n    }\n    if (btn) {\n      this.filterState = !btn.disabled;\n      btn.dataBind();\n    }\n    var args = {\n      requestType: events.filterChoiceRequest,\n      dataSource: this.renderEmpty ? [] : data\n    };\n    var filterModel = 'filterModel';\n    args[filterModel] = this;\n    this.parent.notify(events.cBoxFltrComplete, args);\n    this.parent.notify(events.refreshCustomFilterOkBtn, {\n      disabled: disabled\n    });\n    hideSpinner(this.spinner);\n  };\n  CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n    if (!this.isFiltered || !isColFiltered) {\n      return true;\n    } else {\n      var checkState = this.result[value];\n      return this.options.operator === 'notequal' ? !checkState : checkState;\n    }\n  };\n  CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData) {\n    var len = json.length;\n    var result = [];\n    var value;\n    var ejValue = 'ejValue';\n    var lookup = {};\n    var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n    while (len--) {\n      value = json[len];\n      value = getObject(field, value); //local remote diff, check with mdu\n      if (!(value in lookup)) {\n        var obj = {};\n        obj[ejValue] = value;\n        lookup[value] = true;\n        if (isForeignKey) {\n          var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n          setValue(events.foreignKeyData, foreignDataObj, json[len]);\n          value = getValue(column.foreignKeyValue, foreignDataObj);\n        }\n        setValue(field, isNullOrUndefined(value) ? null : value, obj);\n        setValue('dataObj', json[len], obj);\n        result.push(obj);\n      }\n    }\n    return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n  };\n  CheckBoxFilterBase.getPredicate = function (columns) {\n    var cols = DataUtil.distinct(columns, 'field', true) || [];\n    var collection = [];\n    var pred = {};\n    for (var i = 0; i < cols.length; i++) {\n      collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n      if (collection.length !== 0) {\n        pred[cols[i].field] = CheckBoxFilterBase.generatePredicate(collection);\n      }\n    }\n    return pred;\n  };\n  CheckBoxFilterBase.generatePredicate = function (cols) {\n    var len = cols ? cols.length : 0;\n    var predicate;\n    var operate = 'or';\n    var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n    first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n    if (first.type === 'date' || first.type === 'datetime') {\n      predicate = getDatePredicate(first, first.type);\n    } else {\n      predicate = first.ejpredicate ? first.ejpredicate : new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n    }\n    for (var p = 1; p < len; p++) {\n      cols[p] = CheckBoxFilterBase.updateDateFilter(cols[p]);\n      if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n          predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n        } else {\n          predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent));\n        }\n      } else {\n        if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n          if (cols[p].predicate === 'and' && cols[p].operator === 'equal') {\n            predicate = predicate[operate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n          } else {\n            predicate = predicate[cols[p].predicate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n          }\n        } else {\n          predicate = cols[p].ejpredicate ? predicate[cols[p].predicate](cols[p].ejpredicate) : predicate[cols[p].predicate](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent);\n        }\n      }\n    }\n    return predicate || null;\n  };\n  CheckBoxFilterBase.getCaseValue = function (filter) {\n    if (isNullOrUndefined(filter.matchCase)) {\n      if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof filter.value === 'string') {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return filter.matchCase;\n    }\n  };\n  CheckBoxFilterBase.updateDateFilter = function (filter) {\n    if (filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date) {\n      filter.type = filter.type || 'date';\n    }\n    return filter;\n  };\n  return CheckBoxFilterBase;\n}();\nexport { CheckBoxFilterBase };","map":{"version":3,"names":["EventHandler","isNullOrUndefined","extend","classList","addClass","removeClass","Browser","getValue","setValue","parentsUntil","getUid","appendChildren","getDatePredicate","getObject","extendObjWithFn","eventPromise","setChecked","clearReactVueTemplates","remove","debounce","Internationalization","DataUtil","Query","DataManager","Predicate","createCheckBox","events","ValueFormatter","getForeignData","Dialog","Input","createSpinner","hideSpinner","showSpinner","getFilterMenuPostion","toogleCheckbox","createCboxWithWrap","removeAddCboxClasses","getColumnByForeignKeyValue","CheckBoxFilterBase","parent","existingPredicate","foreignKeyQuery","filterState","values","renderEmpty","id","element","valueFormatter","locale","cBoxTrue","createElement","checked","label","cBoxFalse","insertBefore","className","attrs","type","firstChild","querySelector","add","enableRtl","prototype","destroy","closeDialog","wireEvents","dlg","clickHandler","keyupHandler","searchHandler","searchBoxKeyUp","elem","dialogObj","unWireEvents","foreignKeyFilter","args","fColl","mPredicate","_this","fPredicate","filterCollection","query","clone","options","column","dataSource","executeQuery","where","then","e","columnData","result","notify","generateQuery","predicate","ejpredicate","predicates","fpred","i","length","push","field","matchCase","ignoreCase","ignoreAccent","operator","value","filter","col","handler","foreignFilter","isRemote","initalPredicate","foreignKeyValue","searchBoxClick","target","contains","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","key","localeObj","getConstant","updateDataSource","str","obj","updateModel","actualPredicate","dataManager","format","filteredColumns","filterSettings","columns","allowCaseSensitive","uid","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","appendChild","inputargs","floatLabelType","properties","placeholder","createInput","spinner","cBox","showDialog","requestType","filterBeforeOpen","columnName","columnType","cancel","filterModel","cBoxFltrBegin","visible","content","close","bind","width","animationSettings","effect","buttons","click","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","open","dialogOpen","isStringTemplate","renderResponsiveFilter","setAttribute","isResponsiveFilter","responsiveCnt","document","appendTo","style","maxHeight","height","show","getAllData","position","X","Y","left","isDevice","showColumnMenu","filterDialogCreated","openDialog","isDestroyed","isBlanks","filterTemplateCol","getFilterItemTemplate","registeredTemplate","filterItemTemplate","destroyTemplate","isReact","isVue","undefined","filterMenuClose","filterDialogClose","clearFilter","instance","fltrPrevent","action","tagName","toLowerCase","keyCode","fltrBtnHandler","text","textContent","afterFilterColumnMenuClose","slice","call","querySelectorAll","check","optr","ddlValue","ej2_instances","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","val","fObj","coll","getAttribute","toString","concat","generateNullValuePredicates","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","isClearFilter","some","firstVal","j","or","isForeignColumn","foreignQuery","pred","queries","fn","parsed","parseFloat","predicte","moduleName","adaptor","getModuleName","indexOf","intl","parseDate","Date","addDistinct","filterSearchBegin","filterChoiceCount","trigger","actionBegin","filterargs","filterObj","emptyValPredicte","generatePredicate","and","colData","take","search","filterEvent","processSearch","getPredicateFromCols","getPredicate","predicateList","isGrid","getForeignKeyColumns","foreignColumn","_i","_a","Object","keys","prop","getColumnByField","getQuery","requiresCount","filterChoiceRequest","processDataOperation","filteredColumn","distinct","defObj","dataStateChange","state","def","deffered","promise","dataSuccess","isInitial","allPromise","runArray","params","data","foreignKeyData","Promise","all","fullData","args1","beforeCheckboxRenderer","searchSettings","sSettings","fields","map","f","cols","filterColumn","executeLocal","filteredData","getDistinct","records","processDataSource","filterAfterOpen","cBoxFltrComplete","updateResult","createFilterItems","beforeCheckboxRendererQuery","result_1","res","selectAll","updateAllCBoxes","parentElement","updateIndeterminatenBtn","setFocus","prevElem","cBoxes","getElementsByClassName","cBoxes_1","previousSibling","createCheckbox","cloneNode","dummyData","innerHTML","template","isReactCompiler","itemTemplate","renderTemplates","cnt","children","disabled","selected","btn","btnObj","input","indeterminate","dataBind","refreshCustomFilterOkBtn","nullCounter","selectAllValue","innerDiv","checkBox","isColFiltered","isRndere","formatFn","toView","args_1","filterCboxValue","checkbox","getCheckedState","checkState","json","len","ejValue","lookup","isForeignKey","foreignDataObj","group","sort","fnAscending","collection","operate","first","updateDateFilter","getCaseValue","p"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/common/checkbox-filter-base.js"],"sourcesContent":["/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked, clearReactVueTemplates } from '../base/util';\nimport { remove, debounce, Internationalization } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     *\n     * @param {IXLFilter} parent - specifies the IXLFilter\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[i].field,\n                    predicate: 'or',\n                    matchCase: fpred[i].ignoreCase,\n                    ignoreAccent: fpred[i].ignoreAccent,\n                    operator: fpred[i].operator,\n                    value: fpred[i].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n        var operator = this.options.isRemote ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'contains' : 'equal');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     *\n     * @param {string} key - Defines localization key\n     * @returns {string} - returns localization label\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                // eslint-disable-next-line valid-typeof\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            options.cancel = args.cancel;\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            enableRtl: this.parent.enableRtl,\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        this.dlg.setAttribute('aria-label', this.getLocalizedLabel('ExcelFilterDialogARIA'));\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.filterDialogCreated, e);\n        }\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.isBlanks = false;\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== undefined) {\n                clearReactVueTemplates(this.parent, ['filterItemTemplate']);\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /**\n     * @param {Column} col - Defines column details\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        // eslint-disable-next-line max-len\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if ((e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) ||\n                e.keyCode === 13) {\n                this.fltrBtnHandler();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n        if (this.options.column.showColumnMenu) {\n            this.parent.notify(events.afterFilterColumnMenuClose, {});\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var _this = this;\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var value;\n        var val;\n        var length;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                }\n                else {\n                    coll.push(fObj);\n                }\n                var args = {\n                    instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                    arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value, cancel: false\n                };\n                this.parent.notify(events.fltrPrevent, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            if (this.options.type === 'date' || this.options.type === 'datetime') {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[length], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'and', value: null\n                    });\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            var isClearFilter = this.options.filteredColumns.some(function (value) {\n                return _this.options.field === value.field;\n            });\n            if (isClearFilter) {\n                this.clearFilter();\n            }\n        }\n    };\n    // eslint-disable-next-line\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var coll = [];\n        var defaults = {\n            field: field, predicate: 'or', uid: this.options.uid,\n            operator: 'equal', type: this.options.type, matchCase: matchCase, ignoreAccent: ignoreAccent\n        };\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                // eslint-disable-next-line no-constant-condition\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if ((this.options.type === 'date' || this.options.type === 'datetime') && this.options.format) {\n            var intl = new Internationalization();\n            var format = typeof (this.options.format) === 'string' ? this.options.format :\n                this.options.format.format;\n            if (format) {\n                parsed = intl.parseDate(val, { format: format }) || new Date(val);\n            }\n            else {\n                parsed = new Date(val);\n            }\n        }\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            // eslint-disable-next-line no-self-assign\n            filterargs.operator = filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, parsed, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime') {\n                operator = 'equal';\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                if (!isNullOrUndefined(parsed)) {\n                    predicte = getDatePredicate(filterObj, _this.options.type);\n                }\n            }\n            if (val && typeof val === 'string' && _this.isBlanks &&\n                _this.getLocalizedLabel('Blanks').toLowerCase().indexOf(val.toLowerCase()) >= 0) {\n                coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                var emptyValPredicte = CheckBoxFilterBase.generatePredicate(coll);\n                emptyValPredicte.predicates.push(predicte);\n                query.where(emptyValPredicte);\n            }\n            else if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                query.where(pred.e);\n            }\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    foreignQuery.take(filterargs.filterChoiceCount);\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                query.take(filterargs.filterChoiceCount);\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        var query = this.getQuery();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            query.take(args.filterChoiceCount);\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            for (var j = 0; j < e.length; j++) {\n                runArray[i++](e[j].result);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n                var sSettings = this.parent.searchSettings;\n                var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) { return f.field; });\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n            if ((this.options.filteredColumns.length)) {\n                var cols = [];\n                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                    var filterColumn = this.options.filteredColumns[i];\n                    if (this.options.uid) {\n                        filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                        if (filterColumn.uid !== this.options.uid) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                    else {\n                        if (filterColumn.field !== this.options.field) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                }\n                var predicate = this.getPredicateFromCols(cols);\n                if (predicate) {\n                    query.where(predicate);\n                }\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if (this.sInput) {\n            this.sInput.focus();\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial, args);\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        this.parent.notify(events.beforeCheckboxRendererQuery, { query: query });\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.getElementsByClassName('e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (label.innerHTML === this.getLocalizedLabel('Blanks')) {\n            this.isBlanks = true;\n        }\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string';\n            if (isReactCompiler) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var innerDiv = this.cBox.querySelector('.e-checkfltrnmdiv');\n            if (innerDiv) {\n                innerDiv.classList.remove('e-checkfltrnmdiv');\n            }\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue(key, data[i]);\n                var value = getValue(this.options.field, data[i]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[i] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            if (btn) {\n                btn.disabled = false;\n            }\n            disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            this.cBox.appendChild(this.parent.createElement('div', { className: 'e-checkfltrnmdiv' }));\n            appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };\n        var filterModel = 'filterModel';\n        args[filterModel] = this;\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.result[value];\n            return this.options.operator === 'notequal' ? !checkState : checkState;\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[len];\n            value = getObject(field, value); //local remote diff, check with mdu\n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilterBase.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var operate = 'or';\n        var first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilterBase.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    if (cols[p].predicate === 'and' && cols[p].operator === 'equal') {\n                        predicate = predicate[operate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}