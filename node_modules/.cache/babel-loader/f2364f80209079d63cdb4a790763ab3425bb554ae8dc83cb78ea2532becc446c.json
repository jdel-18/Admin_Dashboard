{"ast":null,"code":"import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */function () {\n  /**\n   * Constructor for Grid sorting module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {SortSettings} sortSettings - specifies the SortSettings\n   * @param {string[]} sortedColumns - specifies the string\n   * @param {ServiceLocator} locator - specifies the ServiceLocator\n   * @hidden\n   */\n  function Sort(parent, sortSettings, sortedColumns, locator) {\n    this.contentRefresh = true;\n    this.isModelChanged = true;\n    this.aria = new AriaService();\n    this.currentTarget = null;\n    this.parent = parent;\n    this.sortSettings = sortSettings;\n    this.sortedColumns = sortedColumns;\n    this.serviceLocator = locator;\n    this.focus = locator.getService('focus');\n    this.addEventListener();\n    this.setFullScreenDialog();\n  }\n  /**\n   * The function used to update sortSettings\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.updateModel = function () {\n    var sortedColumn = {\n      field: this.columnName,\n      direction: this.direction\n    };\n    var index;\n    var gCols = this.parent.groupSettings.columns;\n    var flag = false;\n    if (!this.isMultiSort) {\n      if (!gCols.length) {\n        this.sortSettings.columns = [sortedColumn];\n      } else {\n        var sortedCols = [];\n        for (var i = 0, len = gCols.length; i < len; i++) {\n          index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n          if (this.columnName === gCols[i]) {\n            flag = true;\n            sortedCols.push(sortedColumn);\n          } else {\n            var sCol = this.getSortColumnFromField(gCols[i]);\n            sortedCols.push({\n              field: sCol.field,\n              direction: sCol.direction,\n              isFromGroup: sCol.isFromGroup\n            });\n          }\n        }\n        if (!flag) {\n          sortedCols.push(sortedColumn);\n        }\n        this.sortSettings.columns = sortedCols;\n      }\n    } else {\n      index = this.getSortedColsIndexByField(this.columnName);\n      if (index > -1) {\n        this.sortSettings.columns.splice(index, 1);\n      }\n      this.sortSettings.columns.push(sortedColumn);\n      // eslint-disable-next-line no-self-assign\n      this.sortSettings.columns = this.sortSettings.columns;\n    }\n    this.parent.dataBind();\n    this.lastSortedCol = this.columnName;\n  };\n  /**\n   * The function used to trigger onActionComplete\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.onActionComplete = function (e) {\n    var args = !this.isRemove ? {\n      columnName: this.columnName,\n      direction: this.direction,\n      requestType: 'sorting',\n      type: events.actionComplete\n    } : {\n      requestType: 'sorting',\n      type: events.actionComplete\n    };\n    this.isRemove = false;\n    this.parent.trigger(events.actionComplete, extend(e, args));\n  };\n  /**\n   * Sorts a column with the given options.\n   *\n   * @param {string} columnName - Defines the column name to sort.\n   * @param {SortDirection} direction - Defines the direction of sorting field.\n   * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n   * @returns {void}\n   */\n  Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n    var gObj = this.parent;\n    if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        columnName: columnName\n      });\n      return;\n    }\n    if (!gObj.allowMultiSorting) {\n      isMultiSort = gObj.allowMultiSorting;\n    }\n    if (this.isActionPrevent()) {\n      gObj.notify(events.preventBatch, {\n        instance: this,\n        handler: this.sortColumn,\n        arg1: columnName,\n        arg2: direction,\n        arg3: isMultiSort\n      });\n      return;\n    }\n    this.backupSettings();\n    this.columnName = columnName;\n    this.direction = direction;\n    this.isMultiSort = isMultiSort;\n    this.removeSortIcons();\n    this.updateSortedCols(columnName, isMultiSort);\n    this.updateModel();\n  };\n  Sort.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n    }\n  };\n  Sort.prototype.backupSettings = function () {\n    this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n    this.lastCols = this.sortedColumns;\n  };\n  Sort.prototype.restoreSettings = function () {\n    this.isModelChanged = false;\n    this.isMultiSort = true;\n    this.parent.setProperties({\n      sortSettings: {\n        columns: this.lastSortedCols\n      }\n    }, true);\n    //this.parent.sortSettings.columns =  this.lastSortedCols;\n    this.sortedColumns = this.lastCols;\n    this.isModelChanged = true;\n  };\n  Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n    if (!isMultiSort) {\n      if (this.parent.allowGrouping) {\n        for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n          if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n            this.sortedColumns.splice(i, 1);\n            len--;\n            i--;\n          }\n        }\n      } else {\n        this.sortedColumns.splice(0, this.sortedColumns.length);\n      }\n    }\n    if (this.sortedColumns.indexOf(columnName) < 0) {\n      this.sortedColumns.push(columnName);\n    }\n  };\n  /**\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n    if (this.contentRefresh) {\n      var args = this.sortSettings.columns.length ? {\n        columnName: this.columnName,\n        direction: this.direction,\n        requestType: 'sorting',\n        type: events.actionBegin,\n        target: this.currentTarget,\n        cancel: false\n      } : {\n        requestType: 'sorting',\n        type: events.actionBegin,\n        cancel: false,\n        target: this.currentTarget\n      };\n      this.parent.notify(events.modelChanged, args);\n    }\n    this.refreshSortSettings();\n    this.removeSortIcons();\n    this.addSortIcons();\n  };\n  Sort.prototype.refreshSortSettings = function () {\n    this.sortedColumns.length = 0;\n    var sortColumns = this.sortSettings.columns;\n    for (var i = 0; i < sortColumns.length; i++) {\n      if (!sortColumns[i].isFromGroup) {\n        this.sortedColumns.push(sortColumns[i].field);\n      }\n    }\n  };\n  /**\n   * Clears all the sorted columns of the Grid.\n   *\n   * @returns {void}\n   */\n  Sort.prototype.clearSorting = function () {\n    var cols = getActualPropFromColl(this.sortSettings.columns);\n    if (this.isActionPrevent()) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.clearSorting\n      });\n      return;\n    }\n    for (var i = 0, len = cols.length; i < len; i++) {\n      this.removeSortColumn(cols[i].field);\n    }\n  };\n  Sort.prototype.isActionPrevent = function () {\n    return isActionPrevent(this.parent);\n  };\n  /**\n   * Remove sorted column by field name.\n   *\n   * @param {string} field - Defines the column field name to remove sort.\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.removeSortColumn = function (field) {\n    var gObj = this.parent;\n    var cols = this.sortSettings.columns;\n    if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n      return;\n    }\n    if (this.isActionPrevent()) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.removeSortColumn,\n        arg1: field\n      });\n      return;\n    }\n    this.backupSettings();\n    this.removeSortIcons();\n    var args = {\n      requestType: 'sorting',\n      type: events.actionBegin,\n      target: this.currentTarget\n    };\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (cols[i].field === field) {\n        if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n          continue;\n        }\n        this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n        cols.splice(i, 1);\n        this.isRemove = true;\n        if (this.isModelChanged) {\n          this.parent.notify(events.modelChanged, args);\n        }\n        break;\n      }\n    }\n    if (!args.cancel) {\n      this.addSortIcons();\n    }\n  };\n  Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n    var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (cols[i].field === field) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n  Sort.prototype.getModuleName = function () {\n    return 'sort';\n  };\n  Sort.prototype.initialEnd = function () {\n    this.parent.off(events.contentReady, this.initialEnd);\n    if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n      var gObj = this.parent;\n      this.contentRefresh = false;\n      this.isMultiSort = this.sortSettings.columns.length > 1;\n      for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n        var col = _a[_i];\n        if (this.sortedColumns.indexOf(col.field) > -1) {\n          this.sortColumn(col.field, col.direction, true);\n        }\n      }\n      this.isMultiSort = false;\n      this.contentRefresh = true;\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.evtHandlers = [{\n      event: events.setFullScreenDialog,\n      handler: this.setFullScreenDialog\n    }, {\n      event: events.contentReady,\n      handler: this.initialEnd\n    }, {\n      event: events.sortComplete,\n      handler: this.onActionComplete\n    }, {\n      event: events.inBoundModelChanged,\n      handler: this.onPropertyChanged\n    }, {\n      event: events.click,\n      handler: this.clickHandler\n    }, {\n      event: events.headerRefreshed,\n      handler: this.refreshSortIcons\n    }, {\n      event: events.keyPressed,\n      handler: this.keyPressed\n    }, {\n      event: events.cancelBegin,\n      handler: this.cancelBeginEvent\n    }, {\n      event: events.destroy,\n      handler: this.destroy\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n  /**\n   * To destroy the sorting\n   *\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.destroy = function () {\n    this.isModelChanged = false;\n    var gridElement = this.parent.element;\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n    if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-sortdirect').length) {\n      this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowSorting)) {\n      this.clearSorting();\n    }\n    this.isModelChanged = true;\n    this.removeEventListener();\n  };\n  Sort.prototype.cancelBeginEvent = function (e) {\n    if (e.requestType === 'sorting') {\n      this.restoreSettings();\n      this.refreshSortIcons();\n      this.isMultiSort = true;\n    }\n  };\n  Sort.prototype.clickHandler = function (e) {\n    var gObj = this.parent;\n    this.currentTarget = null;\n    this.popUpClickHandler(e);\n    var target = closest(e.target, '.e-headercell');\n    if (target && !e.target.classList.contains('e-grptogglebtn') && !target.classList.contains('e-resized') && !e.target.classList.contains('e-rhandler') && !e.target.classList.contains('e-columnmenu') && !e.target.classList.contains('e-filtermenudiv') && !parentsUntil(e.target, 'e-stackedheadercell') && !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection && e.target.classList.contains('e-headercell'))) {\n      var gObj_1 = this.parent;\n      var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n      if (colObj.type !== 'checkbox') {\n        this.initiateSort(target, e, colObj);\n        if (Browser.isDevice) {\n          this.showPopUp(e);\n        }\n      }\n    }\n    if (target) {\n      target.classList.remove('e-resized');\n    }\n    if (parentsUntil(e.target, 'e-excel-ascending') || parentsUntil(e.target, 'e-excel-descending')) {\n      var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n      var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ? 'Ascending' : 'Descending';\n      this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n    }\n  };\n  Sort.prototype.keyPressed = function (e) {\n    var ele = e.target;\n    if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter') && closest(ele, '.e-headercell')) {\n      var target = this.focus.getFocusedElement();\n      if (isNullOrUndefined(target) || !target.classList.contains('e-headercell') || !target.querySelector('.e-headercelldiv')) {\n        return;\n      }\n      var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n      this.initiateSort(target, e, col);\n    }\n  };\n  Sort.prototype.initiateSort = function (target, e, column) {\n    var gObj = this.parent;\n    var field = column.field;\n    this.currentTarget = e.target;\n    var direction = !target.getElementsByClassName('e-ascending').length ? 'Ascending' : 'Descending';\n    this.isMultiSort = e.ctrlKey || this.enableSortMultiTouch || navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey;\n    if (e.shiftKey || this.sortSettings.allowUnsort && target.getElementsByClassName('e-descending').length && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n      this.removeSortColumn(field);\n    } else {\n      this.sortColumn(field, direction, this.isMultiSort);\n    }\n  };\n  Sort.prototype.showPopUp = function (e) {\n    var target = closest(e.target, '.e-headercell');\n    if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n      setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n    }\n  };\n  Sort.prototype.popUpClickHandler = function (e) {\n    var target = e.target;\n    if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) || closest(target, '.e-gridpopup')) {\n      if (target.classList.contains('e-sortdirect')) {\n        if (!target.classList.contains('e-spanclicked')) {\n          target.classList.add('e-spanclicked');\n          this.enableSortMultiTouch = true;\n        } else {\n          target.classList.remove('e-spanclicked');\n          this.enableSortMultiTouch = false;\n          this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n      }\n    } else {\n      this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n    }\n  };\n  Sort.prototype.addSortIcons = function () {\n    var gObj = this.parent;\n    var header;\n    var filterElement;\n    var cols = this.sortSettings.columns;\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n    for (var i = 0, len = cols.length; i < len; i++) {\n      header = gObj.getColumnHeaderByField(cols[i].field);\n      if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n        continue;\n      }\n      this.aria.setSort(header, cols[i].direction.toLowerCase());\n      if (cols.length > 1) {\n        header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', {\n          className: 'e-sortnumber',\n          innerHTML: (i + 1).toString()\n        }), header.querySelector('.e-headertext'));\n      }\n      filterElement = header.querySelector('.e-sortfilterdiv');\n      if (cols[i].direction === 'Ascending') {\n        classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n      } else {\n        classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n      }\n    }\n  };\n  Sort.prototype.removeSortIcons = function (position) {\n    var gObj = this.parent;\n    var header;\n    var cols = this.sortSettings.columns;\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n    for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n      header = gObj.getColumnHeaderByField(cols[i].field);\n      if (isNullOrUndefined(header) || gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 && !header.querySelector('.e-sortfilterdiv')) {\n        continue;\n      }\n      if (fieldNames.indexOf(cols[i].field) === -1) {\n        continue;\n      }\n      this.aria.setSort(header, 'none');\n      classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n      if (header.querySelector('.e-sortnumber')) {\n        header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n      }\n    }\n  };\n  Sort.prototype.getSortColumnFromField = function (field) {\n    for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n      if (this.sortSettings.columns[i].field === field) {\n        return this.sortSettings.columns[i];\n      }\n    }\n    return false;\n  };\n  Sort.prototype.updateAriaAttr = function () {\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n    for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n      var col = _a[_i];\n      if (fieldNames.indexOf(col) === -1) {\n        continue;\n      }\n      var header = this.parent.getColumnHeaderByField(col);\n      this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n    }\n  };\n  Sort.prototype.refreshSortIcons = function (params) {\n    if (params === void 0) {\n      params = {\n        args: {\n          isFrozen: false\n        }\n      };\n    }\n    if (!params.args.isFrozen) {\n      this.removeSortIcons();\n      this.isMultiSort = true;\n      this.removeSortIcons();\n      this.addSortIcons();\n      this.isMultiSort = false;\n      this.updateAriaAttr();\n    }\n  };\n  /**\n   * To show the responsive custom sort dialog\n   *\n   * @param {boolean} enable - specifes dialog open\n   * @returns {void}\n   * @hidden\n   */\n  Sort.prototype.showCustomSort = function (enable) {\n    this.responsiveDialogRenderer.isCustomDialog = enable;\n    this.responsiveDialogRenderer.showResponsiveDialog();\n  };\n  return Sort;\n}();\nexport { Sort };","map":{"version":3,"names":["Browser","extend","isNullOrUndefined","closest","classList","ResponsiveDialogAction","setCssInGridPopUp","getActualPropFromColl","isActionPrevent","iterateExtend","parentsUntil","addRemoveEventListener","events","AriaService","literals","Sort","parent","sortSettings","sortedColumns","locator","contentRefresh","isModelChanged","aria","currentTarget","serviceLocator","focus","getService","addEventListener","setFullScreenDialog","prototype","updateModel","sortedColumn","field","columnName","direction","index","gCols","groupSettings","columns","flag","isMultiSort","length","sortedCols","i","len","getSortedColsIndexByField","push","sCol","getSortColumnFromField","isFromGroup","splice","dataBind","lastSortedCol","onActionComplete","e","args","isRemove","requestType","type","actionComplete","trigger","sortColumn","gObj","getColumnByField","allowSorting","isContextMenuOpen","log","moduleName","getModuleName","allowMultiSorting","notify","preventBatch","instance","handler","arg1","arg2","arg3","backupSettings","removeSortIcons","updateSortedCols","registerAdaptiveService","enableAdaptiveUI","isSort","lastSortedCols","lastCols","restoreSettings","setProperties","allowGrouping","indexOf","onPropertyChanged","module","actionBegin","target","cancel","modelChanged","refreshSortSettings","addSortIcons","sortColumns","clearSorting","cols","removeSortColumn","initialEnd","off","contentReady","getColumns","_i","_a","slice","col","isDestroyed","evtHandlers","event","sortComplete","inBoundModelChanged","click","clickHandler","headerRefreshed","refreshSortIcons","keyPressed","cancelBegin","cancelBeginEvent","destroy","removeEventListener","gridElement","element","querySelector","gridHeader","gridContent","getElementsByClassName","style","display","refreshing","popUpClickHandler","contains","allowSelection","selectionSettings","allowColumnSelection","gObj_1","colObj","getColumnByUid","getAttribute","initiateSort","isDevice","showPopUp","remove","colUid","ele","isEdit","action","getFocusedElement","column","ctrlKey","enableSortMultiTouch","navigator","userAgent","metaKey","shiftKey","allowUnsort","rowCell","add","header","filterElement","fieldNames","map","c","getColumnHeaderByField","setSort","toLowerCase","insertBefore","createElement","className","innerHTML","toString","position","removeChild","updateAriaAttr","params","isFrozen","showCustomSort","enable","responsiveDialogRenderer","isCustomDialog","showResponsiveDialog"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/actions/sort.js"],"sourcesContent":["import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {SortSettings} sortSettings - specifies the SortSettings\n     * @param {string[]} sortedColumns - specifies the string\n     * @param {ServiceLocator} locator - specifies the ServiceLocator\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * The function used to update sortSettings\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            // eslint-disable-next-line no-self-assign\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     *\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @returns {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n        }\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;\n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget, cancel: false\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        this.sortedColumns.length = 0;\n        var sortColumns = this.sortSettings.columns;\n        for (var i = 0; i < sortColumns.length; i++) {\n            if (!sortColumns[i].isFromGroup) {\n                this.sortedColumns.push(sortColumns[i].field);\n            }\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     *\n     * @param {string} field - Defines the column field name to remove sort.\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        var args = { requestType: 'sorting', type: events.actionBegin, target: this.currentTarget };\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, args);\n                }\n                break;\n            }\n        }\n        if (!args.cancel) {\n            this.addSortIcons();\n        }\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.setFullScreenDialog, handler: this.setFullScreenDialog },\n            { event: events.contentReady, handler: this.initialEnd },\n            { event: events.sortComplete, handler: this.onActionComplete },\n            { event: events.inBoundModelChanged, handler: this.onPropertyChanged },\n            { event: events.click, handler: this.clickHandler },\n            { event: events.headerRefreshed, handler: this.refreshSortIcons },\n            { event: events.keyPressed, handler: this.keyPressed },\n            { event: events.cancelBegin, handler: this.cancelBeginEvent },\n            { event: events.destroy, handler: this.destroy }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * To destroy the sorting\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowSorting)) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv') &&\n            !parentsUntil(e.target, 'e-stackedheadercell') &&\n            !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection &&\n                e.target.classList.contains('e-headercell'))) {\n            var gObj_1 = this.parent;\n            var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n        if (parentsUntil(e.target, 'e-excel-ascending') ||\n            parentsUntil(e.target, 'e-excel-descending')) {\n            var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n            var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ?\n                'Ascending' : 'Descending';\n            this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.getElementsByClassName('e-ascending').length ? 'Ascending' :\n            'Descending';\n        this.isMultiSort = e.ctrlKey || this.enableSortMultiTouch ||\n            (navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey);\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.getElementsByClassName('e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, this.isMultiSort);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n                continue;\n            }\n            this.aria.setSort(header, (cols[i].direction).toLowerCase());\n            if (cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (isNullOrUndefined(header) || (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    /**\n     * To show the responsive custom sort dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.showCustomSort = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return Sort;\n}());\nexport { Sort };\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,sBAAsB;AAC9C,SAASC,MAAM,EAAEC,iBAAiB,QAAQ,sBAAsB;AAChE,SAASC,OAAO,EAAEC,SAAS,QAAQ,sBAAsB;AACzD,SAASC,sBAAsB,QAAQ,cAAc;AACrD,SAASC,iBAAiB,EAAEC,qBAAqB,EAAEC,eAAe,EAAEC,aAAa,EAAEC,YAAY,QAAQ,cAAc;AACrH,SAASC,sBAAsB,QAAQ,cAAc;AACrD,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,SAASC,WAAW,QAAQ,0BAA0B;AACtD,OAAO,KAAKC,QAAQ,MAAM,yBAAyB;AACnD;AACA;AACA;AACA;AACA,IAAIC,IAAI,GAAG,aAAe,YAAY;EAClC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,SAASA,IAAIA,CAACC,MAAM,EAAEC,YAAY,EAAEC,aAAa,EAAEC,OAAO,EAAE;IACxD,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,IAAI,GAAG,IAAIT,WAAW,CAAC,CAAC;IAC7B,IAAI,CAACU,aAAa,GAAG,IAAI;IACzB,IAAI,CAACP,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACM,cAAc,GAAGL,OAAO;IAC7B,IAAI,CAACM,KAAK,GAAGN,OAAO,CAACO,UAAU,CAAC,OAAO,CAAC;IACxC,IAAI,CAACC,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,mBAAmB,CAAC,CAAC;EAC9B;EACA;AACJ;AACA;AACA;AACA;AACA;EACIb,IAAI,CAACc,SAAS,CAACC,WAAW,GAAG,YAAY;IACrC,IAAIC,YAAY,GAAG;MAAEC,KAAK,EAAE,IAAI,CAACC,UAAU;MAAEC,SAAS,EAAE,IAAI,CAACA;IAAU,CAAC;IACxE,IAAIC,KAAK;IACT,IAAIC,KAAK,GAAG,IAAI,CAACpB,MAAM,CAACqB,aAAa,CAACC,OAAO;IAC7C,IAAIC,IAAI,GAAG,KAAK;IAChB,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;MACnB,IAAI,CAACJ,KAAK,CAACK,MAAM,EAAE;QACf,IAAI,CAACxB,YAAY,CAACqB,OAAO,GAAG,CAACP,YAAY,CAAC;MAC9C,CAAC,MACI;QACD,IAAIW,UAAU,GAAG,EAAE;QACnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGR,KAAK,CAACK,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;UAC9CR,KAAK,GAAG,IAAI,CAACU,yBAAyB,CAACT,KAAK,CAACO,CAAC,CAAC,EAAED,UAAU,CAAC;UAC5D,IAAI,IAAI,CAACT,UAAU,KAAKG,KAAK,CAACO,CAAC,CAAC,EAAE;YAC9BJ,IAAI,GAAG,IAAI;YACXG,UAAU,CAACI,IAAI,CAACf,YAAY,CAAC;UACjC,CAAC,MACI;YACD,IAAIgB,IAAI,GAAG,IAAI,CAACC,sBAAsB,CAACZ,KAAK,CAACO,CAAC,CAAC,CAAC;YAChDD,UAAU,CAACI,IAAI,CAAC;cAAEd,KAAK,EAAEe,IAAI,CAACf,KAAK;cAAEE,SAAS,EAAEa,IAAI,CAACb,SAAS;cAAEe,WAAW,EAAEF,IAAI,CAACE;YAAY,CAAC,CAAC;UACpG;QACJ;QACA,IAAI,CAACV,IAAI,EAAE;UACPG,UAAU,CAACI,IAAI,CAACf,YAAY,CAAC;QACjC;QACA,IAAI,CAACd,YAAY,CAACqB,OAAO,GAAGI,UAAU;MAC1C;IACJ,CAAC,MACI;MACDP,KAAK,GAAG,IAAI,CAACU,yBAAyB,CAAC,IAAI,CAACZ,UAAU,CAAC;MACvD,IAAIE,KAAK,GAAG,CAAC,CAAC,EAAE;QACZ,IAAI,CAAClB,YAAY,CAACqB,OAAO,CAACY,MAAM,CAACf,KAAK,EAAE,CAAC,CAAC;MAC9C;MACA,IAAI,CAAClB,YAAY,CAACqB,OAAO,CAACQ,IAAI,CAACf,YAAY,CAAC;MAC5C;MACA,IAAI,CAACd,YAAY,CAACqB,OAAO,GAAG,IAAI,CAACrB,YAAY,CAACqB,OAAO;IACzD;IACA,IAAI,CAACtB,MAAM,CAACmC,QAAQ,CAAC,CAAC;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI,CAACnB,UAAU;EACxC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIlB,IAAI,CAACc,SAAS,CAACwB,gBAAgB,GAAG,UAAUC,CAAC,EAAE;IAC3C,IAAIC,IAAI,GAAG,CAAC,IAAI,CAACC,QAAQ,GAAG;MACxBvB,UAAU,EAAE,IAAI,CAACA,UAAU;MAAEC,SAAS,EAAE,IAAI,CAACA,SAAS;MAAEuB,WAAW,EAAE,SAAS;MAAEC,IAAI,EAAE9C,MAAM,CAAC+C;IACjG,CAAC,GAAG;MAAEF,WAAW,EAAE,SAAS;MAAEC,IAAI,EAAE9C,MAAM,CAAC+C;IAAe,CAAC;IAC3D,IAAI,CAACH,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACxC,MAAM,CAAC4C,OAAO,CAAChD,MAAM,CAAC+C,cAAc,EAAE1D,MAAM,CAACqD,CAAC,EAAEC,IAAI,CAAC,CAAC;EAC/D,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIxC,IAAI,CAACc,SAAS,CAACgC,UAAU,GAAG,UAAU5B,UAAU,EAAEC,SAAS,EAAEM,WAAW,EAAE;IACtE,IAAIsB,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAI,IAAI,CAACA,MAAM,CAAC+C,gBAAgB,CAAC9B,UAAU,CAAC,CAAC+B,YAAY,KAAK,KAAK,IAAI,IAAI,CAAChD,MAAM,CAACiD,iBAAiB,CAAC,CAAC,EAAE;MACpG,IAAI,CAACjD,MAAM,CAACkD,GAAG,CAAC,wBAAwB,EAAE;QAAEC,UAAU,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;QAAEnC,UAAU,EAAEA;MAAW,CAAC,CAAC;MACvG;IACJ;IACA,IAAI,CAAC6B,IAAI,CAACO,iBAAiB,EAAE;MACzB7B,WAAW,GAAGsB,IAAI,CAACO,iBAAiB;IACxC;IACA,IAAI,IAAI,CAAC7D,eAAe,CAAC,CAAC,EAAE;MACxBsD,IAAI,CAACQ,MAAM,CAAC1D,MAAM,CAAC2D,YAAY,EAAE;QAC7BC,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI,CAACZ,UAAU;QACxCa,IAAI,EAAEzC,UAAU;QAAE0C,IAAI,EAAEzC,SAAS;QAAE0C,IAAI,EAAEpC;MAC7C,CAAC,CAAC;MACF;IACJ;IACA,IAAI,CAACqC,cAAc,CAAC,CAAC;IACrB,IAAI,CAAC5C,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACM,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACsC,eAAe,CAAC,CAAC;IACtB,IAAI,CAACC,gBAAgB,CAAC9C,UAAU,EAAEO,WAAW,CAAC;IAC9C,IAAI,CAACV,WAAW,CAAC,CAAC;EACtB,CAAC;EACDf,IAAI,CAACc,SAAS,CAACD,mBAAmB,GAAG,YAAY;IAC7C,IAAI,IAAI,CAACJ,cAAc,EAAE;MACrB,IAAI,CAACA,cAAc,CAACwD,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAChE,MAAM,CAACiE,gBAAgB,EAAE5E,sBAAsB,CAAC6E,MAAM,CAAC;IAClH;EACJ,CAAC;EACDnE,IAAI,CAACc,SAAS,CAACgD,cAAc,GAAG,YAAY;IACxC,IAAI,CAACM,cAAc,GAAG1E,aAAa,CAAC,IAAI,CAACQ,YAAY,CAACqB,OAAO,CAAC;IAC9D,IAAI,CAAC8C,QAAQ,GAAG,IAAI,CAAClE,aAAa;EACtC,CAAC;EACDH,IAAI,CAACc,SAAS,CAACwD,eAAe,GAAG,YAAY;IACzC,IAAI,CAAChE,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACmB,WAAW,GAAG,IAAI;IACvB,IAAI,CAACxB,MAAM,CAACsE,aAAa,CAAC;MAAErE,YAAY,EAAE;QAAEqB,OAAO,EAAE,IAAI,CAAC6C;MAAe;IAAE,CAAC,EAAE,IAAI,CAAC;IACnF;IACA,IAAI,CAACjE,aAAa,GAAG,IAAI,CAACkE,QAAQ;IAClC,IAAI,CAAC/D,cAAc,GAAG,IAAI;EAC9B,CAAC;EACDN,IAAI,CAACc,SAAS,CAACkD,gBAAgB,GAAG,UAAU9C,UAAU,EAAEO,WAAW,EAAE;IACjE,IAAI,CAACA,WAAW,EAAE;MACd,IAAI,IAAI,CAACxB,MAAM,CAACuE,aAAa,EAAE;QAC3B,KAAK,IAAI5C,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAAC1B,aAAa,CAACuB,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;UAC3D,IAAI,IAAI,CAAC3B,MAAM,CAACqB,aAAa,CAACC,OAAO,CAACkD,OAAO,CAAC,IAAI,CAACtE,aAAa,CAACyB,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;YACtE,IAAI,CAACzB,aAAa,CAACgC,MAAM,CAACP,CAAC,EAAE,CAAC,CAAC;YAC/BC,GAAG,EAAE;YACLD,CAAC,EAAE;UACP;QACJ;MACJ,CAAC,MACI;QACD,IAAI,CAACzB,aAAa,CAACgC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAChC,aAAa,CAACuB,MAAM,CAAC;MAC3D;IACJ;IACA,IAAI,IAAI,CAACvB,aAAa,CAACsE,OAAO,CAACvD,UAAU,CAAC,GAAG,CAAC,EAAE;MAC5C,IAAI,CAACf,aAAa,CAAC4B,IAAI,CAACb,UAAU,CAAC;IACvC;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIlB,IAAI,CAACc,SAAS,CAAC4D,iBAAiB,GAAG,UAAUnC,CAAC,EAAE;IAC5C,IAAIA,CAAC,CAACoC,MAAM,KAAK,IAAI,CAACtB,aAAa,CAAC,CAAC,EAAE;MACnC;IACJ;IACA,IAAI,IAAI,CAAChD,cAAc,EAAE;MACrB,IAAImC,IAAI,GAAG,IAAI,CAACtC,YAAY,CAACqB,OAAO,CAACG,MAAM,GAAG;QAC1CR,UAAU,EAAE,IAAI,CAACA,UAAU;QAAEC,SAAS,EAAE,IAAI,CAACA,SAAS;QAAEuB,WAAW,EAAE,SAAS;QAC9EC,IAAI,EAAE9C,MAAM,CAAC+E,WAAW;QAAEC,MAAM,EAAE,IAAI,CAACrE,aAAa;QAAEsE,MAAM,EAAE;MAClE,CAAC,GAAG;QACApC,WAAW,EAAE,SAAS;QAAEC,IAAI,EAAE9C,MAAM,CAAC+E,WAAW;QAAEE,MAAM,EAAE,KAAK;QAC/DD,MAAM,EAAE,IAAI,CAACrE;MACjB,CAAC;MACD,IAAI,CAACP,MAAM,CAACsD,MAAM,CAAC1D,MAAM,CAACkF,YAAY,EAAEvC,IAAI,CAAC;IACjD;IACA,IAAI,CAACwC,mBAAmB,CAAC,CAAC;IAC1B,IAAI,CAACjB,eAAe,CAAC,CAAC;IACtB,IAAI,CAACkB,YAAY,CAAC,CAAC;EACvB,CAAC;EACDjF,IAAI,CAACc,SAAS,CAACkE,mBAAmB,GAAG,YAAY;IAC7C,IAAI,CAAC7E,aAAa,CAACuB,MAAM,GAAG,CAAC;IAC7B,IAAIwD,WAAW,GAAG,IAAI,CAAChF,YAAY,CAACqB,OAAO;IAC3C,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsD,WAAW,CAACxD,MAAM,EAAEE,CAAC,EAAE,EAAE;MACzC,IAAI,CAACsD,WAAW,CAACtD,CAAC,CAAC,CAACM,WAAW,EAAE;QAC7B,IAAI,CAAC/B,aAAa,CAAC4B,IAAI,CAACmD,WAAW,CAACtD,CAAC,CAAC,CAACX,KAAK,CAAC;MACjD;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIjB,IAAI,CAACc,SAAS,CAACqE,YAAY,GAAG,YAAY;IACtC,IAAIC,IAAI,GAAG5F,qBAAqB,CAAC,IAAI,CAACU,YAAY,CAACqB,OAAO,CAAC;IAC3D,IAAI,IAAI,CAAC9B,eAAe,CAAC,CAAC,EAAE;MACxB,IAAI,CAACQ,MAAM,CAACsD,MAAM,CAAC1D,MAAM,CAAC2D,YAAY,EAAE;QAAEC,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI,CAACyB;MAAa,CAAC,CAAC;MACvF;IACJ;IACA,KAAK,IAAIvD,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGuD,IAAI,CAAC1D,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MAC7C,IAAI,CAACyD,gBAAgB,CAACD,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC;IACxC;EACJ,CAAC;EACDjB,IAAI,CAACc,SAAS,CAACrB,eAAe,GAAG,YAAY;IACzC,OAAOA,eAAe,CAAC,IAAI,CAACQ,MAAM,CAAC;EACvC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACID,IAAI,CAACc,SAAS,CAACuE,gBAAgB,GAAG,UAAUpE,KAAK,EAAE;IAC/C,IAAI8B,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAImF,IAAI,GAAG,IAAI,CAAClF,YAAY,CAACqB,OAAO;IACpC,IAAI6D,IAAI,CAAC1D,MAAM,KAAK,CAAC,IAAI,IAAI,CAACvB,aAAa,CAACsE,OAAO,CAACxD,KAAK,CAAC,GAAG,CAAC,EAAE;MAC5D;IACJ;IACA,IAAI,IAAI,CAACxB,eAAe,CAAC,CAAC,EAAE;MACxB,IAAI,CAACQ,MAAM,CAACsD,MAAM,CAAC1D,MAAM,CAAC2D,YAAY,EAAE;QAAEC,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI,CAAC2B,gBAAgB;QAAE1B,IAAI,EAAE1C;MAAM,CAAC,CAAC;MACxG;IACJ;IACA,IAAI,CAAC6C,cAAc,CAAC,CAAC;IACrB,IAAI,CAACC,eAAe,CAAC,CAAC;IACtB,IAAIvB,IAAI,GAAG;MAAEE,WAAW,EAAE,SAAS;MAAEC,IAAI,EAAE9C,MAAM,CAAC+E,WAAW;MAAEC,MAAM,EAAE,IAAI,CAACrE;IAAc,CAAC;IAC3F,KAAK,IAAIoB,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGuD,IAAI,CAAC1D,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MAC7C,IAAIwD,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,KAAKA,KAAK,EAAE;QACzB,IAAI8B,IAAI,CAACyB,aAAa,IAAIzB,IAAI,CAACzB,aAAa,CAACC,OAAO,CAACkD,OAAO,CAACW,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;UAC9E;QACJ;QACA,IAAI,CAACd,aAAa,CAACgC,MAAM,CAAC,IAAI,CAAChC,aAAa,CAACsE,OAAO,CAACW,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC,EAAE,CAAC,CAAC;QACvEmE,IAAI,CAACjD,MAAM,CAACP,CAAC,EAAE,CAAC,CAAC;QACjB,IAAI,CAACa,QAAQ,GAAG,IAAI;QACpB,IAAI,IAAI,CAACnC,cAAc,EAAE;UACrB,IAAI,CAACL,MAAM,CAACsD,MAAM,CAAC1D,MAAM,CAACkF,YAAY,EAAEvC,IAAI,CAAC;QACjD;QACA;MACJ;IACJ;IACA,IAAI,CAACA,IAAI,CAACsC,MAAM,EAAE;MACd,IAAI,CAACG,YAAY,CAAC,CAAC;IACvB;EACJ,CAAC;EACDjF,IAAI,CAACc,SAAS,CAACgB,yBAAyB,GAAG,UAAUb,KAAK,EAAEd,aAAa,EAAE;IACvE,IAAIiF,IAAI,GAAGjF,aAAa,GAAGA,aAAa,GAAG,IAAI,CAACD,YAAY,CAACqB,OAAO;IACpE,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGuD,IAAI,CAAC1D,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MAC7C,IAAIwD,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,KAAKA,KAAK,EAAE;QACzB,OAAOW,CAAC;MACZ;IACJ;IACA,OAAO,CAAC,CAAC;EACb,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI5B,IAAI,CAACc,SAAS,CAACuC,aAAa,GAAG,YAAY;IACvC,OAAO,MAAM;EACjB,CAAC;EACDrD,IAAI,CAACc,SAAS,CAACwE,UAAU,GAAG,YAAY;IACpC,IAAI,CAACrF,MAAM,CAACsF,GAAG,CAAC1F,MAAM,CAAC2F,YAAY,EAAE,IAAI,CAACF,UAAU,CAAC;IACrD,IAAI,IAAI,CAACrF,MAAM,CAACwF,UAAU,CAAC,CAAC,CAAC/D,MAAM,IAAI,IAAI,CAACxB,YAAY,CAACqB,OAAO,CAACG,MAAM,EAAE;MACrE,IAAIqB,IAAI,GAAG,IAAI,CAAC9C,MAAM;MACtB,IAAI,CAACI,cAAc,GAAG,KAAK;MAC3B,IAAI,CAACoB,WAAW,GAAG,IAAI,CAACvB,YAAY,CAACqB,OAAO,CAACG,MAAM,GAAG,CAAC;MACvD,KAAK,IAAIgE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG5C,IAAI,CAAC7C,YAAY,CAACqB,OAAO,CAACqE,KAAK,CAAC,CAAC,EAAEF,EAAE,GAAGC,EAAE,CAACjE,MAAM,EAAEgE,EAAE,EAAE,EAAE;QAC3E,IAAIG,GAAG,GAAGF,EAAE,CAACD,EAAE,CAAC;QAChB,IAAI,IAAI,CAACvF,aAAa,CAACsE,OAAO,CAACoB,GAAG,CAAC5E,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;UAC5C,IAAI,CAAC6B,UAAU,CAAC+C,GAAG,CAAC5E,KAAK,EAAE4E,GAAG,CAAC1E,SAAS,EAAE,IAAI,CAAC;QACnD;MACJ;MACA,IAAI,CAACM,WAAW,GAAG,KAAK;MACxB,IAAI,CAACpB,cAAc,GAAG,IAAI;IAC9B;EACJ,CAAC;EACD;AACJ;AACA;AACA;EACIL,IAAI,CAACc,SAAS,CAACF,gBAAgB,GAAG,YAAY;IAC1C,IAAI,IAAI,CAACX,MAAM,CAAC6F,WAAW,EAAE;MACzB;IACJ;IACA,IAAI,CAACC,WAAW,GAAG,CAAC;MAAEC,KAAK,EAAEnG,MAAM,CAACgB,mBAAmB;MAAE6C,OAAO,EAAE,IAAI,CAAC7C;IAAoB,CAAC,EACxF;MAAEmF,KAAK,EAAEnG,MAAM,CAAC2F,YAAY;MAAE9B,OAAO,EAAE,IAAI,CAAC4B;IAAW,CAAC,EACxD;MAAEU,KAAK,EAAEnG,MAAM,CAACoG,YAAY;MAAEvC,OAAO,EAAE,IAAI,CAACpB;IAAiB,CAAC,EAC9D;MAAE0D,KAAK,EAAEnG,MAAM,CAACqG,mBAAmB;MAAExC,OAAO,EAAE,IAAI,CAACgB;IAAkB,CAAC,EACtE;MAAEsB,KAAK,EAAEnG,MAAM,CAACsG,KAAK;MAAEzC,OAAO,EAAE,IAAI,CAAC0C;IAAa,CAAC,EACnD;MAAEJ,KAAK,EAAEnG,MAAM,CAACwG,eAAe;MAAE3C,OAAO,EAAE,IAAI,CAAC4C;IAAiB,CAAC,EACjE;MAAEN,KAAK,EAAEnG,MAAM,CAAC0G,UAAU;MAAE7C,OAAO,EAAE,IAAI,CAAC6C;IAAW,CAAC,EACtD;MAAEP,KAAK,EAAEnG,MAAM,CAAC2G,WAAW;MAAE9C,OAAO,EAAE,IAAI,CAAC+C;IAAiB,CAAC,EAC7D;MAAET,KAAK,EAAEnG,MAAM,CAAC6G,OAAO;MAAEhD,OAAO,EAAE,IAAI,CAACgD;IAAQ,CAAC,CAAC;IACrD9G,sBAAsB,CAAC,IAAI,CAACK,MAAM,EAAE,IAAI,CAAC8F,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC;EACrE,CAAC;EACD;AACJ;AACA;AACA;EACI/F,IAAI,CAACc,SAAS,CAAC6F,mBAAmB,GAAG,YAAY;IAC7C,IAAI,IAAI,CAAC1G,MAAM,CAAC6F,WAAW,EAAE;MACzB;IACJ;IACAlG,sBAAsB,CAAC,IAAI,CAACK,MAAM,EAAE,IAAI,CAAC8F,WAAW,EAAE,KAAK,CAAC;EAChE,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI/F,IAAI,CAACc,SAAS,CAAC4F,OAAO,GAAG,YAAY;IACjC,IAAI,CAACpG,cAAc,GAAG,KAAK;IAC3B,IAAIsG,WAAW,GAAG,IAAI,CAAC3G,MAAM,CAAC4G,OAAO;IACrC,IAAI,CAACD,WAAW,IAAK,CAACA,WAAW,CAACE,aAAa,CAAC,GAAG,GAAG/G,QAAQ,CAACgH,UAAU,CAAC,IAAI,CAACH,WAAW,CAACE,aAAa,CAAC,GAAG,GAAG/G,QAAQ,CAACiH,WAAW,CAAE,EAAE;MACnI;IACJ;IACA,IAAI,IAAI,CAAC/G,MAAM,CAAC4G,OAAO,CAACC,aAAa,CAAC,cAAc,CAAC,CAACG,sBAAsB,CAAC,cAAc,CAAC,CAACvF,MAAM,EAAE;MACjG,IAAI,CAACzB,MAAM,CAAC4G,OAAO,CAACC,aAAa,CAAC,cAAc,CAAC,CAACI,KAAK,CAACC,OAAO,GAAG,MAAM;IAC5E;IACA;IACA,IAAI,CAAC,IAAI,CAAClH,MAAM,CAACmH,UAAU,KAAK,IAAI,CAACnH,MAAM,CAAC6F,WAAW,IAAI,CAAC,IAAI,CAAC7F,MAAM,CAACgD,YAAY,CAAC,EAAE;MACnF,IAAI,CAACkC,YAAY,CAAC,CAAC;IACvB;IACA,IAAI,CAAC7E,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACqG,mBAAmB,CAAC,CAAC;EAC9B,CAAC;EACD3G,IAAI,CAACc,SAAS,CAAC2F,gBAAgB,GAAG,UAAUlE,CAAC,EAAE;IAC3C,IAAIA,CAAC,CAACG,WAAW,KAAK,SAAS,EAAE;MAC7B,IAAI,CAAC4B,eAAe,CAAC,CAAC;MACtB,IAAI,CAACgC,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAAC7E,WAAW,GAAG,IAAI;IAC3B;EACJ,CAAC;EACDzB,IAAI,CAACc,SAAS,CAACsF,YAAY,GAAG,UAAU7D,CAAC,EAAE;IACvC,IAAIQ,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAI,CAACO,aAAa,GAAG,IAAI;IACzB,IAAI,CAAC6G,iBAAiB,CAAC9E,CAAC,CAAC;IACzB,IAAIsC,MAAM,GAAGzF,OAAO,CAACmD,CAAC,CAACsC,MAAM,EAAE,eAAe,CAAC;IAC/C,IAAIA,MAAM,IAAI,CAACtC,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,gBAAgB,CAAC,IACxD,CAAEzC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,WAAW,CAAE,IACzC,CAAC/E,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,YAAY,CAAC,IAC1C,CAAC/E,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,cAAc,CAAC,IAC5C,CAAC/E,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,iBAAiB,CAAC,IAC/C,CAAC3H,YAAY,CAAC4C,CAAC,CAACsC,MAAM,EAAE,qBAAqB,CAAC,IAC9C,EAAE9B,IAAI,CAACwE,cAAc,IAAIxE,IAAI,CAACyE,iBAAiB,CAACC,oBAAoB,IAChElF,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,cAAc,CAAC,CAAC,EAAE;MAClD,IAAII,MAAM,GAAG,IAAI,CAACzH,MAAM;MACxB,IAAI0H,MAAM,GAAGD,MAAM,CAACE,cAAc,CAAC/C,MAAM,CAACiC,aAAa,CAAC,kBAAkB,CAAC,CAACe,YAAY,CAAC,cAAc,CAAC,CAAC;MACzG,IAAIF,MAAM,CAAChF,IAAI,KAAK,UAAU,EAAE;QAC5B,IAAI,CAACmF,YAAY,CAACjD,MAAM,EAAEtC,CAAC,EAAEoF,MAAM,CAAC;QACpC,IAAI1I,OAAO,CAAC8I,QAAQ,EAAE;UAClB,IAAI,CAACC,SAAS,CAACzF,CAAC,CAAC;QACrB;MACJ;IACJ;IACA,IAAIsC,MAAM,EAAE;MACRA,MAAM,CAACxF,SAAS,CAAC4I,MAAM,CAAC,WAAW,CAAC;IACxC;IACA,IAAItI,YAAY,CAAC4C,CAAC,CAACsC,MAAM,EAAE,mBAAmB,CAAC,IAC3ClF,YAAY,CAAC4C,CAAC,CAACsC,MAAM,EAAE,oBAAoB,CAAC,EAAE;MAC9C,IAAIqD,MAAM,GAAG9I,OAAO,CAACmD,CAAC,CAACsC,MAAM,EAAE,iBAAiB,CAAC,CAACgD,YAAY,CAAC,KAAK,CAAC;MACrE,IAAI1G,SAAS,GAAGhC,iBAAiB,CAACQ,YAAY,CAAC4C,CAAC,CAACsC,MAAM,EAAE,oBAAoB,CAAC,CAAC,GAC3E,WAAW,GAAG,YAAY;MAC9B,IAAI,CAAC/B,UAAU,CAACC,IAAI,CAAC6E,cAAc,CAACM,MAAM,CAAC,CAACjH,KAAK,EAAEE,SAAS,EAAE,KAAK,CAAC;IACxE;EACJ,CAAC;EACDnB,IAAI,CAACc,SAAS,CAACyF,UAAU,GAAG,UAAUhE,CAAC,EAAE;IACrC,IAAI4F,GAAG,GAAG5F,CAAC,CAACsC,MAAM;IAClB,IAAI,CAAC,IAAI,CAAC5E,MAAM,CAACmI,MAAM,KAAK7F,CAAC,CAAC8F,MAAM,KAAK,OAAO,IAAI9F,CAAC,CAAC8F,MAAM,KAAK,WAAW,IAAI9F,CAAC,CAAC8F,MAAM,KAAK,YAAY,CAAC,IACnGjJ,OAAO,CAAC+I,GAAG,EAAE,eAAe,CAAC,EAAE;MAClC,IAAItD,MAAM,GAAG,IAAI,CAACnE,KAAK,CAAC4H,iBAAiB,CAAC,CAAC;MAC3C,IAAInJ,iBAAiB,CAAC0F,MAAM,CAAC,IAAI,CAACA,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,cAAc,CAAC,IACpE,CAACzC,MAAM,CAACiC,aAAa,CAAC,kBAAkB,CAAC,EAAE;QAC9C;MACJ;MACA,IAAIjB,GAAG,GAAG,IAAI,CAAC5F,MAAM,CAAC2H,cAAc,CAAC/C,MAAM,CAACiC,aAAa,CAAC,kBAAkB,CAAC,CAACe,YAAY,CAAC,cAAc,CAAC,CAAC;MAC3G,IAAI,CAACC,YAAY,CAACjD,MAAM,EAAEtC,CAAC,EAAEsD,GAAG,CAAC;IACrC;EACJ,CAAC;EACD7F,IAAI,CAACc,SAAS,CAACgH,YAAY,GAAG,UAAUjD,MAAM,EAAEtC,CAAC,EAAEgG,MAAM,EAAE;IACvD,IAAIxF,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAIgB,KAAK,GAAGsH,MAAM,CAACtH,KAAK;IACxB,IAAI,CAACT,aAAa,GAAG+B,CAAC,CAACsC,MAAM;IAC7B,IAAI1D,SAAS,GAAG,CAAC0D,MAAM,CAACoC,sBAAsB,CAAC,aAAa,CAAC,CAACvF,MAAM,GAAG,WAAW,GAC9E,YAAY;IAChB,IAAI,CAACD,WAAW,GAAGc,CAAC,CAACiG,OAAO,IAAI,IAAI,CAACC,oBAAoB,IACpDC,SAAS,CAACC,SAAS,CAAClE,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAIlC,CAAC,CAACqG,OAAQ;IAC/D,IAAIrG,CAAC,CAACsG,QAAQ,IAAK,IAAI,CAAC3I,YAAY,CAAC4I,WAAW,IAAIjE,MAAM,CAACoC,sBAAsB,CAAC,cAAc,CAAC,CAACvF,MAAM,IACjG,EAAEqB,IAAI,CAACzB,aAAa,CAACC,OAAO,CAACkD,OAAO,CAACxD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;MACtD,IAAI,CAACoE,gBAAgB,CAACpE,KAAK,CAAC;IAChC,CAAC,MACI;MACD,IAAI,CAAC6B,UAAU,CAAC7B,KAAK,EAAEE,SAAS,EAAE,IAAI,CAACM,WAAW,CAAC;IACvD;EACJ,CAAC;EACDzB,IAAI,CAACc,SAAS,CAACkH,SAAS,GAAG,UAAUzF,CAAC,EAAE;IACpC,IAAIsC,MAAM,GAAGzF,OAAO,CAACmD,CAAC,CAACsC,MAAM,EAAE,eAAe,CAAC;IAC/C,IAAI,IAAI,CAAC5E,MAAM,CAACqD,iBAAiB,KAAK,CAACnE,iBAAiB,CAAC0F,MAAM,CAAC,IAAI,IAAI,CAAC5E,MAAM,CAACiD,iBAAiB,CAAC,CAAC,CAAC,EAAE;MAClG3D,iBAAiB,CAAC,IAAI,CAACU,MAAM,CAAC4G,OAAO,CAACC,aAAa,CAAC,cAAc,CAAC,EAAEvE,CAAC,EAAE,wCAAwC,IAAI,IAAI,CAACpC,aAAa,CAACuB,MAAM,GAAG,CAAC,GAAG,gBAAgB,GAAG,EAAE,CAAC,CAAC;IAC/K;EACJ,CAAC;EACD1B,IAAI,CAACc,SAAS,CAACuG,iBAAiB,GAAG,UAAU9E,CAAC,EAAE;IAC5C,IAAIsC,MAAM,GAAGtC,CAAC,CAACsC,MAAM;IACrB,IAAIzF,OAAO,CAACyF,MAAM,EAAE,eAAe,CAAC,IAAItC,CAAC,CAACsC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAACvH,QAAQ,CAACgJ,OAAO,CAAC,IACjF3J,OAAO,CAACyF,MAAM,EAAE,cAAc,CAAC,EAAE;MACjC,IAAIA,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,cAAc,CAAC,EAAE;QAC3C,IAAI,CAACzC,MAAM,CAACxF,SAAS,CAACiI,QAAQ,CAAC,eAAe,CAAC,EAAE;UAC7CzC,MAAM,CAACxF,SAAS,CAAC2J,GAAG,CAAC,eAAe,CAAC;UACrC,IAAI,CAACP,oBAAoB,GAAG,IAAI;QACpC,CAAC,MACI;UACD5D,MAAM,CAACxF,SAAS,CAAC4I,MAAM,CAAC,eAAe,CAAC;UACxC,IAAI,CAACQ,oBAAoB,GAAG,KAAK;UACjC,IAAI,CAACxI,MAAM,CAAC4G,OAAO,CAACC,aAAa,CAAC,cAAc,CAAC,CAACI,KAAK,CAACC,OAAO,GAAG,MAAM;QAC5E;MACJ;IACJ,CAAC,MACI;MACD,IAAI,CAAClH,MAAM,CAAC4G,OAAO,CAACC,aAAa,CAAC,cAAc,CAAC,CAACI,KAAK,CAACC,OAAO,GAAG,MAAM;IAC5E;EACJ,CAAC;EACDnH,IAAI,CAACc,SAAS,CAACmE,YAAY,GAAG,YAAY;IACtC,IAAIlC,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAIgJ,MAAM;IACV,IAAIC,aAAa;IACjB,IAAI9D,IAAI,GAAG,IAAI,CAAClF,YAAY,CAACqB,OAAO;IACpC,IAAI4H,UAAU,GAAG,IAAI,CAAClJ,MAAM,CAACwF,UAAU,CAAC,CAAC,CAAC2D,GAAG,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACpI,KAAK;IAAE,CAAC,CAAC;IAC/E,KAAK,IAAIW,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGuD,IAAI,CAAC1D,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MAC7CqH,MAAM,GAAGlG,IAAI,CAACuG,sBAAsB,CAAClE,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC;MACnD,IAAIkI,UAAU,CAAC1E,OAAO,CAACW,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI9B,iBAAiB,CAAC8J,MAAM,CAAC,EAAE;QACvE;MACJ;MACA,IAAI,CAAC1I,IAAI,CAACgJ,OAAO,CAACN,MAAM,EAAG7D,IAAI,CAACxD,CAAC,CAAC,CAACT,SAAS,CAAEqI,WAAW,CAAC,CAAC,CAAC;MAC5D,IAAIpE,IAAI,CAAC1D,MAAM,GAAG,CAAC,EAAE;QACjBuH,MAAM,CAACnC,aAAa,CAAC,kBAAkB,CAAC,CAAC2C,YAAY,CAAC,IAAI,CAACxJ,MAAM,CAACyJ,aAAa,CAAC,MAAM,EAAE;UAAEC,SAAS,EAAE,cAAc;UAAEC,SAAS,EAAE,CAAChI,CAAC,GAAG,CAAC,EAAEiI,QAAQ,CAAC;QAAE,CAAC,CAAC,EAAEZ,MAAM,CAACnC,aAAa,CAAC,eAAe,CAAC,CAAC;MACjM;MACAoC,aAAa,GAAGD,MAAM,CAACnC,aAAa,CAAC,kBAAkB,CAAC;MACxD,IAAI1B,IAAI,CAACxD,CAAC,CAAC,CAACT,SAAS,KAAK,WAAW,EAAE;QACnC9B,SAAS,CAAC6J,aAAa,EAAE,CAAC,aAAa,EAAE,kBAAkB,CAAC,EAAE,EAAE,CAAC;MACrE,CAAC,MACI;QACD7J,SAAS,CAAC6J,aAAa,EAAE,CAAC,cAAc,EAAE,mBAAmB,CAAC,EAAE,EAAE,CAAC;MACvE;IACJ;EACJ,CAAC;EACDlJ,IAAI,CAACc,SAAS,CAACiD,eAAe,GAAG,UAAU+F,QAAQ,EAAE;IACjD,IAAI/G,IAAI,GAAG,IAAI,CAAC9C,MAAM;IACtB,IAAIgJ,MAAM;IACV,IAAI7D,IAAI,GAAG,IAAI,CAAClF,YAAY,CAACqB,OAAO;IACpC,IAAI4H,UAAU,GAAG,IAAI,CAAClJ,MAAM,CAACwF,UAAU,CAAC,CAAC,CAAC2D,GAAG,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACpI,KAAK;IAAE,CAAC,CAAC;IAC/E,KAAK,IAAIW,CAAC,GAAGkI,QAAQ,GAAGA,QAAQ,GAAG,CAAC,EAAEjI,GAAG,GAAG,CAAC1C,iBAAiB,CAAC2K,QAAQ,CAAC,GAAGA,QAAQ,GAAG,CAAC,GAAG1E,IAAI,CAAC1D,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MACjHqH,MAAM,GAAGlG,IAAI,CAACuG,sBAAsB,CAAClE,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC;MACnD,IAAI9B,iBAAiB,CAAC8J,MAAM,CAAC,IAAKlG,IAAI,CAACyB,aAAa,IAAIzB,IAAI,CAACzB,aAAa,CAACC,OAAO,CAACkD,OAAO,CAACW,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC,GAAG,CAAC,CAAC,IAC1G,CAACgI,MAAM,CAACnC,aAAa,CAAC,kBAAkB,CAAE,EAAE;QAC5C;MACJ;MACA,IAAIqC,UAAU,CAAC1E,OAAO,CAACW,IAAI,CAACxD,CAAC,CAAC,CAACX,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;QAC1C;MACJ;MACA,IAAI,CAACV,IAAI,CAACgJ,OAAO,CAACN,MAAM,EAAE,MAAM,CAAC;MACjC5J,SAAS,CAAC4J,MAAM,CAACnC,aAAa,CAAC,kBAAkB,CAAC,EAAE,EAAE,EAAE,CAAC,cAAc,EAAE,mBAAmB,EAAE,aAAa,EAAE,kBAAkB,CAAC,CAAC;MACjI,IAAImC,MAAM,CAACnC,aAAa,CAAC,eAAe,CAAC,EAAE;QACvCmC,MAAM,CAACnC,aAAa,CAAC,kBAAkB,CAAC,CAACiD,WAAW,CAACd,MAAM,CAACnC,aAAa,CAAC,eAAe,CAAC,CAAC;MAC/F;IACJ;EACJ,CAAC;EACD9G,IAAI,CAACc,SAAS,CAACmB,sBAAsB,GAAG,UAAUhB,KAAK,EAAE;IACrD,KAAK,IAAIW,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAAC3B,YAAY,CAACqB,OAAO,CAACG,MAAM,EAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MAClE,IAAI,IAAI,CAAC1B,YAAY,CAACqB,OAAO,CAACK,CAAC,CAAC,CAACX,KAAK,KAAKA,KAAK,EAAE;QAC9C,OAAO,IAAI,CAACf,YAAY,CAACqB,OAAO,CAACK,CAAC,CAAC;MACvC;IACJ;IACA,OAAO,KAAK;EAChB,CAAC;EACD5B,IAAI,CAACc,SAAS,CAACkJ,cAAc,GAAG,YAAY;IACxC,IAAIb,UAAU,GAAG,IAAI,CAAClJ,MAAM,CAACwF,UAAU,CAAC,CAAC,CAAC2D,GAAG,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACpI,KAAK;IAAE,CAAC,CAAC;IAC/E,KAAK,IAAIyE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACxF,aAAa,EAAEuF,EAAE,GAAGC,EAAE,CAACjE,MAAM,EAAEgE,EAAE,EAAE,EAAE;MAC5D,IAAIG,GAAG,GAAGF,EAAE,CAACD,EAAE,CAAC;MAChB,IAAIyD,UAAU,CAAC1E,OAAO,CAACoB,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QAChC;MACJ;MACA,IAAIoD,MAAM,GAAG,IAAI,CAAChJ,MAAM,CAACqJ,sBAAsB,CAACzD,GAAG,CAAC;MACpD,IAAI,CAACtF,IAAI,CAACgJ,OAAO,CAACN,MAAM,EAAE,IAAI,CAAChH,sBAAsB,CAAC4D,GAAG,CAAC,CAAC1E,SAAS,CAAC;IACzE;EACJ,CAAC;EACDnB,IAAI,CAACc,SAAS,CAACwF,gBAAgB,GAAG,UAAU2D,MAAM,EAAE;IAChD,IAAIA,MAAM,KAAK,KAAK,CAAC,EAAE;MAAEA,MAAM,GAAG;QAAEzH,IAAI,EAAE;UAAE0H,QAAQ,EAAE;QAAM;MAAE,CAAC;IAAE;IACjE,IAAI,CAACD,MAAM,CAACzH,IAAI,CAAC0H,QAAQ,EAAE;MACvB,IAAI,CAACnG,eAAe,CAAC,CAAC;MACtB,IAAI,CAACtC,WAAW,GAAG,IAAI;MACvB,IAAI,CAACsC,eAAe,CAAC,CAAC;MACtB,IAAI,CAACkB,YAAY,CAAC,CAAC;MACnB,IAAI,CAACxD,WAAW,GAAG,KAAK;MACxB,IAAI,CAACuI,cAAc,CAAC,CAAC;IACzB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIhK,IAAI,CAACc,SAAS,CAACqJ,cAAc,GAAG,UAAUC,MAAM,EAAE;IAC9C,IAAI,CAACC,wBAAwB,CAACC,cAAc,GAAGF,MAAM;IACrD,IAAI,CAACC,wBAAwB,CAACE,oBAAoB,CAAC,CAAC;EACxD,CAAC;EACD,OAAOvK,IAAI;AACf,CAAC,CAAC,CAAE;AACJ,SAASA,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}