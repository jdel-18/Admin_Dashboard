{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualContentRenderer\n *\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */function (_super) {\n  __extends(VirtualContentRenderer, _super);\n  function VirtualContentRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.prevHeight = 0;\n    /** @hidden */\n    _this.startIndex = 0;\n    _this.preStartIndex = 0;\n    _this.preventEvent = false;\n    _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n    /** @hidden */\n    _this.offsets = {};\n    _this.tmpOffsets = {};\n    /** @hidden */\n    _this.virtualEle = new VirtualElementHandler();\n    _this.offsetKeys = [];\n    _this.isFocused = false;\n    _this.isSelection = false;\n    _this.isBottom = false;\n    _this.rndrCount = 0;\n    _this.empty = undefined;\n    _this.isCancel = false;\n    _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save'];\n    _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n    /** @hidden */\n    _this.virtualData = {};\n    _this.emptyRowData = {};\n    _this.vfColIndex = [];\n    _this.frzIdx = 1;\n    _this.isContextMenuOpen = false;\n    _this.isSelectionScroll = false;\n    _this.validationCheck = false;\n    _this.locator = locator;\n    _this.eventListener('on');\n    _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n    _this.vgenerator = _this.generator;\n    return _this;\n  }\n  VirtualContentRenderer.prototype.renderTable = function () {\n    this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n    _super.prototype.renderTable.call(this);\n    this.virtualEle.table = this.getTable();\n    this.virtualEle.content = this.content = this.getPanel().querySelector('.' + literals.content);\n    this.virtualEle.renderWrapper(this.parent.height);\n    this.virtualEle.renderPlaceHolder();\n    this.virtualEle.wrapper.style.position = 'absolute';\n    var debounceEvent = this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline;\n    var opt = {\n      container: this.content,\n      pageHeight: this.getBlockHeight() * 2,\n      debounceEvent: debounceEvent,\n      axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n    };\n    this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n  };\n  VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n    this.getTable().appendChild(tbody);\n    this.virtualEle.adjustTable(0, 0);\n  };\n  VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n    var blockIndex = args.virtualInfo.blockIndexes;\n    var colsIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n    if (!args.renderMovableContent) {\n      args.virtualInfo.columnIndexes = [];\n    }\n    var recordslength = this.parent.getCurrentViewRecords().length;\n    var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n    var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n    args.virtualInfo.blockIndexes = blockIndex;\n    args.virtualInfo.columnIndexes = colsIndex;\n    args.virtualInfo.page = page;\n    return virtualRows.splice(0, this.parent.frozenRows);\n  };\n  VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n    this.scrollAfterEdit();\n    if (this.parent.enablePersistence) {\n      this.parent.scrollPosition = scrollArgs.offset;\n    }\n    if (this.preventEvent || this.parent.isDestroyed) {\n      this.preventEvent = false;\n      return;\n    }\n    if (isNullOrUndefined(document.activeElement)) {\n      this.isFocused = false;\n    } else {\n      this.isFocused = this.content === closest(document.activeElement, '.' + literals.content) || this.content === document.activeElement;\n    }\n    var info = scrollArgs.sentinel;\n    var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n    if (isGroupAdaptive(this.parent)) {\n      if (viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString()) {\n        return;\n      } else {\n        viewInfo.event = 'refresh-virtual-block';\n        if (!isNullOrUndefined(viewInfo.offsets)) {\n          viewInfo.offsets.top = this.content.scrollTop;\n        }\n        this.parent.pageSettings.currentPage = viewInfo.page;\n        this.parent.notify(viewInfo.event, {\n          requestType: 'virtualscroll',\n          virtualInfo: viewInfo,\n          focusElement: scrollArgs.focusElement\n        });\n        return;\n      }\n    }\n    if (this.prevInfo && (info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString() || info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString())) {\n      if (Browser.isIE) {\n        this.parent.hideSpinner();\n      }\n      this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n      if (info.axis === 'Y') {\n        this.restoreEdit();\n      }\n      return;\n    }\n    this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n    this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n    this.requestType = 'virtualscroll';\n    this.parent.notify(viewInfo.event, {\n      requestType: 'virtualscroll',\n      virtualInfo: viewInfo,\n      focusElement: scrollArgs.focusElement\n    });\n  };\n  VirtualContentRenderer.prototype.block = function (blk) {\n    return this.vgenerator.isBlockAvailable(blk);\n  };\n  VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n    var isBlockAdded = false;\n    var tempBlocks = [];\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.preStartIndex,\n      endIndex: this.preEndIndex\n    };\n    infoType.page = this.getPageFromTop(e.top, infoType);\n    infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n    infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n    var blocks = this.ensureBlocks(infoType);\n    if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n      // To avoid dupilcate row index problem in key focus support\n      var newBlock = blocks[blocks.length - 1];\n      if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n        isBlockAdded = true;\n      }\n    }\n    infoType.blockIndexes = blocks;\n    infoType.loadNext = !blocks.filter(function (val) {\n      return tempBlocks.indexOf(val) === -1;\n    }).every(this.block.bind(this));\n    infoType.event = infoType.loadNext || infoType.loadSelf ? modelChanged : refreshVirtualBlock;\n    infoType.nextInfo = infoType.loadNext ? {\n      page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1))\n    } : {};\n    if (isBlockAdded) {\n      infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n    }\n    if (this.activeKey === 'downArrow') {\n      var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n      if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n        infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n      }\n    }\n    infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n    if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n      infoType.event = refreshVirtualBlock;\n    }\n    return infoType;\n  };\n  VirtualContentRenderer.prototype.setKeyboardNavIndex = function () {\n    this.blazorDataLoad = true;\n    if (this.activeKey === 'downArrow' || this.activeKey === 'upArrow') {\n      this.blzRowIndex = this.activeKey === 'downArrow' ? this.rowIndex + 1 : this.rowIndex - 1;\n      document.activeElement.blur();\n    }\n  };\n  VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n    var _this = this;\n    var index = info.blockIndexes[info.block];\n    var mIdx;\n    var old = index;\n    var max = Math.max;\n    var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n    if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n      // To avoid frozen content white space issue\n      if (info.sentinelInfo.axis === 'X' || info.sentinelInfo.axis === 'Y' && info.page === this.prevInfo.page) {\n        indexes = this.prevInfo.blockIndexes;\n      }\n    }\n    indexes = indexes.filter(function (val, ind) {\n      return indexes.indexOf(val) === ind;\n    });\n    if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n      return indexes;\n    }\n    if (info.loadSelf || info.direction === 'down' && this.isEndBlock(old)) {\n      indexes = this.vgenerator.getBlockIndexes(info.page);\n    }\n    indexes.some(function (val, ind) {\n      var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n      if (result) {\n        mIdx = ind;\n      }\n      return result;\n    });\n    if (mIdx !== undefined) {\n      indexes = indexes.slice(0, mIdx + 1);\n      if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n        indexes = [indexes[0] - 1, indexes[0]];\n      }\n    }\n    return indexes;\n  };\n  // tslint:disable-next-line:max-func-body-length\n  VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n    var _this = this;\n    // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n    var isFrozen = this.parent.isFrozenGrid();\n    var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n    var colVFtable = this.parent.enableColumnVirtualization && isFrozen;\n    this.checkFirstBlockColIndexes(e);\n    var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page && this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n    this.prevInfo = this.prevInfo || e.virtualInfo;\n    var cBlock = info.columnIndexes[0] - 1;\n    if (colVFtable && info.columnIndexes[0] === frzCols) {\n      cBlock = info.columnIndexes[0] - frzCols - 1;\n    }\n    var cOffset = this.getColumnOffset(cBlock);\n    var width;\n    var blocks = info.blockIndexes;\n    if (this.parent.groupSettings.columns.length) {\n      this.refreshOffsets();\n    }\n    if (this.parent.height === '100%') {\n      this.parent.element.style.height = '100%';\n    }\n    var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height : this.parent.element.getBoundingClientRect().height;\n    if (!this.requestTypes.some(function (value) {\n      return value === _this.requestType;\n    })) {\n      var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n      this.virtualEle.adjustTable(colVFtable ? 0 : cOffset, translate);\n      if (colVFtable) {\n        this.virtualEle.adjustMovableTable(cOffset, 0);\n      }\n    }\n    if (this.parent.enableColumnVirtualization) {\n      this.header.virtualEle.adjustTable(colVFtable ? 0 : cOffset, 0);\n      if (colVFtable) {\n        this.header.virtualEle.adjustMovableTable(cOffset, 0);\n      }\n    }\n    if (this.parent.enableColumnVirtualization) {\n      var cIndex = info.columnIndexes;\n      width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n      if (colVFtable) {\n        this.header.virtualEle.setMovableWrapperWidth(width);\n      } else {\n        this.header.virtualEle.setWrapperWidth(width);\n      }\n    }\n    if (colVFtable) {\n      this.virtualEle.setMovableWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n    } else {\n      this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n    }\n    if (!isNullOrUndefined(target.parentNode)) {\n      remove(target);\n    }\n    var tbody;\n    if (isFrozen) {\n      if (e.renderFrozenRightContent) {\n        tbody = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n      } else if (!e.renderMovableContent) {\n        tbody = this.parent.getFrozenVirtualContent().querySelector(literals.tbody);\n      } else if (e.renderMovableContent) {\n        tbody = this.parent.getMovableVirtualContent().querySelector(literals.tbody);\n      }\n    } else {\n      tbody = this.parent.element.querySelector('.' + literals.content).querySelector(literals.tbody);\n    }\n    if (tbody) {\n      remove(tbody);\n      target = null;\n    }\n    var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n    if (!isReact) {\n      target = this.parent.createElement(literals.tbody);\n      target.appendChild(newChild);\n    } else {\n      target = newChild;\n    }\n    if (this.parent.frozenRows && e.requestType === 'virtualscroll' && this.parent.pageSettings.currentPage === 1) {\n      for (var i = 0; i < this.parent.frozenRows; i++) {\n        target.children[0].remove();\n      }\n    }\n    if (isFrozen) {\n      if (e.renderFrozenRightContent) {\n        this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.' + literals.table).appendChild(target);\n        this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n      } else if (!e.renderMovableContent) {\n        this.parent.getFrozenVirtualContent().querySelector('.' + literals.table).appendChild(target);\n      } else if (e.renderMovableContent) {\n        this.parent.getMovableVirtualContent().querySelector('.' + literals.table).appendChild(target);\n        if (this.parent.getFrozenMode() !== literals.leftRight) {\n          this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        }\n      }\n      if (this.vfColIndex.length) {\n        e.virtualInfo.columnIndexes = info.columnIndexes = extend([], this.vfColIndex);\n        this.vfColIndex = e.renderMovableContent ? [] : this.vfColIndex;\n      }\n    } else {\n      this.getTable().appendChild(target);\n      this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n    }\n    if (this.parent.groupSettings.columns.length) {\n      if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n        var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n        this.preventEvent = true;\n        var sTop = this.content.scrollTop;\n        this.content.scrollTop = sTop + blk;\n      }\n      this.setVirtualHeight();\n      this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n    }\n    this.prevInfo = info;\n    if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n      this.content.focus();\n    }\n    var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n    if (this.isBottom) {\n      this.isBottom = false;\n      this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n    }\n    if (this.parent.pageSettings.currentPage === lastPage && blocks.length === 1) {\n      this.isBottom = true;\n      this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n    }\n    if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n      this.parent.notify(events.autoCol, {});\n    }\n    this.focusCell(e);\n    this.restoreEdit(e);\n    this.restoreAdd(e);\n    this.ensureSelectedRowPosition();\n    this.validationScrollLeft(e, isFrozen);\n    if (!this.initialRowTop) {\n      var gridTop = this.parent.element.getBoundingClientRect().top;\n      this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n    }\n    var tableName = e.tableName;\n    var isLoaded = this.parent.getFrozenMode() === 'Left-Right' ? tableName === 'frozen-right' : tableName === 'movable';\n    if (!isFrozen || isLoaded) {\n      this.vgenerator.startIndex = null;\n      this.vgenerator.currentInfo = {};\n      this.vgenerator.includePrevPage = null;\n    }\n  };\n  VirtualContentRenderer.prototype.validationScrollLeft = function (e, isFrozen) {\n    var left = this.parent.getFrozenColumns();\n    var table = this.parent.getFrozenMode();\n    var trigger = !isFrozen || e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n    if (this.validationCheck && trigger) {\n      if (this.validationCol) {\n        var offset = this.vgenerator.cOffsets[this.validationCol.index - this.parent.getVisibleFrozenColumns() - 1];\n        this.validationCol = null;\n        if (this.parent.isFrozenGrid()) {\n          this.movableContent.scrollLeft = offset;\n        } else {\n          this.content.scrollLeft = offset;\n        }\n      } else {\n        this.validationCheck = false;\n        this.parent.editModule.editFormValidate();\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.ensureSelectedRowPosition = function () {\n    if (!this.isSelection && this.isSelectionScroll && !isNullOrUndefined(this.selectRowIndex)) {\n      this.isSelectionScroll = false;\n      var row = this.parent.getRowByIndex(this.selectRowIndex);\n      if (row && !this.isRowInView(row)) {\n        this.rowSelected({\n          rowIndex: this.selectRowIndex,\n          row: row\n        }, true);\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.checkFirstBlockColIndexes = function (e) {\n    if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && e.virtualInfo.columnIndexes[0] === 0) {\n      var indexes = [];\n      var frozenCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n      if (!e.renderMovableContent && e.virtualInfo.columnIndexes.length > frozenCols) {\n        this.vfColIndex = e.virtualInfo.columnIndexes;\n        for (var i = 0; i < frozenCols; i++) {\n          indexes.push(i);\n        }\n        e.virtualInfo.columnIndexes = indexes;\n      } else if (e.renderMovableContent) {\n        if (!this.vfColIndex.length) {\n          this.vfColIndex = extend([], e.virtualInfo.columnIndexes);\n        }\n        e.virtualInfo.columnIndexes = extend([], this.vfColIndex);\n        e.virtualInfo.columnIndexes.splice(0, frozenCols);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.focusCell = function (e) {\n    if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n      return;\n    }\n    var row = this.parent.getRowByIndex(this.rowIndex);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var cell = row.cells[this.cellIndex];\n    cell.focus({\n      preventScroll: true\n    });\n    this.parent.selectRow(parseInt(row.getAttribute(literals.ariaRowIndex), 10));\n    this.activeKey = this.empty;\n  };\n  VirtualContentRenderer.prototype.restoreEdit = function (e) {\n    if (this.isNormaledit) {\n      var left = this.parent.getFrozenColumns();\n      var isFrozen = e && this.parent.isFrozenGrid();\n      var table = this.parent.getFrozenMode();\n      var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n      if ((!isFrozen || isFrozen && trigger) && this.parent.editSettings.allowEditing && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n        var row = this.getRowByIndex(this.editedRowIndex);\n        var content = this.content;\n        var keys = Object.keys(this.virtualData);\n        var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n        if (isFrozen && isXaxis) {\n          row = this.parent.getMovableRowByIndex(this.editedRowIndex);\n          content = this.movableContent;\n        }\n        if (keys.length && row && !content.querySelector('.' + literals.editedRow)) {\n          var top_1 = row.getBoundingClientRect().top;\n          if (isXaxis || top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n            this.parent.isEdit = false;\n            this.parent.editModule.startEdit(row);\n          }\n        }\n        if (row && this.content.querySelector('.' + literals.editedRow) && !keys.length) {\n          var rowData = extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n          this.virtualData = this.getVirtualEditedData(rowData);\n        }\n      }\n      this.restoreAdd(e);\n    }\n  };\n  VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n    var editForms = [].slice.call(this.parent.element.getElementsByClassName('e-gridform'));\n    var isFormDestroyed = this.parent.editModule && this.parent.editModule.formObj && this.parent.editModule.formObj.isDestroyed;\n    if (!isFormDestroyed) {\n      for (var i = 0; i < editForms.length; i++) {\n        rowData = this.parent.editModule.getCurrentEditedData(editForms[i], rowData);\n      }\n    }\n    return rowData;\n  };\n  VirtualContentRenderer.prototype.restoreAdd = function (e) {\n    var left = this.parent.getFrozenColumns();\n    var isFrozen = e && this.parent.isFrozenGrid();\n    var table = this.parent.getFrozenMode();\n    var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n    var startAdd = isXaxis && isFrozen ? !(this.parent.getMovableVirtualHeader().querySelector('.' + literals.addedRow) || this.parent.getMovableVirtualContent().querySelector('.' + literals.addedRow)) : !this.parent.element.querySelector('.' + literals.addedRow);\n    var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n    if ((!isFrozen || isFrozen && trigger) && this.isNormaledit && this.isAdd && startAdd) {\n      var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n      var isBottom = this.parent.editSettings.newRowPosition === 'Bottom' && this.parent.pageSettings.currentPage === this.maxPage;\n      if (isTop || isBottom) {\n        this.parent.isEdit = false;\n        this.parent.addRecord();\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.onDataReady = function (e) {\n    if (!isNullOrUndefined(e.count)) {\n      this.count = e.count;\n      this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n    }\n    this.vgenerator.checkAndResetCache(e.requestType);\n    if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined].some(function (value) {\n      return e.requestType === value;\n    })) {\n      this.refreshOffsets();\n    }\n    this.setVirtualHeight();\n    this.resetScrollPosition(e.requestType);\n  };\n  /**\n   * @param {number} height - specifies the height\n   * @returns {void}\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n    var width = this.parent.enableColumnVirtualization ? this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n    if (this.parent.isFrozenGrid()) {\n      var virtualHeightTemp = this.parent.pageSettings.currentPage === 1 && Object.keys(this.offsets).length <= 2 ? this.offsets[1] : this.offsets[this.getTotalBlocks() - 2];\n      var scrollableElementHeight = this.content.clientHeight;\n      virtualHeightTemp = virtualHeightTemp > scrollableElementHeight ? virtualHeightTemp : 0;\n      // To overcome the white space issue in last page (instead of position absolute)\n      this.virtualEle.setVirtualHeight(virtualHeightTemp, width);\n    } else {\n      var virtualHeight = this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()];\n      this.virtualEle.setVirtualHeight(virtualHeight, width);\n    }\n    if (this.parent.enableColumnVirtualization) {\n      this.header.virtualEle.setVirtualHeight(1, width);\n      if (this.parent.isFrozenGrid()) {\n        this.virtualEle.setMovableVirtualHeight(1, width);\n        this.header.virtualEle.setMovableVirtualHeight(1, width);\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n    var _this = this;\n    var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    var page = 0;\n    this.offsetKeys.some(function (offset) {\n      var iOffset = Number(offset);\n      var border = sTop <= _this.offsets[offset] || iOffset === total && sTop > _this.offsets[offset];\n      if (border) {\n        if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2] && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n          iOffset = iOffset + 1;\n        }\n        info.block = iOffset % 2 === 0 ? 1 : 0;\n        page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n      }\n      return border;\n    });\n    return page;\n  };\n  VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n    if (info === undefined) {\n      info = {\n        page: this.getPageFromTop(sTop, {})\n      };\n      info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n    }\n    var block = (info.blockIndexes[0] || 1) - 1;\n    var translate = this.getOffset(block);\n    var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n    if (isOnenter) {\n      info = this.prevInfo;\n    }\n    var result = translate > sTop ? this.getOffset(block - 1) : endTranslate < sTop + cHeight ? this.getOffset(block + 1) : translate;\n    var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] - this.tmpOffsets[info.blockIndexes[0]];\n    var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    if (result + blockHeight > this.offsets[totalBlocks]) {\n      result -= result + blockHeight - this.offsets[totalBlocks];\n    }\n    return result;\n  };\n  VirtualContentRenderer.prototype.getOffset = function (block) {\n    return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n  };\n  VirtualContentRenderer.prototype.onEntered = function () {\n    var _this = this;\n    return function (element, current, direction, e, isWheel, check) {\n      if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n        _this.parent.showSpinner();\n      }\n      var colVFtable = _this.parent.enableColumnVirtualization && _this.parent.isFrozenGrid();\n      var xAxis = current.axis === 'X';\n      var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n      var height = _this.content.getBoundingClientRect().height;\n      var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n      if (xAxis && !colVFtable) {\n        var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n        var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n        x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n      }\n\n      var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n      _this.virtualEle.adjustTable(colVFtable ? 0 : x, Math.min(y, _this.offsets[_this.maxBlock]));\n      if (colVFtable) {\n        _this.virtualEle.adjustMovableTable(x, 0);\n      }\n      if (_this.parent.enableColumnVirtualization) {\n        _this.header.virtualEle.adjustTable(colVFtable ? 0 : x, 0);\n        if (colVFtable) {\n          _this.header.virtualEle.adjustMovableTable(x, 0);\n        }\n      }\n    };\n  };\n  VirtualContentRenderer.prototype.dataBound = function () {\n    this.parent.notify(events.refreshVirtualFrozenHeight, {});\n    if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n      this.parent.selectRow(this.selectedRowIndex);\n    } else {\n      this.activeKey = this.empty;\n    }\n  };\n  VirtualContentRenderer.prototype.rowSelected = function (args, isSelection) {\n    if ((this.isSelection || isSelection) && !this.isLastBlockRow(args.rowIndex)) {\n      var transform = getTransformValues(this.content.firstElementChild);\n      var gridTop = this.parent.element.getBoundingClientRect().top;\n      var rowTop = args.row.getBoundingClientRect().top - gridTop;\n      var height = this.content.getBoundingClientRect().height;\n      var isBottom = height < rowTop;\n      var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n      var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n      this.virtualEle.adjustTable(transform.width, translateY);\n      var lastRowTop = this.content.querySelector('tbody').lastElementChild.getBoundingClientRect().top - gridTop;\n      if (lastRowTop < height) {\n        translateY = translateY + (height - (args.row.getBoundingClientRect().top - gridTop));\n        this.virtualEle.adjustTable(transform.width, translateY - this.parent.getRowHeight() / 2);\n      }\n    }\n    this.isSelection = false;\n  };\n  VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    var startIdx = this.maxPage * this.parent.pageSettings.pageSize - visibleRowCount;\n    return index >= startIdx;\n  };\n  VirtualContentRenderer.prototype.refreshMaxPage = function () {\n    if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n      this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n    }\n  };\n  VirtualContentRenderer.prototype.setVirtualPageQuery = function (args) {\n    var row = this.parent.getContent().querySelector('.e-row');\n    if (row && this.parent.isManualRefresh && this.currentInfo.blockIndexes && this.currentInfo.blockIndexes.length === 3) {\n      this.vgenerator.startIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n      this.vgenerator.currentInfo = extend({}, this.currentInfo);\n      this.vgenerator.currentInfo.blockIndexes = this.currentInfo.blockIndexes.slice();\n      var includePrevPage = this.vgenerator.includePrevPage = this.currentInfo.blockIndexes[0] % 2 === 0;\n      if (includePrevPage) {\n        this.vgenerator.startIndex = this.vgenerator.startIndex - this.getBlockSize();\n        this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0] - 1);\n      } else {\n        this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length - 1] + 1);\n      }\n      var skip = (this.vgenerator.currentInfo.blockIndexes[0] - 1) * this.getBlockSize();\n      var take = this.vgenerator.currentInfo.blockIndexes.length * this.getBlockSize();\n      args.query.skip(skip);\n      args.query.take(take);\n      args.skipPage = true;\n    }\n  };\n  VirtualContentRenderer.prototype.eventListener = function (action) {\n    var _this = this;\n    this.parent[action](dataReady, this.onDataReady, this);\n    this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n    this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n    this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n    this.parent[action](events.virtaulCellFocus, this.virtualCellFocus, this);\n    this.parent[action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n    this.parent[action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n    this.parent[action](events.virtualScrollEdit, this.restoreEdit, this);\n    this.parent[action](events.virtualScrollEditSuccess, this.editSuccess, this);\n    this.parent[action](events.refreshVirtualCache, this.refreshCache, this);\n    this.parent[action](events.editReset, this.resetIsedit, this);\n    this.parent[action](events.getVirtualData, this.getVirtualData, this);\n    this.parent[action](events.virtualScrollEditCancel, this.editCancel, this);\n    this.parent[action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n    this.parent[action](events.setVirtualPageQuery, this.setVirtualPageQuery, this);\n    this.parent[action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n    this.parent[action](events.resetVirtualFocus, this.resetVirtualFocus, this);\n    this.parent[action](events.refreshVirtualEditFormCells, this.refreshCells, this);\n    this.parent[action](events.scrollToEdit, this.scrollToEdit, this);\n    var event = this.actions;\n    for (var i = 0; i < event.length; i++) {\n      this.parent[action](event[i] + \"-begin\", this.onActionBegin, this);\n    }\n    var fn = function () {\n      _this.observer.observe(function (scrollArgs) {\n        return _this.scrollListener(scrollArgs);\n      }, _this.onEntered());\n      var gObj = _this.parent;\n      if (gObj.enablePersistence && gObj.scrollPosition) {\n        _this.content.scrollTop = gObj.scrollPosition.top;\n        var scrollValues = {\n          direction: 'down',\n          sentinel: _this.observer.sentinelInfo.down,\n          offset: gObj.scrollPosition,\n          focusElement: gObj.element\n        };\n        _this.scrollListener(scrollValues);\n        if (gObj.enableColumnVirtualization) {\n          _this.content.scrollLeft = gObj.scrollPosition.left;\n        }\n      }\n      _this.parent.off(contentReady, fn);\n    };\n    this.parent.on(contentReady, fn, this);\n  };\n  VirtualContentRenderer.prototype.scrollToEdit = function (col) {\n    var isFrozen = this.parent.isFrozenGrid();\n    var allowScroll = true;\n    this.validationCheck = true;\n    if (this.isAdd && this.content.scrollTop > 0) {\n      allowScroll = false;\n      var keys = Object.keys(this.offsets);\n      this.content.scrollTop = this.parent.editSettings.newRowPosition === 'Top' ? 0 : this.offsets[keys.length - 1];\n    }\n    var row = this.parent.getRowByIndex(this.editedRowIndex);\n    if (!row && !isNullOrUndefined(this.editedRowIndex)) {\n      if (!row || !this.isRowInView(row)) {\n        var rowIndex = this.parent.getRowHeight();\n        var scrollTop = this.editedRowIndex * rowIndex;\n        if (!isNullOrUndefined(scrollTop)) {\n          allowScroll = false;\n          this.content.scrollTop = scrollTop;\n        }\n      }\n    }\n    if (col && allowScroll) {\n      var offset = this.vgenerator.cOffsets[col.index - this.parent.getVisibleFrozenColumns() - 1];\n      if (!this.parent.enableColumnVirtualization) {\n        var header = this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid=\"' + col.uid + '\"]');\n        offset = isFrozen ? header.parentElement.offsetLeft - this.parent.getFrozenVirtualHeader().offsetWidth : header.parentElement.offsetLeft;\n      }\n      if (isFrozen) {\n        this.parent.getMovableVirtualContent().scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n      } else {\n        this.content.scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n      }\n    }\n    if (col && !allowScroll) {\n      this.validationCol = col;\n    }\n  };\n  VirtualContentRenderer.prototype.refreshCells = function (rowObj) {\n    rowObj.cells = this.vgenerator.generateCells(rowObj.foreignKeyData);\n  };\n  VirtualContentRenderer.prototype.resetVirtualFocus = function (e) {\n    this.isCancel = e.isCancel;\n  };\n  /**\n   * @param {Object} data - specifies the data\n   * @param {Object} data.virtualData -specifies the data\n   * @param {boolean} data.isAdd - specifies isAdd\n   * @param {boolean} data.isCancel - specifies boolean in cancel\n   * @param {boolean} data.isScroll - specifies boolean for scroll\n   * @returns {void}\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.getVirtualData = function (data) {\n    if (this.isNormaledit) {\n      var error = this.parent.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n      var keys = Object.keys(this.virtualData);\n      data.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n      if (error) {\n        return;\n      }\n      this.virtualData = keys.length ? this.virtualData : data.virtualData;\n      this.getVirtualEditedData(this.virtualData);\n      data.virtualData = this.virtualData;\n      data.isAdd = this.isAdd;\n      data.isCancel = this.isCancel;\n    }\n  };\n  VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n    this.isContextMenuOpen = args.isOpen;\n  };\n  VirtualContentRenderer.prototype.editCancel = function (args) {\n    var dataIndex = getEditedDataIndex(this.parent, args.data);\n    if (!isNullOrUndefined(dataIndex)) {\n      args.data = this.parent.getCurrentViewRecords()[dataIndex];\n    }\n  };\n  VirtualContentRenderer.prototype.editSuccess = function (args) {\n    if (this.isNormaledit) {\n      if (!this.isAdd && args.data) {\n        this.updateCurrentViewData(args.data);\n      }\n      this.isAdd = false;\n    }\n  };\n  VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n    var dataIndex = getEditedDataIndex(this.parent, data);\n    if (!isNullOrUndefined(dataIndex)) {\n      this.parent.getCurrentViewRecords()[dataIndex] = data;\n    }\n  };\n  VirtualContentRenderer.prototype.actionBegin = function (args) {\n    if (args.requestType !== 'virtualscroll') {\n      this.requestType = args.requestType;\n    }\n    if (!args.cancel) {\n      this.parent.notify(events.refreshVirtualFrozenRows, args);\n    }\n  };\n  VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n    // To decide the action (select or scroll), when using arrow keys for cell focus\n    var ele = document.activeElement;\n    if (ele.classList.contains(literals.rowCell) && e && (e.action === 'upArrow' || e.action === 'downArrow')) {\n      var rowIndex = parseInt(ele.parentElement.getAttribute(literals.ariaRowIndex), 10);\n      if (e && (e.action === 'downArrow' || e.action === 'upArrow')) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        if (e.action === 'downArrow') {\n          rowIndex += 1;\n        } else {\n          rowIndex -= 1;\n        }\n        this.rowIndex = rowIndex;\n        this.cellIndex = parseInt(ele.getAttribute(literals.ariaColIndex), 10);\n        var row = this.parent.getRowByIndex(rowIndex);\n        var page = this.parent.pageSettings.currentPage;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var emptyRow = false;\n        if (isNullOrUndefined(row)) {\n          emptyRow = true;\n          if (e.action === 'downArrow' && page === this.maxPage - 1 || e.action === 'upArrow' && page === 1) {\n            emptyRow = false;\n          }\n        }\n        if (emptyRow || ensureLastRow(row, this.parent) && e.action === 'downArrow' || ensureFirstRow(row, this.parent.getRowHeight() * 2) && e.action === 'upArrow') {\n          this.activeKey = e.action;\n          scrollEle.scrollTop = e.action === 'downArrow' ? (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n        } else {\n          this.activeKey = this.empty;\n        }\n        this.parent.selectRow(rowIndex);\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.editActionBegin = function (e) {\n    this.editedRowIndex = e.index;\n    var rowData = extend({}, this.getRowObjectByIndex(e.index));\n    var keys = Object.keys(this.virtualData);\n    e.data = keys.length ? this.virtualData : rowData;\n    e.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n  };\n  VirtualContentRenderer.prototype.refreshCache = function (args) {\n    var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n    var index = this.editedRowIndex - (block - 1) * this.getBlockSize();\n    this.vgenerator.cache[block][index].data = args.data;\n    if (this.vgenerator.movableCache[block]) {\n      this.vgenerator.movableCache[block][index].data = args.data;\n    }\n    if (this.vgenerator.frozenRightCache[block]) {\n      this.vgenerator.frozenRightCache[block][index].data = args.data;\n    }\n  };\n  VirtualContentRenderer.prototype.actionComplete = function (args) {\n    var editRequestTypes = ['delete', 'save', 'cancel'];\n    var dataActionRequestTypes = ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'];\n    if (editRequestTypes.some(function (value) {\n      return value === args.requestType;\n    })) {\n      this.refreshOffsets();\n      if (this.parent.isFrozenGrid()) {\n        this.vgenerator.refreshColOffsets();\n        this.parent.contentModule.virtualRenderer.virtualEle.setVirtualHeight();\n      } else {\n        this.refreshVirtualElement();\n      }\n    }\n    if (this.isNormaledit && (dataActionRequestTypes.some(function (value) {\n      return value === args.requestType;\n    }) || editRequestTypes.some(function (value) {\n      return value === args.requestType;\n    }))) {\n      this.isCancel = true;\n      this.isAdd = false;\n      this.editedRowIndex = this.empty;\n      this.virtualData = {};\n      if (this.parent.editModule) {\n        this.parent.editModule.editModule.previousData = undefined;\n      }\n    }\n    if (this.parent.enableColumnVirtualization && args.requestType === 'filterafteropen' && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n      this.parent.resetFilterDlgPosition(args.columnName);\n    }\n  };\n  VirtualContentRenderer.prototype.resetIsedit = function () {\n    if (this.parent.enableVirtualization && this.isNormaledit) {\n      if (this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length || this.parent.editSettings.allowAdding && this.isAdd) {\n        this.parent.isEdit = true;\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n    if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n      if (this.parent.element.querySelector('.e-gridform')) {\n        var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n        var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n        if (editForm || addForm) {\n          var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex)) : extend({}, this.emptyRowData);\n          var keys = Object.keys(this.virtualData);\n          this.virtualData = keys.length ? this.getVirtualEditedData(this.virtualData) : this.getVirtualEditedData(rowData);\n        }\n      }\n    }\n  };\n  VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n    var _this = this;\n    this.parent.columnModel.filter(function (e) {\n      _this.emptyRowData[e.field] = _this.empty;\n    });\n  };\n  VirtualContentRenderer.prototype.addActionBegin = function (args) {\n    if (this.isNormaledit) {\n      if (!Object.keys(this.emptyRowData).length) {\n        this.createEmptyRowdata();\n      }\n      this.isAdd = true;\n      var page = this.parent.pageSettings.currentPage;\n      if (!this.parent.frozenRows && this.content.scrollTop > 0 && this.parent.editSettings.newRowPosition === 'Top') {\n        this.isAdd = true;\n        this.onActionBegin();\n        args.startEdit = false;\n        this.content.scrollTop = 0;\n      }\n      if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n        this.isAdd = true;\n        this.parent.setProperties({\n          pageSettings: {\n            currentPage: this.maxPage - 1\n          }\n        }, true);\n        args.startEdit = false;\n        this.content.scrollTop = this.offsets[this.offsetKeys.length];\n      }\n    }\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Object} returns the object\n   * @hidden\n   */\n  VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n    var data = this.getRowCollection(index, false, true);\n    return data;\n  };\n  VirtualContentRenderer.prototype.getBlockSize = function () {\n    return this.parent.pageSettings.pageSize >> 1;\n  };\n  VirtualContentRenderer.prototype.getBlockHeight = function () {\n    return this.getBlockSize() * this.parent.getRowHeight();\n  };\n  VirtualContentRenderer.prototype.isEndBlock = function (index) {\n    var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    return index >= totalBlocks || index === totalBlocks - 1;\n  };\n  VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n    var rows = this.parent.vcRows;\n    return Math.floor(rows.length / this.getBlockSize() < 1 ? 1 : rows.length / this.getBlockSize());\n  };\n  VirtualContentRenderer.prototype.getTotalBlocks = function () {\n    return Math.ceil(this.count / this.getBlockSize());\n  };\n  VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n    return this.vgenerator.cOffsets[block] | 0;\n  };\n  VirtualContentRenderer.prototype.getModelGenerator = function () {\n    return new VirtualRowModelGenerator(this.parent);\n  };\n  VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n    if (this.actions.some(function (value) {\n      return value === action;\n    })) {\n      this.preventEvent = this.content.scrollTop !== 0;\n      this.content.scrollTop = 0;\n    }\n    if (action !== 'virtualscroll') {\n      this.isAdd = false;\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  VirtualContentRenderer.prototype.onActionBegin = function (e) {\n    //Update property silently..\n    this.parent.setProperties({\n      pageSettings: {\n        currentPage: 1\n      }\n    }, true);\n  };\n  VirtualContentRenderer.prototype.getRows = function () {\n    return this.vgenerator.getRows();\n  };\n  VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n    var row;\n    if (isGroupAdaptive(this.parent)) {\n      row = this.parent.getDataRows()[index];\n    } else if (this.prevInfo) {\n      row = this.getRowCollection(index, false);\n    }\n    return row;\n  };\n  VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n    return this.getRowCollection(index, true);\n  };\n  VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n    return this.getRowCollection(index, false, false, true);\n  };\n  VirtualContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n    var prev = this.prevInfo.blockIndexes;\n    var startIdx = (prev[0] - 1) * this.getBlockSize();\n    var rowCollection = isMovable ? this.parent.getMovableDataRows() : this.parent.getDataRows();\n    rowCollection = isFrozenRight ? this.parent.getFrozenRightDataRows() : rowCollection;\n    var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n    if (isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n      startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.ariaRowIndex), 10);\n      collection = collection.filter(function (m) {\n        return isNullOrUndefined(m.items);\n      });\n    }\n    var selectedRow = collection[index - startIdx];\n    if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n      if (!isRowObject) {\n        selectedRow = index <= this.parent.frozenRows ? rowCollection[index] : rowCollection[index - startIdx + this.parent.frozenRows];\n      } else {\n        selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[index].data : selectedRow;\n      }\n    }\n    return selectedRow;\n  };\n  VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n    var prev = this.prevInfo.blockIndexes;\n    var startIdx = (prev[0] - 1) * this.getBlockSize();\n    return startIdx + index;\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  VirtualContentRenderer.prototype.refreshOffsets = function () {\n    var gObj = this.parent;\n    var row = 0;\n    var bSize = this.getBlockSize();\n    var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n    this.prevHeight = this.offsets[total];\n    this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n    this.offsets = {};\n    //Row offset update\n    // eslint-disable-next-line prefer-spread\n    var blocks = Array.apply(null, Array(total)).map(function () {\n      return ++row;\n    });\n    for (var i = 0; i < blocks.length; i++) {\n      var tmp = (this.vgenerator.cache[blocks[i]] || []).length;\n      var rem = !isGroupAdaptive(this.parent) ? this.count % bSize : gObj.vcRows.length % bSize;\n      var size = !isGroupAdaptive(this.parent) && blocks[i] in this.vgenerator.cache ? tmp * this.parent.getRowHeight() : rem && blocks[i] === total ? rem * this.parent.getRowHeight() : this.getBlockHeight();\n      // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n      // tmp * getRowHeight() : this.getBlockHeight();\n      this.offsets[blocks[i]] = (this.offsets[blocks[i] - 1] | 0) + size;\n      this.tmpOffsets[blocks[i]] = this.offsets[blocks[i] - 1] | 0;\n    }\n    this.offsetKeys = Object.keys(this.offsets);\n    if (isGroupAdaptive(this.parent)) {\n      this.parent.vGroupOffsets = this.offsets;\n    }\n    //Column offset update\n    if (this.parent.enableColumnVirtualization) {\n      this.vgenerator.refreshColOffsets();\n    }\n  };\n  VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n    this.vgenerator.refreshColOffsets();\n    this.setVirtualHeight();\n  };\n  VirtualContentRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var frozenCols = this.parent.getFrozenColumns();\n    var fcntColGrp;\n    var mcntColGrp;\n    if (frozenCols) {\n      fcntColGrp = [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('col'));\n      mcntColGrp = [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('col'));\n    }\n    var rows = [];\n    rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n      return r.isDataRow;\n    });\n    var isRefresh = true;\n    if (!gObj.groupSettings.columns.length && testRow) {\n      isRefresh = false;\n    }\n    var tr = gObj.getDataRows();\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      var idx = gObj.getNormalizedColumnIndex(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n      var colGrp = void 0;\n      if (fcntColGrp && mcntColGrp) {\n        if (idx >= frozenCols) {\n          colGrp = mcntColGrp;\n          tr = this.parent.getMovableRows();\n          idx = idx - frozenCols;\n        } else {\n          colGrp = fcntColGrp;\n        }\n      } else {\n        colGrp = this.getColGroup().children;\n      }\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(colGrp[idx], {\n          'display': displayVal\n        });\n      }\n      if (!isRefresh) {\n        var width = void 0;\n        if (column.width) {\n          if (column.visible) {\n            width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n          } else {\n            width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n          }\n        }\n        if (width > gObj.width) {\n          this.setDisplayNone(tr, idx, displayVal, rows);\n          if (this.parent.enableColumnVirtualization) {\n            this.virtualEle.setWrapperWidth(width + '');\n          }\n          this.refreshVirtualElement();\n        } else {\n          isRefresh = true;\n        }\n      }\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n      this.parent.invokedFromMedia = false;\n    }\n    if (isRefresh || frozenCols) {\n      this.refreshContentRows({\n        requestType: 'refresh'\n      });\n    } else {\n      this.parent.notify(events.partialRefresh, {\n        rows: rows,\n        args: {\n          isFrozen: false,\n          rows: rows\n        }\n      });\n    }\n  };\n  VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n    var _this = this;\n    args.isAvailable = args.selectedIndex < this.count;\n    if (args.isAvailable && !this.isContextMenuOpen && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow' && !this.isSelection && !this.requestTypes.some(function (value) {\n      return value === _this.requestType;\n    }) && !this.parent.selectionModule.isInteracted) {\n      var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n      var rowHeight = this.parent.getRowHeight();\n      if (!selectedRow || !this.isRowInView(selectedRow)) {\n        this.isSelection = true;\n        this.selectedRowIndex = args.selectedIndex;\n        var scrollTop = (args.selectedIndex + 1) * rowHeight;\n        if (!isNullOrUndefined(scrollTop)) {\n          var direction = this.content.scrollTop < scrollTop ? 'down' : 'up';\n          this.selectRowIndex = args.selectedIndex;\n          this.content.scrollTop = scrollTop;\n          this.isSelectionScroll = this.observer.check(direction);\n        }\n      }\n    }\n    if (this.parent.isFrozenGrid() && this.requestType) {\n      if (this.parent.getTablesCount() === this.frzIdx) {\n        this.requestType = this.empty;\n        this.frzIdx = 1;\n      } else {\n        this.frzIdx++;\n      }\n    } else {\n      this.requestType = this.empty;\n    }\n  };\n  VirtualContentRenderer.prototype.isRowInView = function (row) {\n    var top = row.getBoundingClientRect().top;\n    var bottom = row.getBoundingClientRect().bottom;\n    return top >= this.content.getBoundingClientRect().top && bottom <= this.content.getBoundingClientRect().bottom;\n  };\n  return VirtualContentRenderer;\n}(ContentRender);\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */function (_super) {\n  __extends(VirtualHeaderRenderer, _super);\n  function VirtualHeaderRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.virtualEle = new VirtualElementHandler();\n    _this.isMovable = false;\n    _this.gen = new VirtualRowModelGenerator(_this.parent);\n    _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n    _this.parent.on(refreshVirtualBlock, function (e) {\n      return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null;\n    }, _this);\n    return _this;\n  }\n  VirtualHeaderRenderer.prototype.renderTable = function () {\n    this.gen.refreshColOffsets();\n    this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n    _super.prototype.renderTable.call(this);\n    this.virtualEle.table = this.getTable();\n    this.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n    this.virtualEle.content.style.position = 'relative';\n    this.virtualEle.renderWrapper();\n    this.virtualEle.renderPlaceHolder('absolute');\n  };\n  VirtualHeaderRenderer.prototype.appendContent = function (table) {\n    if (!this.isMovable) {\n      this.virtualEle.wrapper.appendChild(table);\n    } else {\n      this.virtualEle.movableWrapper.appendChild(table);\n      this.isMovable = false;\n    }\n  };\n  VirtualHeaderRenderer.prototype.refreshUI = function () {\n    this.isMovable = this.parent.isFrozenGrid();\n    this.setFrozenTable(this.parent.getMovableVirtualContent());\n    this.gen.refreshColOffsets();\n    this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n    _super.prototype.refreshUI.call(this);\n    this.setFrozenTable(this.parent.getFrozenVirtualContent());\n  };\n  VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    var needFullRefresh;\n    var frozenCols = this.parent.getFrozenColumns();\n    var fhdrColGrp;\n    var mhdrColGrp;\n    if (frozenCols) {\n      fhdrColGrp = [].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll('col'));\n      mhdrColGrp = [].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll('col'));\n    }\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n      var colGrp = void 0;\n      if (fhdrColGrp && mhdrColGrp) {\n        if (idx >= frozenCols) {\n          colGrp = mhdrColGrp;\n          idx = idx - frozenCols;\n        } else {\n          colGrp = fhdrColGrp;\n        }\n      } else {\n        colGrp = this.getColGroup().children;\n      }\n      setStyleAttribute(colGrp[idx], {\n        'display': displayVal\n      });\n      if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n        var tablewidth = void 0;\n        if (column.visible) {\n          tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n        } else {\n          tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n        }\n        if (tablewidth > gObj.width) {\n          this.setDisplayNone(column, displayVal);\n          this.virtualEle.setWrapperWidth(tablewidth + '');\n          this.gen.refreshColOffsets();\n        } else {\n          needFullRefresh = true;\n        }\n      } else {\n        needFullRefresh = true;\n      }\n      if (needFullRefresh && !frozenCols) {\n        this.refreshUI();\n      }\n    }\n    if (frozenCols) {\n      this.parent.notify(events.columnPositionChanged, {});\n    }\n  };\n  VirtualHeaderRenderer.prototype.setFrozenTable = function (content) {\n    if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis()) {\n      this.parent.contentModule.setTable(content.querySelector('.' + literals.table));\n    }\n  };\n  VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n    var frozenCols = this.parent.isFrozenGrid();\n    var table = this.getTable();\n    if (frozenCols && col.getFreezeTableName() === 'movable') {\n      table = this.parent.getMovableVirtualHeader().querySelector('.' + literals.table);\n    }\n    for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n      var ele = _a[_i];\n      if (ele.querySelector('[e-mappinguid]') && ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n        setStyleAttribute(ele, {\n          'display': displayVal\n        });\n        if (displayVal === '') {\n          removeClass([ele], 'e-hide');\n        }\n        break;\n      }\n    }\n  };\n  return VirtualHeaderRenderer;\n}(HeaderRender);\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */function () {\n  function VirtualElementHandler() {}\n  VirtualElementHandler.prototype.renderWrapper = function (height) {\n    this.wrapper = createElement('div', {\n      className: 'e-virtualtable',\n      styles: \"min-height:\" + formatUnit(height)\n    });\n    this.wrapper.appendChild(this.table);\n    this.content.appendChild(this.wrapper);\n  };\n  VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n    if (position === void 0) {\n      position = 'relative';\n    }\n    this.placeholder = createElement('div', {\n      className: 'e-virtualtrack',\n      styles: \"position:\" + position\n    });\n    this.content.appendChild(this.placeholder);\n  };\n  VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n    this.wrapper = createElement('div', {\n      className: 'e-virtualtable',\n      styles: \"min-height:\" + formatUnit(height) + \"; display: flex\"\n    });\n    this.content.appendChild(this.wrapper);\n  };\n  VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n    this.placeholder = createElement('div', {\n      className: 'e-virtualtrack'\n    });\n    this.content.appendChild(this.placeholder);\n  };\n  VirtualElementHandler.prototype.renderMovableWrapper = function (height) {\n    this.movableWrapper = createElement('div', {\n      className: 'e-virtualtable',\n      styles: \"min-height:\" + formatUnit(height)\n    });\n    this.movableContent.appendChild(this.movableWrapper);\n  };\n  VirtualElementHandler.prototype.renderMovablePlaceHolder = function () {\n    this.movablePlaceholder = createElement('div', {\n      className: 'e-virtualtrack'\n    });\n    this.movableContent.appendChild(this.movablePlaceholder);\n  };\n  VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n    this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n  };\n  VirtualElementHandler.prototype.adjustMovableTable = function (xValue, yValue) {\n    this.movableWrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n  };\n  VirtualElementHandler.prototype.setMovableWrapperWidth = function (width, full) {\n    this.movableWrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n  };\n  VirtualElementHandler.prototype.setMovableVirtualHeight = function (height, width) {\n    this.movablePlaceholder.style.height = height + \"px\";\n    this.movablePlaceholder.style.width = width;\n  };\n  VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n    this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n  };\n  VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n    this.placeholder.style.height = height + \"px\";\n    this.placeholder.style.width = width;\n  };\n  VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n    wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n  };\n  return VirtualElementHandler;\n}();\nexport { VirtualElementHandler };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","remove","createElement","closest","formatUnit","Browser","extend","isNullOrUndefined","removeClass","DataManager","dataReady","modelChanged","refreshVirtualBlock","contentReady","events","RenderType","ContentRender","HeaderRender","InterSectionObserver","VirtualRowModelGenerator","isGroupAdaptive","ensureLastRow","ensureFirstRow","getEditedDataIndex","getTransformValues","setStyleAttribute","literals","VirtualContentRenderer","_super","parent","locator","_this","call","prevHeight","startIndex","preStartIndex","preventEvent","actions","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","isFocused","isSelection","isBottom","rndrCount","empty","undefined","isCancel","requestTypes","isNormaledit","editSettings","mode","virtualData","emptyRowData","vfColIndex","frzIdx","isContextMenuOpen","isSelectionScroll","validationCheck","eventListener","on","columnVisibilityChanged","setVisible","vgenerator","generator","renderTable","header","getService","getRenderer","Header","table","getTable","content","getPanel","querySelector","renderWrapper","height","renderPlaceHolder","wrapper","style","position","debounceEvent","dataSource","offline","opt","container","pageHeight","getBlockHeight","axes","enableColumnVirtualization","observer","renderEmpty","tbody","appendChild","adjustTable","getReorderedFrozenRows","args","blockIndex","virtualInfo","blockIndexes","colsIndex","columnIndexes","page","renderMovableContent","recordslength","getCurrentViewRecords","length","firstRecords","renderModule","data","dataManager","json","slice","virtualRows","generateRows","splice","frozenRows","scrollListener","scrollArgs","scrollAfterEdit","enablePersistence","scrollPosition","offset","isDestroyed","document","activeElement","info","sentinel","viewInfo","currentInfo","getInfoFromView","direction","prevInfo","toString","event","top","scrollTop","pageSettings","currentPage","notify","requestType","focusElement","axis","isIE","hideSpinner","restoreEdit","setColumnIndexesInView","loadNext","loadSelf","nextInfo","block","blk","isBlockAvailable","e","isBlockAdded","tempBlocks","infoType","sentinelInfo","endIndex","preEndIndex","getPageFromTop","getBlockIndexes","blocks","ensureBlocks","activeKey","newBlock","indexOf","filter","val","every","bind","Math","max","firstBlock","ceil","rowIndex","getBlockSize","getColumnIndexes","getColumnIndexesInView","setKeyboardNavIndex","blazorDataLoad","blzRowIndex","blur","index","mIdx","old","indexes","isFrozenGrid","ind","isEndBlock","some","result","getGroupedTotalBlocks","getTotalBlocks","appendContent","target","newChild","isFrozen","frzCols","getFrozenColumns","getFrozenLeftColumnsCount","colVFtable","checkFirstBlockColIndexes","cBlock","cOffset","getColumnOffset","width","groupSettings","columns","refreshOffsets","element","vHeight","getBoundingClientRect","value","translate","getTranslateY","adjustMovableTable","cIndex","setMovableWrapperWidth","setWrapperWidth","name","parentNode","renderFrozenRightContent","getContent","getFrozenVirtualContent","getMovableVirtualContent","isReact","rowTemplate","i","children","getFrozenMode","leftRight","sTop","setVirtualHeight","setPageHeight","getOffset","focus","lastPage","firstElementChild","autoCol","focusCell","restoreAdd","ensureSelectedRowPosition","validationScrollLeft","initialRowTop","gridTop","getRowByIndex","tableName","isLoaded","includePrevPage","left","trigger","validationCol","cOffsets","getVisibleFrozenColumns","movableContent","scrollLeft","editModule","editFormValidate","selectRowIndex","row","isRowInView","rowSelected","frozenCols","push","cell","cells","cellIndex","preventScroll","selectRow","parseInt","getAttribute","ariaRowIndex","allowEditing","editedRowIndex","keys","isXaxis","getMovableRowByIndex","editedRow","top_1","offsetHeight","getRowHeight","isEdit","startEdit","rowData","getRowObjectByIndex","getVirtualEditedData","editForms","getElementsByClassName","isFormDestroyed","formObj","getCurrentEditedData","startAdd","getMovableVirtualHeader","addedRow","isAdd","isTop","newRowPosition","maxPage","addRecord","onDataReady","count","pageSize","checkAndResetCache","resetScrollPosition","virtualHeightTemp","scrollableElementHeight","clientHeight","virtualHeight","setMovableVirtualHeight","total","iOffset","Number","border","min","getPage","cHeight","isOnenter","endTranslate","blockHeight","totalBlocks","maxBlock","onEntered","current","isWheel","check","showSpinner","xAxis","x","idx","maxLeft","y","dataBound","refreshVirtualFrozenHeight","selectedRowIndex","isLastBlockRow","transform","rowTop","remainHeight","translateY","lastRowTop","lastElementChild","scrollEle","visibleRowCount","floor","startIdx","refreshMaxPage","vcRows","setVirtualPageQuery","isManualRefresh","unshift","skip","take","query","skipPage","action","addEventListener","actionBegin","actionComplete","refreshContentRows","selectVirtualRow","virtaulCellFocus","virtualCellFocus","virtualScrollEditActionBegin","editActionBegin","virtualScrollAddActionBegin","addActionBegin","virtualScrollEdit","virtualScrollEditSuccess","editSuccess","refreshVirtualCache","refreshCache","editReset","resetIsedit","getVirtualData","virtualScrollEditCancel","editCancel","refreshVirtualMaxPage","selectRowOnContextOpen","resetVirtualFocus","refreshVirtualEditFormCells","refreshCells","scrollToEdit","onActionBegin","fn","observe","gObj","scrollValues","down","off","col","allowScroll","getHeaderContent","uid","parentElement","offsetLeft","getFrozenVirtualHeader","offsetWidth","enableRtl","abs","rowObj","generateCells","foreignKeyData","error","isScroll","isOpen","dataIndex","updateCurrentViewData","cancel","refreshVirtualFrozenRows","ele","classList","contains","rowCell","ariaColIndex","emptyRow","cache","movableCache","frozenRightCache","editRequestTypes","dataActionRequestTypes","refreshColOffsets","contentModule","virtualRenderer","refreshVirtualElement","previousData","resetFilterDlgPosition","columnName","enableVirtualization","allowAdding","editForm","addForm","createEmptyRowdata","columnModel","field","setProperties","getRowCollection","rows","getModelGenerator","getRows","getDataRows","getMovableVirtualRowByIndex","getFrozenRightVirtualRowByIndex","isMovable","isRowObject","isFrozenRight","prev","rowCollection","getMovableDataRows","getFrozenRightDataRows","collection","allowGrouping","m","items","selectedRow","getRowsObject","getVirtualRowIndex","bSize","apply","map","tmp","rem","size","vGroupOffsets","fcntColGrp","mcntColGrp","querySelectorAll","testRow","r","isDataRow","isRefresh","tr","c","clen","column","getNormalizedColumnIndex","displayVal","visible","colGrp","getMovableRows","getColGroup","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","partialRefresh","isAvailable","selectedIndex","selectionModule","isInteracted","rowHeight","getTablesCount","bottom","VirtualHeaderRenderer","gen","refreshUI","headerContent","movableWrapper","setFrozenTable","needFullRefresh","fhdrColGrp","mhdrColGrp","tablewidth","columnPositionChanged","setTable","getFreezeTableName","_i","_a","className","styles","placeholder","renderFrozenWrapper","renderFrozenPlaceHolder","renderMovableWrapper","renderMovablePlaceHolder","movablePlaceholder","xValue","yValue","full","setFreezeWrapperWidth"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/renderer/virtual-content-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues } from '../base/util';\nimport { setStyleAttribute } from '@syncfusion/ej2-base';\nimport * as literals from '../base/string-literals';\n/**\n * VirtualContentRenderer\n *\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        /** @hidden */\n        _this.startIndex = 0;\n        _this.preStartIndex = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        /** @hidden */\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        /** @hidden */\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.isBottom = false;\n        _this.rndrCount = 0;\n        _this.empty = undefined;\n        _this.isCancel = false;\n        _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save'];\n        _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n        /** @hidden */\n        _this.virtualData = {};\n        _this.emptyRowData = {};\n        _this.vfColIndex = [];\n        _this.frzIdx = 1;\n        _this.isContextMenuOpen = false;\n        _this.isSelectionScroll = false;\n        _this.validationCheck = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().querySelector('.' + literals.content);\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n        var blockIndex = args.virtualInfo.blockIndexes;\n        var colsIndex = args.virtualInfo.columnIndexes;\n        var page = args.virtualInfo.page;\n        args.virtualInfo.blockIndexes = [1, 2];\n        args.virtualInfo.page = 1;\n        if (!args.renderMovableContent) {\n            args.virtualInfo.columnIndexes = [];\n        }\n        var recordslength = this.parent.getCurrentViewRecords().length;\n        var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n        var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n        args.virtualInfo.blockIndexes = blockIndex;\n        args.virtualInfo.columnIndexes = colsIndex;\n        args.virtualInfo.page = page;\n        return virtualRows.splice(0, this.parent.frozenRows);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        this.scrollAfterEdit();\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.' + literals.content) || this.content === document.activeElement;\n        }\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isGroupAdaptive(this.parent)) {\n            if (viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString()) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.pageSettings.currentPage = viewInfo.page;\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            if (Browser.isIE) {\n                this.parent.hideSpinner();\n            }\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            if (info.axis === 'Y') {\n                this.restoreEdit();\n            }\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.requestType = 'virtualscroll';\n        this.parent.notify(viewInfo.event, {\n            requestType: 'virtualscroll', virtualInfo: viewInfo,\n            focusElement: scrollArgs.focusElement\n        });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var isBlockAdded = false;\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.preStartIndex, endIndex: this.preEndIndex };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        if (isBlockAdded) {\n            infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n        }\n        if (this.activeKey === 'downArrow') {\n            var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n            if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n                infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n            }\n        }\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.setKeyboardNavIndex = function () {\n        this.blazorDataLoad = true;\n        if (this.activeKey === 'downArrow' || this.activeKey === 'upArrow') {\n            this.blzRowIndex = this.activeKey === 'downArrow' ? this.rowIndex + 1 : this.rowIndex - 1;\n            document.activeElement.blur();\n        }\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n            // To avoid frozen content white space issue\n            if (info.sentinelInfo.axis === 'X' || (info.sentinelInfo.axis === 'Y' && (info.page === this.prevInfo.page))) {\n                indexes = this.prevInfo.blockIndexes;\n            }\n        }\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    // tslint:disable-next-line:max-func-body-length\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var _this = this;\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var isFrozen = this.parent.isFrozenGrid();\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var colVFtable = this.parent.enableColumnVirtualization && isFrozen;\n        this.checkFirstBlockColIndexes(e);\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        if (colVFtable && info.columnIndexes[0] === frzCols) {\n            cBlock = (info.columnIndexes[0] - frzCols) - 1;\n        }\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        if (!this.requestTypes.some(function (value) { return value === _this.requestType; })) {\n            var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n            this.virtualEle.adjustTable(colVFtable ? 0 : cOffset, translate);\n            if (colVFtable) {\n                this.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(colVFtable ? 0 : cOffset, 0);\n            if (colVFtable) {\n                this.header.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            if (colVFtable) {\n                this.header.virtualEle.setMovableWrapperWidth(width);\n            }\n            else {\n                this.header.virtualEle.setWrapperWidth(width);\n            }\n        }\n        if (colVFtable) {\n            this.virtualEle.setMovableWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        else {\n            this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody;\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                tbody = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector(literals.tbody);\n            }\n            else if (!e.renderMovableContent) {\n                tbody = this.parent.getFrozenVirtualContent().querySelector(literals.tbody);\n            }\n            else if (e.renderMovableContent) {\n                tbody = this.parent.getMovableVirtualContent().querySelector(literals.tbody);\n            }\n        }\n        else {\n            tbody = this.parent.element.querySelector('.' + literals.content).querySelector(literals.tbody);\n        }\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (!isReact) {\n            target = this.parent.createElement(literals.tbody);\n            target.appendChild(newChild);\n        }\n        else {\n            target = newChild;\n        }\n        if (this.parent.frozenRows && e.requestType === 'virtualscroll' && this.parent.pageSettings.currentPage === 1) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                target.children[0].remove();\n            }\n        }\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.' + literals.table).appendChild(target);\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            }\n            else if (!e.renderMovableContent) {\n                this.parent.getFrozenVirtualContent().querySelector('.' + literals.table).appendChild(target);\n            }\n            else if (e.renderMovableContent) {\n                this.parent.getMovableVirtualContent().querySelector('.' + literals.table).appendChild(target);\n                if (this.parent.getFrozenMode() !== literals.leftRight) {\n                    this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n                }\n            }\n            if (this.vfColIndex.length) {\n                e.virtualInfo.columnIndexes = info.columnIndexes = extend([], this.vfColIndex);\n                this.vfColIndex = e.renderMovableContent ? [] : this.vfColIndex;\n            }\n        }\n        else {\n            this.getTable().appendChild(target);\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n            this.content.focus();\n        }\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        if (this.isBottom) {\n            this.isBottom = false;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage === lastPage) && blocks.length === 1) {\n            this.isBottom = true;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n        }\n        if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.parent.notify(events.autoCol, {});\n        }\n        this.focusCell(e);\n        this.restoreEdit(e);\n        this.restoreAdd(e);\n        this.ensureSelectedRowPosition();\n        this.validationScrollLeft(e, isFrozen);\n        if (!this.initialRowTop) {\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top - gridTop;\n        }\n        var tableName = e.tableName;\n        var isLoaded = this.parent.getFrozenMode() === 'Left-Right' ? tableName === 'frozen-right' : tableName === 'movable';\n        if (!isFrozen || isLoaded) {\n            this.vgenerator.startIndex = null;\n            this.vgenerator.currentInfo = {};\n            this.vgenerator.includePrevPage = null;\n        }\n    };\n    VirtualContentRenderer.prototype.validationScrollLeft = function (e, isFrozen) {\n        var left = this.parent.getFrozenColumns();\n        var table = this.parent.getFrozenMode();\n        var trigger = !isFrozen || e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent\n            : e.renderFrozenRightContent);\n        if (this.validationCheck && trigger) {\n            if (this.validationCol) {\n                var offset = this.vgenerator.cOffsets[(this.validationCol.index - this.parent.getVisibleFrozenColumns()) - 1];\n                this.validationCol = null;\n                if (this.parent.isFrozenGrid()) {\n                    this.movableContent.scrollLeft = offset;\n                }\n                else {\n                    this.content.scrollLeft = offset;\n                }\n            }\n            else {\n                this.validationCheck = false;\n                this.parent.editModule.editFormValidate();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.ensureSelectedRowPosition = function () {\n        if (!this.isSelection && this.isSelectionScroll && !isNullOrUndefined(this.selectRowIndex)) {\n            this.isSelectionScroll = false;\n            var row = this.parent.getRowByIndex(this.selectRowIndex);\n            if (row && !this.isRowInView(row)) {\n                this.rowSelected({ rowIndex: this.selectRowIndex, row: row }, true);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.checkFirstBlockColIndexes = function (e) {\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && e.virtualInfo.columnIndexes[0] === 0) {\n            var indexes = [];\n            var frozenCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n            if (!e.renderMovableContent && e.virtualInfo.columnIndexes.length > frozenCols) {\n                this.vfColIndex = e.virtualInfo.columnIndexes;\n                for (var i = 0; i < frozenCols; i++) {\n                    indexes.push(i);\n                }\n                e.virtualInfo.columnIndexes = indexes;\n            }\n            else if (e.renderMovableContent) {\n                if (!this.vfColIndex.length) {\n                    this.vfColIndex = extend([], e.virtualInfo.columnIndexes);\n                }\n                e.virtualInfo.columnIndexes = extend([], this.vfColIndex);\n                e.virtualInfo.columnIndexes.splice(0, frozenCols);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.focusCell = function (e) {\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            return;\n        }\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var cell = row.cells[this.cellIndex];\n        cell.focus({ preventScroll: true });\n        this.parent.selectRow(parseInt(row.getAttribute(literals.ariaRowIndex), 10));\n        this.activeKey = this.empty;\n    };\n    VirtualContentRenderer.prototype.restoreEdit = function (e) {\n        if (this.isNormaledit) {\n            var left = this.parent.getFrozenColumns();\n            var isFrozen = e && this.parent.isFrozenGrid();\n            var table = this.parent.getFrozenMode();\n            var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent\n                : e.renderFrozenRightContent);\n            if ((!isFrozen || (isFrozen && trigger)) && this.parent.editSettings.allowEditing\n                && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n                var row = this.getRowByIndex(this.editedRowIndex);\n                var content = this.content;\n                var keys = Object.keys(this.virtualData);\n                var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n                if (isFrozen && isXaxis) {\n                    row = this.parent.getMovableRowByIndex(this.editedRowIndex);\n                    content = this.movableContent;\n                }\n                if (keys.length && row && !content.querySelector('.' + literals.editedRow)) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (isXaxis || (top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight())) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n                if (row && this.content.querySelector('.' + literals.editedRow) && !keys.length) {\n                    var rowData = extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n            this.restoreAdd(e);\n        }\n    };\n    VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n        var editForms = [].slice.call(this.parent.element.getElementsByClassName('e-gridform'));\n        var isFormDestroyed = this.parent.editModule && this.parent.editModule.formObj\n            && this.parent.editModule.formObj.isDestroyed;\n        if (!isFormDestroyed) {\n            for (var i = 0; i < editForms.length; i++) {\n                rowData = this.parent.editModule.getCurrentEditedData(editForms[i], rowData);\n            }\n        }\n        return rowData;\n    };\n    VirtualContentRenderer.prototype.restoreAdd = function (e) {\n        var left = this.parent.getFrozenColumns();\n        var isFrozen = e && this.parent.isFrozenGrid();\n        var table = this.parent.getFrozenMode();\n        var isXaxis = e && e.virtualInfo && e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'X';\n        var startAdd = isXaxis && isFrozen ? !(this.parent.getMovableVirtualHeader().querySelector('.' + literals.addedRow)\n            || this.parent.getMovableVirtualContent().querySelector('.' + literals.addedRow)) : !this.parent.element.querySelector('.' + literals.addedRow);\n        var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n        if ((!isFrozen || (isFrozen && trigger)) && this.isNormaledit && this.isAdd && startAdd) {\n            var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n            var isBottom = this.parent.editSettings.newRowPosition === 'Bottom'\n                && this.parent.pageSettings.currentPage === this.maxPage;\n            if (isTop || isBottom) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    /**\n     * @param {number} height - specifies the height\n     * @returns {void}\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        if (this.parent.isFrozenGrid()) {\n            var virtualHeightTemp = (this.parent.pageSettings.currentPage === 1 && Object.keys(this.offsets).length <= 2) ?\n                this.offsets[1] : this.offsets[this.getTotalBlocks() - 2];\n            var scrollableElementHeight = this.content.clientHeight;\n            virtualHeightTemp = virtualHeightTemp > scrollableElementHeight ? virtualHeightTemp : 0;\n            // To overcome the white space issue in last page (instead of position absolute)\n            this.virtualEle.setVirtualHeight(virtualHeightTemp, width);\n        }\n        else {\n            var virtualHeight = (this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() :\n                this.getTotalBlocks()]);\n            this.virtualEle.setVirtualHeight(virtualHeight, width);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n            if (this.parent.isFrozenGrid()) {\n                this.virtualEle.setMovableVirtualHeight(1, width);\n                this.header.virtualEle.setMovableVirtualHeight(1, width);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = iOffset + 1;\n                }\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        if (result + blockHeight > this.offsets[totalBlocks]) {\n            result -= (result + blockHeight) - this.offsets[totalBlocks];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var colVFtable = _this.parent.enableColumnVirtualization && _this.parent.isFrozenGrid();\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            if (xAxis && !colVFtable) {\n                var idx = Object.keys(_this.vgenerator.cOffsets).length - _this.prevInfo.columnIndexes.length;\n                var maxLeft = _this.vgenerator.cOffsets[idx - 1];\n                x = x > maxLeft ? maxLeft : x; //TODO: This fix horizontal scrollbar jumping issue in column virtualization.\n            }\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(colVFtable ? 0 : x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (colVFtable) {\n                _this.virtualEle.adjustMovableTable(x, 0);\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(colVFtable ? 0 : x, 0);\n                if (colVFtable) {\n                    _this.header.virtualEle.adjustMovableTable(x, 0);\n                }\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        this.parent.notify(events.refreshVirtualFrozenHeight, {});\n        if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n        else {\n            this.activeKey = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.rowSelected = function (args, isSelection) {\n        if ((this.isSelection || isSelection) && !this.isLastBlockRow(args.rowIndex)) {\n            var transform = getTransformValues(this.content.firstElementChild);\n            var gridTop = this.parent.element.getBoundingClientRect().top;\n            var rowTop = args.row.getBoundingClientRect().top - gridTop;\n            var height = this.content.getBoundingClientRect().height;\n            var isBottom = height < rowTop;\n            var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n            var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n            this.virtualEle.adjustTable(transform.width, translateY);\n            var lastRowTop = this.content.querySelector('tbody').lastElementChild.getBoundingClientRect().top - gridTop;\n            if (lastRowTop < height) {\n                translateY = translateY + (height - (args.row.getBoundingClientRect().top - gridTop));\n                this.virtualEle.adjustTable(transform.width, translateY - (this.parent.getRowHeight() / 2));\n            }\n        }\n        this.isSelection = false;\n    };\n    VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var startIdx = (this.maxPage * this.parent.pageSettings.pageSize) - visibleRowCount;\n        return index >= startIdx;\n    };\n    VirtualContentRenderer.prototype.refreshMaxPage = function () {\n        if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n            this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n        }\n    };\n    VirtualContentRenderer.prototype.setVirtualPageQuery = function (args) {\n        var row = this.parent.getContent().querySelector('.e-row');\n        if (row && this.parent.isManualRefresh && this.currentInfo.blockIndexes && this.currentInfo.blockIndexes.length === 3) {\n            this.vgenerator.startIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n            this.vgenerator.currentInfo = extend({}, this.currentInfo);\n            this.vgenerator.currentInfo.blockIndexes = this.currentInfo.blockIndexes.slice();\n            var includePrevPage = this.vgenerator.includePrevPage = this.currentInfo.blockIndexes[0] % 2 === 0;\n            if (includePrevPage) {\n                this.vgenerator.startIndex = this.vgenerator.startIndex - this.getBlockSize();\n                this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0] - 1);\n            }\n            else {\n                this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length - 1] + 1);\n            }\n            var skip = (this.vgenerator.currentInfo.blockIndexes[0] - 1) * this.getBlockSize();\n            var take = this.vgenerator.currentInfo.blockIndexes.length * this.getBlockSize();\n            args.query.skip(skip);\n            args.query.take(take);\n            args.skipPage = true;\n        }\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.parent[action](events.virtaulCellFocus, this.virtualCellFocus, this);\n        this.parent[action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent[action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n        this.parent[action](events.virtualScrollEdit, this.restoreEdit, this);\n        this.parent[action](events.virtualScrollEditSuccess, this.editSuccess, this);\n        this.parent[action](events.refreshVirtualCache, this.refreshCache, this);\n        this.parent[action](events.editReset, this.resetIsedit, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.virtualScrollEditCancel, this.editCancel, this);\n        this.parent[action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n        this.parent[action](events.setVirtualPageQuery, this.setVirtualPageQuery, this);\n        this.parent[action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n        this.parent[action](events.resetVirtualFocus, this.resetVirtualFocus, this);\n        this.parent[action](events.refreshVirtualEditFormCells, this.refreshCells, this);\n        this.parent[action](events.scrollToEdit, this.scrollToEdit, this);\n        var event = this.actions;\n        for (var i = 0; i < event.length; i++) {\n            this.parent[action](event[i] + \"-begin\", this.onActionBegin, this);\n        }\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.scrollToEdit = function (col) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var allowScroll = true;\n        this.validationCheck = true;\n        if (this.isAdd && this.content.scrollTop > 0) {\n            allowScroll = false;\n            var keys = Object.keys(this.offsets);\n            this.content.scrollTop = this.parent.editSettings.newRowPosition === 'Top' ? 0 : this.offsets[keys.length - 1];\n        }\n        var row = this.parent.getRowByIndex(this.editedRowIndex);\n        if (!row && !isNullOrUndefined(this.editedRowIndex)) {\n            if (!row || !this.isRowInView(row)) {\n                var rowIndex = this.parent.getRowHeight();\n                var scrollTop = this.editedRowIndex * rowIndex;\n                if (!isNullOrUndefined(scrollTop)) {\n                    allowScroll = false;\n                    this.content.scrollTop = scrollTop;\n                }\n            }\n        }\n        if (col && allowScroll) {\n            var offset = this.vgenerator.cOffsets[(col.index - this.parent.getVisibleFrozenColumns()) - 1];\n            if (!this.parent.enableColumnVirtualization) {\n                var header = this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid=\"' + col.uid + '\"]');\n                offset = isFrozen ? header.parentElement.offsetLeft\n                    - this.parent.getFrozenVirtualHeader().offsetWidth\n                    : header.parentElement.offsetLeft;\n            }\n            if (isFrozen) {\n                this.parent.getMovableVirtualContent().scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n            }\n            else {\n                this.content.scrollLeft = this.parent.enableRtl ? -Math.abs(offset) : offset;\n            }\n        }\n        if (col && !allowScroll) {\n            this.validationCol = col;\n        }\n    };\n    VirtualContentRenderer.prototype.refreshCells = function (rowObj) {\n        rowObj.cells = this.vgenerator.generateCells(rowObj.foreignKeyData);\n    };\n    VirtualContentRenderer.prototype.resetVirtualFocus = function (e) {\n        this.isCancel = e.isCancel;\n    };\n    /**\n     * @param {Object} data - specifies the data\n     * @param {Object} data.virtualData -specifies the data\n     * @param {boolean} data.isAdd - specifies isAdd\n     * @param {boolean} data.isCancel - specifies boolean in cancel\n     * @param {boolean} data.isScroll - specifies boolean for scroll\n     * @returns {void}\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getVirtualData = function (data) {\n        if (this.isNormaledit) {\n            var error = this.parent.element.querySelector('.e-griderror:not([style*=\"display: none\"])');\n            var keys = Object.keys(this.virtualData);\n            data.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n            if (error) {\n                return;\n            }\n            this.virtualData = keys.length ? this.virtualData : data.virtualData;\n            this.getVirtualEditedData(this.virtualData);\n            data.virtualData = this.virtualData;\n            data.isAdd = this.isAdd;\n            data.isCancel = this.isCancel;\n        }\n    };\n    VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n        this.isContextMenuOpen = args.isOpen;\n    };\n    VirtualContentRenderer.prototype.editCancel = function (args) {\n        var dataIndex = getEditedDataIndex(this.parent, args.data);\n        if (!isNullOrUndefined(dataIndex)) {\n            args.data = this.parent.getCurrentViewRecords()[dataIndex];\n        }\n    };\n    VirtualContentRenderer.prototype.editSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewData(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n        var dataIndex = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(dataIndex)) {\n            this.parent.getCurrentViewRecords()[dataIndex] = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionBegin = function (args) {\n        if (args.requestType !== 'virtualscroll') {\n            this.requestType = args.requestType;\n        }\n        if (!args.cancel) {\n            this.parent.notify(events.refreshVirtualFrozenRows, args);\n        }\n    };\n    VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n        // To decide the action (select or scroll), when using arrow keys for cell focus\n        var ele = document.activeElement;\n        if (ele.classList.contains(literals.rowCell)\n            && e && (e.action === 'upArrow' || e.action === 'downArrow')) {\n            var rowIndex = parseInt(ele.parentElement.getAttribute(literals.ariaRowIndex), 10);\n            if (e && (e.action === 'downArrow' || e.action === 'upArrow')) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                if (e.action === 'downArrow') {\n                    rowIndex += 1;\n                }\n                else {\n                    rowIndex -= 1;\n                }\n                this.rowIndex = rowIndex;\n                this.cellIndex = parseInt(ele.getAttribute(literals.ariaColIndex), 10);\n                var row = this.parent.getRowByIndex(rowIndex);\n                var page = this.parent.pageSettings.currentPage;\n                var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n                var emptyRow = false;\n                if (isNullOrUndefined(row)) {\n                    emptyRow = true;\n                    if ((e.action === 'downArrow' && page === this.maxPage - 1) || (e.action === 'upArrow' && page === 1)) {\n                        emptyRow = false;\n                    }\n                }\n                if (emptyRow || (ensureLastRow(row, this.parent) && e.action === 'downArrow')\n                    || (ensureFirstRow(row, this.parent.getRowHeight() * 2) && e.action === 'upArrow')) {\n                    this.activeKey = e.action;\n                    scrollEle.scrollTop = e.action === 'downArrow' ?\n                        (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n                }\n                else {\n                    this.activeKey = this.empty;\n                }\n                this.parent.selectRow(rowIndex);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.editActionBegin = function (e) {\n        this.editedRowIndex = e.index;\n        var rowData = extend({}, this.getRowObjectByIndex(e.index));\n        var keys = Object.keys(this.virtualData);\n        e.data = keys.length ? this.virtualData : rowData;\n        e.isScroll = keys.length !== 0 && this.currentInfo.sentinelInfo && this.currentInfo.sentinelInfo.axis === 'X';\n    };\n    VirtualContentRenderer.prototype.refreshCache = function (args) {\n        var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n        var index = this.editedRowIndex - ((block - 1) * this.getBlockSize());\n        this.vgenerator.cache[block][index].data = args.data;\n        if (this.vgenerator.movableCache[block]) {\n            this.vgenerator.movableCache[block][index].data = args.data;\n        }\n        if (this.vgenerator.frozenRightCache[block]) {\n            this.vgenerator.frozenRightCache[block][index].data = args.data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionComplete = function (args) {\n        var editRequestTypes = ['delete', 'save', 'cancel'];\n        var dataActionRequestTypes = ['sorting', 'filtering', 'grouping', 'refresh', 'searching', 'ungrouping', 'reorder'];\n        if (editRequestTypes.some(function (value) { return value === args.requestType; })) {\n            this.refreshOffsets();\n            if (this.parent.isFrozenGrid()) {\n                this.vgenerator.refreshColOffsets();\n                this.parent.contentModule.virtualRenderer.virtualEle.setVirtualHeight();\n            }\n            else {\n                this.refreshVirtualElement();\n            }\n        }\n        if (this.isNormaledit && (dataActionRequestTypes.some(function (value) { return value === args.requestType; })\n            || editRequestTypes.some(function (value) { return value === args.requestType; }))) {\n            this.isCancel = true;\n            this.isAdd = false;\n            this.editedRowIndex = this.empty;\n            this.virtualData = {};\n            if (this.parent.editModule) {\n                this.parent.editModule.editModule.previousData = undefined;\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.requestType === 'filterafteropen'\n            && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n            this.parent.resetFilterDlgPosition(args.columnName);\n        }\n    };\n    VirtualContentRenderer.prototype.resetIsedit = function () {\n        if (this.parent.enableVirtualization && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length)\n                || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n        if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n            if (this.parent.element.querySelector('.e-gridform')) {\n                var editForm = this.parent.element.querySelector('.' + literals.editedRow);\n                var addForm = this.parent.element.querySelector('.' + literals.addedRow);\n                if (editForm || addForm) {\n                    var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex))\n                        : extend({}, this.emptyRowData);\n                    var keys = Object.keys(this.virtualData);\n                    this.virtualData = keys.length ? this.getVirtualEditedData(this.virtualData) : this.getVirtualEditedData(rowData);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.columnModel.filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    VirtualContentRenderer.prototype.addActionBegin = function (args) {\n        if (this.isNormaledit) {\n            if (!Object.keys(this.emptyRowData).length) {\n                this.createEmptyRowdata();\n            }\n            this.isAdd = true;\n            var page = this.parent.pageSettings.currentPage;\n            if (!this.parent.frozenRows && this.content.scrollTop > 0 && this.parent.editSettings.newRowPosition === 'Top') {\n                this.isAdd = true;\n                this.onActionBegin();\n                args.startEdit = false;\n                this.content.scrollTop = 0;\n            }\n            if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.isAdd = true;\n                this.parent.setProperties({ pageSettings: { currentPage: this.maxPage - 1 } }, true);\n                args.startEdit = false;\n                this.content.scrollTop = this.offsets[this.offsetKeys.length];\n            }\n        }\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Object} returns the object\n     * @hidden\n     */\n    VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n        var data = this.getRowCollection(index, false, true);\n        return data;\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n        if (action !== 'virtualscroll') {\n            this.isAdd = false;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var row;\n        if (isGroupAdaptive(this.parent)) {\n            row = this.parent.getDataRows()[index];\n        }\n        else if (this.prevInfo) {\n            row = this.getRowCollection(index, false);\n        }\n        return row;\n    };\n    VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, true);\n    };\n    VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false, false, true);\n    };\n    VirtualContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        var rowCollection = isMovable ? this.parent.getMovableDataRows() : this.parent.getDataRows();\n        rowCollection = isFrozenRight ? this.parent.getFrozenRightDataRows() : rowCollection;\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        if (isRowObject && this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n            startIdx = parseInt(this.parent.getRows()[0].getAttribute(literals.ariaRowIndex), 10);\n            collection = collection.filter(function (m) { return isNullOrUndefined(m.items); });\n        }\n        var selectedRow = collection[index - startIdx];\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            if (!isRowObject) {\n                selectedRow = index <= this.parent.frozenRows ? rowCollection[index]\n                    : rowCollection[(index - startIdx) + this.parent.frozenRows];\n            }\n            else {\n                selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[index].data : selectedRow;\n            }\n        }\n        return selectedRow;\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        // eslint-disable-next-line prefer-spread\n        var blocks = Array.apply(null, Array(total)).map(function () { return ++row; });\n        for (var i = 0; i < blocks.length; i++) {\n            var tmp = (this.vgenerator.cache[blocks[i]] || []).length;\n            var rem = !isGroupAdaptive(this.parent) ? this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(this.parent) && blocks[i] in this.vgenerator.cache ?\n                tmp * this.parent.getRowHeight() : rem && blocks[i] === total ? rem * this.parent.getRowHeight() :\n                this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            this.offsets[blocks[i]] = (this.offsets[blocks[i] - 1] | 0) + size;\n            this.tmpOffsets[blocks[i]] = this.offsets[blocks[i] - 1] | 0;\n        }\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fcntColGrp;\n        var mcntColGrp;\n        if (frozenCols) {\n            fcntColGrp = [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('col'));\n            mcntColGrp = [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('col'));\n        }\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var isRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            isRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            var colGrp = void 0;\n            if (fcntColGrp && mcntColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mcntColGrp;\n                    tr = this.parent.getMovableRows();\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fcntColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            }\n            if (!isRefresh) {\n                var width = void 0;\n                if (column.width) {\n                    if (column.visible) {\n                        width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                    }\n                    else {\n                        width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                    }\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    if (this.parent.enableColumnVirtualization) {\n                        this.virtualEle.setWrapperWidth(width + '');\n                    }\n                    this.refreshVirtualElement();\n                }\n                else {\n                    isRefresh = true;\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (isRefresh || frozenCols) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        var _this = this;\n        args.isAvailable = args.selectedIndex < this.count;\n        if (args.isAvailable && !this.isContextMenuOpen && this.activeKey !== 'upArrow'\n            && this.activeKey !== 'downArrow' && !this.isSelection && !this.requestTypes.some(function (value) { return value === _this.requestType; })\n            && !this.parent.selectionModule.isInteracted) {\n            var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n            var rowHeight = this.parent.getRowHeight();\n            if (!selectedRow || !this.isRowInView(selectedRow)) {\n                this.isSelection = true;\n                this.selectedRowIndex = args.selectedIndex;\n                var scrollTop = (args.selectedIndex + 1) * rowHeight;\n                if (!isNullOrUndefined(scrollTop)) {\n                    var direction = this.content.scrollTop < scrollTop ? 'down' : 'up';\n                    this.selectRowIndex = args.selectedIndex;\n                    this.content.scrollTop = scrollTop;\n                    this.isSelectionScroll = this.observer.check(direction);\n                }\n            }\n        }\n        if (this.parent.isFrozenGrid() && this.requestType) {\n            if (this.parent.getTablesCount() === this.frzIdx) {\n                this.requestType = this.empty;\n                this.frzIdx = 1;\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.requestType = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.isRowInView = function (row) {\n        var top = row.getBoundingClientRect().top;\n        var bottom = row.getBoundingClientRect().bottom;\n        return (top >= this.content.getBoundingClientRect().top && bottom <= this.content.getBoundingClientRect().bottom);\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.isMovable = false;\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().querySelector('.' + literals.headerContent);\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        if (!this.isMovable) {\n            this.virtualEle.wrapper.appendChild(table);\n        }\n        else {\n            this.virtualEle.movableWrapper.appendChild(table);\n            this.isMovable = false;\n        }\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.isMovable = this.parent.isFrozenGrid();\n        this.setFrozenTable(this.parent.getMovableVirtualContent());\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.' + literals.headerContent)));\n        _super.prototype.refreshUI.call(this);\n        this.setFrozenTable(this.parent.getFrozenVirtualContent());\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var needFullRefresh;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fhdrColGrp;\n        var mhdrColGrp;\n        if (frozenCols) {\n            fhdrColGrp = [].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll('col'));\n            mhdrColGrp = [].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll('col'));\n        }\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            var colGrp = void 0;\n            if (fhdrColGrp && mhdrColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mhdrColGrp;\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fhdrColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            else {\n                needFullRefresh = true;\n            }\n            if (needFullRefresh && !frozenCols) {\n                this.refreshUI();\n            }\n        }\n        if (frozenCols) {\n            this.parent.notify(events.columnPositionChanged, {});\n        }\n    };\n    VirtualHeaderRenderer.prototype.setFrozenTable = function (content) {\n        if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization\n            && this.parent.contentModule.isXaxis()) {\n            this.parent.contentModule\n                .setTable(content.querySelector('.' + literals.table));\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var table = this.getTable();\n        if (frozenCols && col.getFreezeTableName() === 'movable') {\n            table = this.parent.getMovableVirtualHeader().querySelector('.' + literals.table);\n        }\n        for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                if (displayVal === '') {\n                    removeClass([ele], 'e-hide');\n                }\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) + \"; display: flex\" });\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n        this.placeholder = createElement('div', { className: 'e-virtualtrack' });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderMovableWrapper = function (height) {\n        this.movableWrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.movableContent.appendChild(this.movableWrapper);\n    };\n    VirtualElementHandler.prototype.renderMovablePlaceHolder = function () {\n        this.movablePlaceholder = createElement('div', { className: 'e-virtualtrack' });\n        this.movableContent.appendChild(this.movablePlaceholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.adjustMovableTable = function (xValue, yValue) {\n        this.movableWrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setMovableWrapperWidth = function (width, full) {\n        this.movableWrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setMovableVirtualHeight = function (height, width) {\n        this.movablePlaceholder.style.height = height + \"px\";\n        this.movablePlaceholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n        wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}