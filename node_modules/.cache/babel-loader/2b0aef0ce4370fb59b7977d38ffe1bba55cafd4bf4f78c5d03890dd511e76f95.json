{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */function (_super) {\n  __extends(GroupLazyLoadRenderer, _super);\n  function GroupLazyLoadRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n    _this.childCount = 0;\n    _this.scrollData = [];\n    _this.isFirstChildRow = false;\n    _this.isScrollDown = false;\n    _this.isScrollUp = false;\n    _this.groupCache = {};\n    _this.startIndexes = {};\n    _this.captionCounts = {};\n    _this.rowsByUid = {};\n    _this.objIdxByUid = {};\n    _this.initialGroupCaptions = {};\n    _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete', 'filterbeforeopen', 'filterchoicerequest'];\n    /** @hidden */\n    _this.cacheMode = false;\n    /** @hidden */\n    _this.cacheBlockSize = 5;\n    /** @hidden */\n    _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n    /** @hidden */\n    _this.allowCaseSensitive = false;\n    _this.locator = locator;\n    _this.groupGenerator = new GroupModelGenerator(_this.parent);\n    _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n    _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n    _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n    _this.eventListener();\n    return _this;\n  }\n  GroupLazyLoadRenderer.prototype.eventListener = function () {\n    this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n    this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n    this.parent.on(events.setGroupCache, this.setCache, this);\n    this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n    this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n    var _this = this;\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var oriIndex = this.getRowObjectIndexByUid(uid);\n    var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n    var data = rowsObject[oriIndex];\n    var key = getGroupKeysAndFields(oriIndex, rowsObject);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: data,\n      enableCaching: true,\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.keys = key.keys;\n      args.fields = key.fields;\n      args.rowIndex = tr.rowIndex;\n      args.makeRequest = !args.enableCaching || !isRowExist;\n      if (!args.enableCaching && isRowExist) {\n        _this.clearCache([uid]);\n      }\n      args.skip = 0;\n      args.take = _this.pageSize;\n      data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n      _this.captionRowExpand(args);\n    });\n  };\n  /**\n   * @param {HTMLTableRowElement} tr - specifies the table row element\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n    var _this = this;\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var rowIdx = tr.rowIndex;\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var e = {\n      captionRowElement: tr,\n      groupInfo: cache[captionIndex],\n      cancel: false\n    };\n    this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n      if (args.cancel) {\n        return;\n      }\n      args.isExpand = false;\n      _this.removeRows(captionIndex, rowIdx);\n    });\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n    this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n    this.blockSize = Math.ceil(this.pageSize / 2);\n  };\n  /**\n   * @returns {void}\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n    this.clearCache();\n  };\n  GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n    uids = uids ? uids : this.getInitialCaptionIndexes();\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (uids.length) {\n      for (var i = 0; i < uids.length; i++) {\n        var capIdx = this.getRowObjectIndexByUid(uids[i]);\n        var capRow = cache[capIdx];\n        if (!capRow) {\n          continue;\n        }\n        if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n          for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n            if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n              break;\n            }\n            if (cache[i_1].isCaptionRow) {\n              delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n            }\n          }\n        }\n        if (capRow.isExpand) {\n          var tr = this.parent.getRowElementByUID(capRow.uid);\n          if (!tr) {\n            return;\n          }\n          this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n        }\n        var child = this.getNextChilds(capIdx);\n        if (!child.length) {\n          continue;\n        }\n        var subChild = [];\n        if (child[child.length - 1].isCaptionRow) {\n          subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n        }\n        var start = cache.indexOf(child[0]);\n        var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n        cache.splice(start, end - (start - 1));\n        this.refreshCaches();\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    for (var i = 0; i < cache.length; i++) {\n      this.maintainRows(cache[i], i);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n    var page = this.parent.pageSettings.currentPage;\n    var uids = [];\n    for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n      uids.push(this.initialGroupCaptions[page][i].uid);\n    }\n    return uids;\n  };\n  /**\n   * @param {string} uid - specifies the uid\n   * @returns {number} returns the row object uid\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n    return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n  };\n  GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n    if (this.parent.groupSettings.columns.length && args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n      if (!args.collapse && parentsUntil(args.target, literals.row)) {\n        return;\n      }\n      var row = args.target.parentElement;\n      var uid = row.getAttribute('data-uid');\n      if (args.collapse) {\n        var rowObj = this.getRowByUid(uid);\n        var capRow = this.getRowByUid(rowObj.parentUid);\n        if (capRow.isCaptionRow && capRow.isExpand) {\n          var capEle = this.getRowElementByUid(rowObj.parentUid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n        }\n      } else {\n        var capRow = this.getRowByUid(uid);\n        if (capRow.isCaptionRow && !capRow.isExpand) {\n          var capEle = this.getRowElementByUid(uid);\n          this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n    return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n  };\n  GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n    if (!args.cancel) {\n      if (!this.requestType.some(function (value) {\n        return value === args.requestType;\n      })) {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n      if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n        var keys = Object.keys(this.groupCache);\n        for (var j = 0; j < keys.length; j++) {\n          var cache = this.groupCache[keys[j]];\n          for (var i = 0; i < cache.length; i++) {\n            if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(cache[i], null, keys[j]);\n            }\n            if (cache[i].isDataRow) {\n              var from = args.fromIndex + cache[i].indent;\n              var to = args.toIndex + cache[i].indent;\n              this.moveCells(cache[i].cells, from, to);\n            }\n          }\n        }\n      }\n      if (args.requestType === 'delete' || args.action === 'add' && args.requestType === 'save') {\n        this.groupCache = {};\n        this.resetRowMaintenance();\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n    if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit' && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n      this.scrollReset();\n    }\n  };\n  GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n    this.startIndexes = {};\n    this.captionCounts = {};\n    this.rowsByUid = {};\n    this.objIdxByUid = {};\n    this.initialGroupCaptions = {};\n  };\n  GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n    if (from >= arr.length) {\n      var k = from - arr.length;\n      while (k-- + 1) {\n        arr.push(undefined);\n      }\n    }\n    arr.splice(from, 0, arr.splice(to, 1)[0]);\n  };\n  GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var aggUid;\n    if (this.parent.aggregates.length) {\n      var agg = this.getAggregateByCaptionIndex(idx);\n      aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n    }\n    var indent = rows[idx].indent;\n    this.addClass(this.getNextChilds(idx));\n    rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n    var capUid;\n    for (var i = idx + 1; i < rows.length; i++) {\n      if (rows[i].indent === indent || rows[i].indent < indent) {\n        capUid = rows[i].uid;\n        break;\n      }\n      if (rows[i].isCaptionRow && rows[i].isExpand) {\n        this.addClass(this.getNextChilds(i));\n      }\n    }\n    for (var i = trIdx + 1; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === capUid) {\n        break;\n      } else if (trs[i].getAttribute('data-uid') === aggUid) {\n        remove(trs[i]);\n        break;\n      } else {\n        remove(trs[i]);\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n    var last = rows[this.blockSize];\n    if (last) {\n      last.lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n    var group = this.groupCache[this.parent.pageSettings.currentPage];\n    var rows = rowObjects ? rowObjects : group;\n    var indent = group[index].indent + 1;\n    var childRows = [];\n    for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n      if (rows[i].indent < indent) {\n        break;\n      }\n      if (rows[i].indent === indent) {\n        childRows.push(rows[i]);\n      }\n    }\n    return childRows;\n  };\n  GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n    this.setStartIndexes();\n    var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n    var uid = tr.getAttribute('data-uid');\n    var captionIndex = this.getRowObjectIndexByUid(uid);\n    var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n    var rows = args.isRowExist ? args.isScroll ? this.scrollData : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n    this.scrollData = [];\n    if (!args.isRowExist) {\n      this.setRowIndexes(captionIndex, captionRow);\n      this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n      if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n        for (var i = 0; i < args.data.length; i++) {\n          var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n          rows.push(data);\n          if (this.parent.aggregates.length) {\n            rows = rows.concat(this.summaryModelGen.generateRows(args.data[i], {\n              level: args.level + 1,\n              parentUid: data.uid\n            }));\n          }\n        }\n      } else {\n        this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n        rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n      }\n    }\n    var trIdx = args.isScroll ? this.rowIndex : args.index;\n    var nxtChild = this.getNextChilds(captionIndex, rows);\n    var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n    if (!args.isRowExist && !lastRow) {\n      nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n    }\n    if (!lastRow) {\n      nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n    }\n    var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n    if (!args.up) {\n      if (!args.isRowExist) {\n        this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n      }\n    }\n    this.render(trIdx, rows, lastRow, aggregates);\n    if (this.isFirstChildRow && !args.up) {\n      this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n    }\n    this.isFirstChildRow = false;\n    this.rowIndex = undefined;\n    this.rowObjectIndex = undefined;\n    this.childCount = 0;\n  };\n  GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n    if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n      this.captionCounts[this.parent.pageSettings.currentPage] = {};\n    }\n    if (row.isCaptionRow) {\n      this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    if (isScroll) {\n      return cache[this.rowObjectIndex].index + 1;\n    }\n    var count = 0;\n    var idx = 0;\n    var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n    if (prevCapRow) {\n      idx = this.prevCaptionCount(prevCapRow);\n    }\n    if (cache[capIdx].indent > 0) {\n      for (var i = capIdx - 1; i >= 0; i--) {\n        if (cache[i].indent < cache[capIdx].indent) {\n          break;\n        }\n        if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n          count = count + cache[i].data.count;\n        }\n      }\n    }\n    var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n    var page = this.parent.pageSettings.currentPage;\n    var cache = this.groupCache[page];\n    var idx = 0;\n    for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n      if (cache[i].indent === 0) {\n        break;\n      }\n      if (cache[i].indent < prevCapRow.indent) {\n        break;\n      }\n      if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n        var count = this.captionCounts[page][cache[i].uid];\n        idx = idx + (count ? count : cache[i].data.count);\n      }\n    }\n    var capRow = this.getRowByUid(prevCapRow.parentUid);\n    if (capRow) {\n      idx = idx + this.prevCaptionCount(capRow);\n    }\n    return idx;\n  };\n  GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n      var indexes = [];\n      var idx = void 0;\n      for (var i = 0; i < cache.length; i++) {\n        if (cache[i].isCaptionRow) {\n          if (!indexes.length) {\n            indexes.push(0);\n          } else {\n            indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n          }\n          idx = i;\n        }\n      }\n      this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n    return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n  };\n  GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n    row.data.count = count;\n  };\n  GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n    var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n    var scrollEle = this.parent.getContent().firstElementChild;\n    var rowHeight = this.parent.getRowHeight();\n    if (tr && aggregates.length) {\n      for (var i = aggregates.length - 1; i >= 0; i--) {\n        tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n      }\n    }\n    if (tr && rows.length) {\n      for (var i = rows.length - 1; i >= 0; i--) {\n        if (this.confirmRowRendering(rows[i])) {\n          tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n          if (this.isScrollDown) {\n            scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n          }\n          if (this.isScrollUp) {\n            scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n          }\n        }\n      }\n    }\n    this.isScrollDown = false;\n    this.isScrollUp = false;\n  };\n  /**\n   * @param {Row<Column>} row - specifies the row\n   * @param {number} index - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    if (!this.rowsByUid[page]) {\n      this.rowsByUid[page] = {};\n      this.objIdxByUid[page] = {};\n    }\n    if (row.uid) {\n      this.rowsByUid[page][row.uid] = row;\n    }\n    this.objIdxByUid[page][row.uid] = index;\n  };\n  GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n    var check = true;\n    if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n      var cap = this.getRowByUid(row.parentUid);\n      if (cap.isCaptionRow && !cap.isExpand) {\n        check = false;\n      }\n    }\n    return check;\n  };\n  GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rowsObject = this.groupCache[page];\n    this.rowsByUid[page] = {};\n    this.objIdxByUid[page] = {};\n    var newRowsObject = [];\n    var k = 0;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (i === index) {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n        for (var j = 0; j < newRows.length; j++) {\n          this.maintainRows(newRows[j], k);\n          newRowsObject.push(newRows[j]);\n          k++;\n        }\n      } else {\n        this.maintainRows(rowsObject[i], k);\n        newRowsObject.push(rowsObject[i]);\n        k++;\n      }\n    }\n    this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n    this.updateCurrentViewData();\n  };\n  GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    var parent = cache[index];\n    var indent = parent.indent;\n    var uid = parent.uid;\n    var agg = [];\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].indent === indent) {\n        break;\n      }\n      if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n        agg.push(cache[i]);\n      }\n    }\n    return agg;\n  };\n  GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n    var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n    var parentRow = cache[index];\n    var agg = [];\n    if (!parentRow.isCaptionRow || parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg) {\n      return [];\n    }\n    if (includeAgg && this.parent.aggregates.length) {\n      agg = this.getAggregateByCaptionIndex(index);\n    }\n    var indent = parentRow.indent;\n    var uid = parentRow.uid;\n    var rows = [];\n    var count = 0;\n    for (var i = index + 1; i < cache.length; i++) {\n      if (cache[i].parentUid === uid) {\n        if (isNullOrUndefined(cache[i].indent)) {\n          continue;\n        }\n        count++;\n        rows.push(cache[i]);\n        if (deep && cache[i].isCaptionRow) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n        }\n        if (block && count === this.pageSize) {\n          break;\n        }\n      }\n      if (cache[i].indent === indent) {\n        break;\n      }\n    }\n    return rows.concat(agg);\n  };\n  /**\n   * @param {boolean} isReorder - specifies the isreorder\n   * @returns {Row<Column>[]} returns the row\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n    var rows = [];\n    var cache = this.groupCache[this.parent.pageSettings.currentPage];\n    if (isReorder) {\n      return this.getRenderedRowsObject();\n    }\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].indent === 0) {\n        rows.push(cache[i]);\n        rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n      }\n    }\n    return rows;\n  };\n  /**\n   * @returns {Row<Column>[]} retruns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n    var rows = [];\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    for (var i = 0; i < trs.length; i++) {\n      rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var k = index;\n    for (var i = 0; i < this.pageSize; i++) {\n      if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n        break;\n      }\n      if (rowsObject[k].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[k]);\n        if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n        }\n      }\n      if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n        i--;\n      }\n      k++;\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n    var rows = [];\n    var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n    var str = false;\n    for (var i = 0; i < rowsObject.length; i++) {\n      if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n        break;\n      }\n      if (!str && rowsObject[i].uid === start) {\n        str = true;\n      }\n      if (str && rowsObject[i].indent === rowsObject[index].indent) {\n        rows.push(rowsObject[i]);\n        if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n          rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n        }\n      }\n    }\n    return rows;\n  };\n  GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n    if (this.parent.isDestroyed || this.childCount) {\n      return;\n    }\n    var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n    var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n    var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n    var tr;\n    var lazyLoadDown = false;\n    var lazyLoadUp = false;\n    var lazyLoadEnd = false;\n    if (e.scrollDown && downTrs.length) {\n      var result = this.findRowElements(downTrs);\n      tr = result.tr;\n      lazyLoadDown = result.entered;\n    }\n    if (!e.scrollDown && endTrs) {\n      for (var i = 0; i < endTrs.length; i++) {\n        var top_1 = endTrs[i].getBoundingClientRect().top;\n        var scrollHeight = this.parent.getContent().scrollHeight;\n        if (top_1 > 0 && top_1 < scrollHeight) {\n          tr = endTrs[i];\n          lazyLoadEnd = true;\n          this.rowIndex = tr.rowIndex;\n          break;\n        }\n      }\n    }\n    if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n      var result = this.findRowElements(upTrs);\n      tr = result.tr;\n      lazyLoadUp = result.entered;\n    }\n    if (tr) {\n      if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n        this.scrollDownHandler(tr);\n      }\n      if (!e.scrollDown && lazyLoadEnd && tr) {\n        this.scrollUpEndRowHandler(tr);\n      }\n      if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n        this.scrollUpHandler(tr);\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    if (currentPage === 1) {\n      return;\n    }\n    this.childCount = currentPage * this.pageSize;\n    index = this.getCurrentBlockEndIndex(childRow, index);\n    if (this.childCount < parentCapRow.data.count) {\n      tr.classList.remove('e-not-lazyload-end');\n      childRow.lazyLoadCssClass = '';\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n      var key = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: key.fields,\n        keys: key.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount >= this.pageSize * this.cacheBlockSize) {\n        var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_1.indexOf(rows[idx]) / this.pageSize);\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n        this.removeBlock(uid, isRowExist, removeBlock, child_1);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var index = this.getRowObjectIndexByUid(uid);\n    var idx = index;\n    var childRow = rows[index];\n    var parentCapRow = this.getRowByUid(childRow.parentUid);\n    var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(childRow);\n    var currentPage = Math.ceil(childIdx / this.pageSize);\n    this.childCount = currentPage * this.pageSize;\n    index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n    var lastchild = rows[index];\n    var lastRow = this.getRowElementByUid(lastchild.uid);\n    this.rowIndex = lastRow.rowIndex;\n    index = this.getCurrentBlockEndIndex(lastchild, index);\n    if (this.childCount < parentCapRow.data.count) {\n      var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n      if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n        this.childCount = 0;\n        return;\n      }\n      if (currentPage > 1 || !this.cacheMode) {\n        tr.classList.remove('e-lazyload-middle-down');\n        lastRow.classList.remove('e-not-lazyload-end');\n        lastchild.lazyLoadCssClass = '';\n      }\n      this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n      var query = getGroupKeysAndFields(capRowObjIdx, rows);\n      var args = {\n        rowIndex: capRowEleIndex,\n        makeRequest: !isRowExist,\n        groupInfo: parentCapRow,\n        fields: query.fields,\n        keys: query.keys,\n        skip: this.childCount,\n        take: this.pageSize,\n        isScroll: true\n      };\n      if (this.cacheMode && this.childCount - this.pageSize >= this.pageSize * this.cacheBlockSize) {\n        this.isScrollDown = true;\n        var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n        var currenBlock = Math.ceil(child_2.indexOf(rows[idx]) / this.pageSize) - 1;\n        var removeBlock = currenBlock - (this.cacheBlockSize - 1) + 1;\n        this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n        args.cachedRowIndex = removeBlock * this.pageSize;\n      }\n      this.captionRowExpand(args);\n    } else {\n      this.childCount = 0;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    if (row.isCaptionRow) {\n      if (row.isExpand) {\n        var childCount = this.getChildRowsByParentIndex(index, true).length;\n        this.rowIndex = this.rowIndex + childCount;\n      }\n      var agg = this.getAggregateByCaptionIndex(index);\n      this.rowObjectIndex = this.rowObjectIndex + agg.length;\n      var idx = index;\n      for (var i = idx + 1; i < rows.length; i++) {\n        if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n          index = idx;\n          break;\n        } else {\n          idx++;\n        }\n      }\n    }\n    return index;\n  };\n  GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid1 = child[(removeBlock + 1) * this.pageSize - 1 - this.blockSize].uid;\n    var uid2 = child[removeBlock * this.pageSize - this.pageSize].uid;\n    var uid3 = child[removeBlock * this.pageSize].uid;\n    var firstIdx = this.getRowObjectIndexByUid(uid1);\n    rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n    this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n    if (lastchild) {\n      this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n      this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n      this.getRowByUid(uid2).lazyLoadCssClass = '';\n    }\n    if (isRowExist) {\n      this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n    } else {\n      this.uid1 = uid2;\n      this.uid2 = uid3;\n      this.uid3 = lastchild ? lastchild.uid : uid;\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n    var page = this.parent.pageSettings.currentPage;\n    var rows = this.groupCache[page];\n    var uid = tr.getAttribute('data-uid');\n    var row = this.getRowByUid(uid);\n    var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n    var parentCapRow = this.getRowByUid(row.parentUid);\n    var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n    var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n    var capRowEleIndex = captionRowEle.rowIndex;\n    var child = this.getChildRowsByParentIndex(capRowObjIdx);\n    var childIdx = child.indexOf(rows[index]);\n    var currenBlock = Math.floor(childIdx / this.pageSize);\n    var idx = this.blockSize;\n    if (this.blockSize * 2 > this.pageSize) {\n      idx = this.blockSize * 2 - this.pageSize;\n      idx = this.blockSize - idx;\n    }\n    var start = child[childIdx - (idx - 1) - this.pageSize].uid;\n    var end = child[childIdx - (idx - 1)].uid;\n    this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n    this.isFirstChildRow = currenBlock > 1;\n    if (this.isFirstChildRow) {\n      this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n    }\n    this.getRowByUid(end).lazyLoadCssClass = '';\n    this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n    var removeBlock = currenBlock + this.cacheBlockSize;\n    if (child.length !== parentCapRow.data.count && removeBlock * this.pageSize > child.length) {\n      this.isFirstChildRow = false;\n      this.scrollData[0].lazyLoadCssClass = '';\n      this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n      return;\n    }\n    var count = removeBlock * this.pageSize > parentCapRow.data.count ? parentCapRow.data.count : removeBlock * this.pageSize;\n    var size = removeBlock * this.pageSize > parentCapRow.data.count ? this.pageSize - (this.pageSize * removeBlock - parentCapRow.data.count) : this.pageSize;\n    var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n    var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[count - 1].uid;\n    var uid2 = child[count - size].uid;\n    var uid3 = child[count - size - 1].uid;\n    var lastIdx = this.objIdxByUid[page][uid2] - idx;\n    if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n      var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n      if (trEle) {\n        trEle.classList.add('e-lazyload-middle-down');\n      }\n    }\n    this.getRowByUid(uid1).lazyLoadCssClass = '';\n    this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n    this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n    this.removeBottomRows(uid1, uid2, uid3);\n    this.rowIndex = tr.rowIndex - idx;\n    if (tr.classList.length > 1) {\n      tr.classList.remove('e-lazyload-middle-up');\n    } else {\n      tr.removeAttribute('class');\n    }\n    if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n      this.childCount = 0;\n      this.scrollData = [];\n      return;\n    }\n    var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n    var args = {\n      rowIndex: capRowEleIndex,\n      makeRequest: false,\n      groupInfo: parentCapRow,\n      fields: key.fields,\n      keys: key.keys,\n      skip: this.childCount,\n      take: this.pageSize,\n      isScroll: true,\n      scrollUp: true\n    };\n    this.isScrollUp = true;\n    this.captionRowExpand(args);\n  };\n  GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n    var entered = false;\n    var tr;\n    for (var i = 0; i < rows.length; i++) {\n      var rowIdx = rows[i].rowIndex;\n      if (isRowEnteredInGrid(rowIdx, this.parent)) {\n        entered = true;\n        this.rowIndex = rowIdx;\n        tr = rows[i];\n        break;\n      }\n    }\n    return {\n      entered: entered,\n      tr: tr\n    };\n  };\n  GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n    return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n  };\n  GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var start = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid3) {\n        var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n        if (tr) {\n          this.rowIndex = tr.rowIndex;\n        }\n        break;\n      }\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        start = true;\n      }\n      if (start) {\n        remove(trs[i]);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n    var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n    var trigger = false;\n    for (var i = 0; i < trs.length; i++) {\n      if (trs[i].getAttribute('data-uid') === uid2) {\n        trigger = true;\n      }\n      if (trigger) {\n        remove(trs[i]);\n        if (trs[i].getAttribute('data-uid') === uid1) {\n          break;\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.setCache = function (e) {\n    var page = this.parent.pageSettings.currentPage;\n    this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n  };\n  GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n    var _this = this;\n    var captionRow = args.groupInfo;\n    var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n    var pred = generateExpandPredicates(args.fields, args.keys, this);\n    var predicateList = getPredicates(pred);\n    var lazyLoad = {\n      level: level,\n      skip: args.skip,\n      take: args.take,\n      where: predicateList\n    };\n    if (args.makeRequest) {\n      var query = this.parent.renderModule.data.generateQuery(true);\n      if (!query.isCountRequired) {\n        query.isCountRequired = true;\n      }\n      query.lazyLoad.push({\n        key: 'onDemandGroupInfo',\n        value: lazyLoad\n      });\n      this.parent.showSpinner();\n      this.parent.renderModule.data.getData({}, query).then(function (e) {\n        _this.parent.hideSpinner();\n        if (e.result.length === 0) {\n          return;\n        }\n        if (_this.cacheMode && _this.uid1 && _this.uid2) {\n          _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n          _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n        }\n        _this.lazyLoadHandler({\n          data: e.result,\n          count: e.count,\n          level: level,\n          index: args.rowIndex,\n          isRowExist: false,\n          isScroll: args.isScroll,\n          up: false,\n          rowIndex: args.cachedRowIndex\n        });\n      }).catch(function (e) {\n        return _this.parent.renderModule.dataManagerFailure(e, {\n          requestType: 'grouping'\n        });\n      });\n    } else {\n      this.lazyLoadHandler({\n        data: null,\n        count: args.groupInfo.data.count,\n        level: level,\n        index: args.rowIndex,\n        isRowExist: true,\n        isScroll: args.isScroll,\n        up: args.scrollUp,\n        rowIndex: args.cachedRowIndex\n      });\n    }\n  };\n  GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n    this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n  };\n  GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n    var records = [];\n    this.getRows().filter(function (row) {\n      if (row.isDataRow) {\n        records[row.index] = row.data;\n      }\n    });\n    this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n    return this.groupCache;\n  };\n  /**\n   * @returns {Row<Column>[]} returns the row\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRows = function () {\n    return this.groupCache[this.parent.pageSettings.currentPage] || [];\n  };\n  /**\n   * @returns {Element} returns the element\n   * @hidden */\n  GroupLazyLoadRenderer.prototype.getRowElements = function () {\n    return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n  };\n  /**\n   * @param {number} index - specifies the index\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n    var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    var row;\n    for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n      if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n        row = tr[i];\n        break;\n      }\n    }\n    return row;\n  };\n  /**\n   * Tucntion to set the column visibility\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var rows = this.getRows();\n    var testRow;\n    rows.some(function (r) {\n      if (r.isDataRow) {\n        testRow = r;\n      }\n      return r.isDataRow;\n    });\n    var contentrows = this.getRows().filter(function (row) {\n      return !row.isDetailRow;\n    });\n    for (var i = 0; i < columns.length; i++) {\n      var column = columns[i];\n      var idx = this.parent.getNormalizedColumnIndex(column.uid);\n      var colIdx = this.parent.getColumnIndexByUid(column.uid);\n      var displayVal = column.visible === true ? '' : 'none';\n      if (idx !== -1 && testRow && idx < testRow.cells.length) {\n        setStyleAttribute(this.getColGroup().childNodes[idx], {\n          'display': displayVal\n        });\n      }\n      this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n      if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n        this.parent.updateMediaColumns(column);\n      }\n      this.parent.invokedFromMedia = false;\n    }\n  };\n  /**\n   * Function to set display.\n   *\n   * @param {Object} tr - specifies the row object\n   * @param {number} idx - specifies the index\n   * @param {string} displayVal - specifies the display value\n   * @param {Row<Column>[]} rows - specifies the array of rows\n   * @param {number} oriIdx - specifies the index\n   * @returns {void}\n   * @hidden\n   */\n  GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n    if (!this.parent.groupSettings.columns.length) {\n      setDisplayValue(tr, idx, displayVal, rows);\n    } else {\n      var keys = Object.keys(this.groupCache);\n      for (var j = 0; j < keys.length; j++) {\n        var uids = this.rowsByUid[keys[j]];\n        var idxs = Object.keys(uids);\n        for (var i = 0; i < idxs.length; i++) {\n          var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n          var row = uids[idxs[i]];\n          if (row.isCaptionRow) {\n            if (!this.captionModelGen.isEmpty()) {\n              this.changeCaptionRow(row, tr_1, keys[j]);\n            } else {\n              row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1 : row.cells[row.indent + 1].colSpan - 1;\n              if (tr_1) {\n                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n              }\n            }\n          }\n          if (row.isDataRow) {\n            this.showAndHideCells(tr_1, idx, displayVal, false);\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n          }\n          if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n            row.cells[oriIdx].visible = displayVal === '' ? true : false;\n            row.visible = row.cells.some(function (cell) {\n              return cell.isDataCell && cell.visible;\n            });\n            this.showAndHideCells(tr_1, idx, displayVal, true, row);\n          }\n        }\n      }\n    }\n  };\n  GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n    var capRow = row;\n    var captionData = row.data;\n    var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n    data.uid = row.uid;\n    data.isExpand = row.isExpand;\n    data.lazyLoadCssClass = row.lazyLoadCssClass;\n    this.rowsByUid[index][row.uid] = data;\n    this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n    if (tr) {\n      var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n      tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n    }\n  };\n  GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n    if (tr) {\n      var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n      setStyleAttribute(tr.querySelectorAll(cls)[idx], {\n        'display': displayVal\n      });\n      if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n        removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n      }\n      if (isSummary) {\n        if (row.visible && tr.classList.contains('e-hide')) {\n          removeClass([tr], ['e-hide']);\n        } else if (!row.visible) {\n          addClass([tr], ['e-hide']);\n        }\n      }\n    }\n  };\n  return GroupLazyLoadRenderer;\n}(ContentRender);\nexport { GroupLazyLoadRenderer };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","extend","remove","isNullOrUndefined","setStyleAttribute","removeClass","addClass","ContentRender","events","isRowEnteredInGrid","parentsUntil","setDisplayValue","generateExpandPredicates","getPredicates","getGroupKeysAndFields","RowRenderer","GroupModelGenerator","GroupSummaryModelGenerator","CaptionSummaryModelGenerator","literals","GroupLazyLoadRenderer","_super","parent","locator","_this","call","childCount","scrollData","isFirstChildRow","isScrollDown","isScrollUp","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","requestType","cacheMode","cacheBlockSize","ignoreAccent","allowFiltering","filterSettings","allowCaseSensitive","groupGenerator","summaryModelGen","captionModelGen","rowRenderer","eventListener","addEventListener","actionBegin","bind","actionComplete","on","initialEnd","setLazyLoadPageSize","setGroupCache","setCache","lazyLoadScrollHandler","scrollHandler","columnVisibilityChanged","setVisible","groupCollapse","collapseShortcut","captionExpand","tr","page","pageSettings","currentPage","rowsObject","uid","getAttribute","oriIndex","getRowObjectIndexByUid","isRowExist","indent","data","key","e","captionRowElement","groupInfo","enableCaching","cancel","trigger","lazyLoadGroupExpand","args","keys","fields","rowIndex","makeRequest","clearCache","skip","take","pageSize","isExpand","captionRowExpand","captionCollapse","cache","rowIdx","captionIndex","lazyLoadGroupCollapse","removeRows","scrollEle","getContent","firstElementChild","blockSize","Math","floor","offsetHeight","getRowHeight","ceil","clearLazyGroupCache","uids","getInitialCaptionIndexes","length","i","capIdx","capRow","i_1","isCaptionRow","getRowElementByUID","groupModule","expandCollapseRows","querySelector","child","getNextChilds","subChild","getChildRowsByParentIndex","indexOf","start","end","splice","refreshCaches","maintainRows","push","groupSettings","columns","target","content","parentElement","tagName","collapse","row","rowObj","getRowByUid","parentUid","capEle","getRowElementByUid","cells","some","value","resetRowMaintenance","j","isEmpty","changeCaptionRow","isDataRow","from","fromIndex","to","toIndex","moveCells","action","scrollReset","arr","k","undefined","idx","trIdx","rows","trs","slice","querySelectorAll","aggUid","aggregates","agg","getAggregateByCaptionIndex","capUid","last","lazyLoadCssClass","index","rowObjects","group","childRows","lazyLoadHandler","setStartIndexes","captionRow","isScroll","setRowIndexes","refreshCaptionRowCount","count","generateCaptionRow","level","parentGid","concat","generateRows","getStartIndex","generateDataRows","nxtChild","lastRow","up","hasLastChildRow","refreshRowObjects","rowObjectIndex","render","scrollTop","prevCapRow","prevCaptionCount","indexes","captionCount","rowCount","rowHeight","insertAdjacentElement","getColumns","confirmRowRendering","check","cap","newRows","newRowsObject","updateCurrentViewData","deep","block","includeAgg","includeCollapseAgg","parentRow","initialGroupRows","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","str","isDestroyed","downTrs","getElementsByClassName","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","scrollDown","result","findRowElements","entered","top_1","getBoundingClientRect","top","scrollHeight","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","childRow","parentCapRow","capRowObjIdx","captionRowEle","capRowEleIndex","childIdx","getCurrentBlockEndIndex","classList","child_1","currenBlock","removeBlock","cachedRowIndex","lastchild","query","child_2","uid1","uid2","uid3","firstIdx","add","removeTopRows","size","lastIdx","trEle","removeBottomRows","removeAttribute","scrollUp","field","pred","predicateList","lazyLoad","where","renderModule","generateQuery","isCountRequired","showSpinner","getData","then","hideSpinner","catch","dataManagerFailure","records","getRows","filter","currentViewData","getGroupCache","getRowElements","getRowByIndex","ariaRowIndex","toString","gObj","testRow","r","contentrows","isDetailRow","column","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","displayVal","visible","getColGroup","childNodes","setDisplayNone","getDataRows","invokedFromMedia","hideAtMedia","updateMediaColumns","oriIdx","idxs","tr_1","colSpan","showAndHideCells","cell","isDataCell","captionData","tIndex","tbody","getContentTable","replaceChild","isSummary","cls","contains"],"sources":["C:/Users/Josh/Desktop/School-work/admin_dash/Admin_Dashboard/node_modules/@syncfusion/ej2-grids/src/grid/renderer/group-lazy-load-renderer.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue, generateExpandPredicates, getPredicates, getGroupKeysAndFields } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport * as literals from '../base/string-literals';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n *\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.isScrollDown = false;\n        _this.isScrollUp = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete',\n            'filterbeforeopen', 'filterchoicerequest'];\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /**\n     * @param {HTMLTableRowElement} tr - specifies the table row element\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /**\n     * @returns {void}\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /**\n     * @param {string} uid - specifies the uid\n     * @returns {number} returns the row object uid\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, literals.content) && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, literals.row)) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    if (!indexes.length) {\n                        indexes.push(0);\n                    }\n                    else {\n                        indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    }\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var rowHeight = this.parent.getRowHeight();\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                    if (this.isScrollDown) {\n                        scrollEle.scrollTop = scrollEle.scrollTop - rowHeight;\n                    }\n                    if (this.isScrollUp) {\n                        scrollEle.scrollTop = scrollEle.scrollTop + rowHeight;\n                    }\n                }\n            }\n        }\n        this.isScrollDown = false;\n        this.isScrollUp = false;\n    };\n    /**\n     * @param {Row<Column>} row - specifies the row\n     * @param {number} index - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /**\n     * @param {boolean} isReorder - specifies the isreorder\n     * @returns {Row<Column>[]} returns the row\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /**\n     * @returns {Row<Column>[]} retruns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().getElementsByClassName('e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                this.isScrollDown = true;\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        if (tr.classList.length > 1) {\n            tr.classList.remove('e-lazyload-middle-up');\n        }\n        else {\n            tr.removeAttribute('class');\n        }\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.isScrollUp = true;\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var trigger = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                trigger = true;\n            }\n            if (trigger) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = generateExpandPredicates(args.fields, args.keys, this);\n        var predicateList = getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /**\n     * @returns {Row<Column>[]} returns the row\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /**\n     * @returns {Element} returns the element\n     * @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n    };\n    /**\n     * @param {number} index - specifies the index\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().getElementsByClassName(literals.row));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute(literals.ariaRowIndex) === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /**\n     * Tucntion to set the column visibility\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /**\n     * Function to set display.\n     *\n     * @param {Object} tr - specifies the row object\n     * @param {number} idx - specifies the index\n     * @param {string} displayVal - specifies the display value\n     * @param {Row<Column>[]} rows - specifies the array of rows\n     * @param {number} oriIdx - specifies the index\n     * @returns {void}\n     * @hidden\n     */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector(literals.tbody);\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}